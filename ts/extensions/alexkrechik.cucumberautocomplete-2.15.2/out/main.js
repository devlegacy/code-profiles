"use strict";var ar=Object.create;var yt=Object.defineProperty;var ur=Object.getOwnPropertyDescriptor;var cr=Object.getOwnPropertyNames;var lr=Object.getPrototypeOf,dr=Object.prototype.hasOwnProperty;var fi=i=>yt(i,"__esModule",{value:!0});var A=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),fr=(i,e)=>{for(var t in e)yt(i,t,{get:e[t],enumerable:!0})},hi=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of cr(e))!dr.call(i,o)&&(t||o!=="default")&&yt(i,o,{get:()=>e[o],enumerable:!(n=ur(e,o))||n.enumerable});return i},pi=(i,e)=>hi(fi(yt(i!=null?ar(lr(i)):{},"default",!e&&i&&i.__esModule?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i),hr=(i=>(e,t)=>i&&i.get(e)||(t=hi(fi({}),e,1),i&&i.set(e,t),t))(typeof WeakMap!="undefined"?new WeakMap:0);var Xe=A(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});var _t=Object.prototype.toString;function pr(i){return i===!0||i===!1}Ee.boolean=pr;function gi(i){return _t.call(i)==="[object String]"}Ee.string=gi;function gr(i){return _t.call(i)==="[object Number]"}Ee.number=gr;function mr(i){return _t.call(i)==="[object Error]"}Ee.error=mr;function vr(i){return _t.call(i)==="[object Function]"}Ee.func=vr;function mi(i){return Array.isArray(i)}Ee.array=mi;function yr(i){return mi(i)&&i.every(function(e){return gi(e)})}Ee.stringArray=yr});var yi=A(W=>{"use strict";var Q=W&&W.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(W,"__esModule",{value:!0});var Be=Xe(),vi;(function(i){i.ParseError=-32700,i.InvalidRequest=-32600,i.MethodNotFound=-32601,i.InvalidParams=-32602,i.InternalError=-32603,i.serverErrorStart=-32099,i.serverErrorEnd=-32e3,i.ServerNotInitialized=-32002,i.UnknownErrorCode=-32001,i.RequestCancelled=-32800,i.MessageWriteError=1,i.MessageReadError=2})(vi=W.ErrorCodes||(W.ErrorCodes={}));var _r=function(i){Q(e,i);function e(t,n,o){var a=i.call(this,n)||this;return a.code=Be.number(t)?t:vi.UnknownErrorCode,o!==void 0&&(a.data=o),Object.setPrototypeOf(a,e.prototype),a}return e.prototype.toJson=function(){var t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t},e}(Error);W.ResponseError=_r;var G=function(){function i(e,t){this._method=e,this._numberOfParams=t}return Object.defineProperty(i.prototype,"method",{get:function(){return this._method},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numberOfParams",{get:function(){return this._numberOfParams},enumerable:!0,configurable:!0}),i}();W.AbstractMessageType=G;var Cr=function(i){Q(e,i);function e(t){var n=i.call(this,t,0)||this;return n._=void 0,n}return e}(G);W.RequestType0=Cr;var wr=function(i){Q(e,i);function e(t){var n=i.call(this,t,1)||this;return n._=void 0,n}return e}(G);W.RequestType=wr;var Rr=function(i){Q(e,i);function e(t){var n=i.call(this,t,1)||this;return n._=void 0,n}return e}(G);W.RequestType1=Rr;var Tr=function(i){Q(e,i);function e(t){var n=i.call(this,t,2)||this;return n._=void 0,n}return e}(G);W.RequestType2=Tr;var Dr=function(i){Q(e,i);function e(t){var n=i.call(this,t,3)||this;return n._=void 0,n}return e}(G);W.RequestType3=Dr;var br=function(i){Q(e,i);function e(t){var n=i.call(this,t,4)||this;return n._=void 0,n}return e}(G);W.RequestType4=br;var Sr=function(i){Q(e,i);function e(t){var n=i.call(this,t,5)||this;return n._=void 0,n}return e}(G);W.RequestType5=Sr;var qr=function(i){Q(e,i);function e(t){var n=i.call(this,t,6)||this;return n._=void 0,n}return e}(G);W.RequestType6=qr;var xr=function(i){Q(e,i);function e(t){var n=i.call(this,t,7)||this;return n._=void 0,n}return e}(G);W.RequestType7=xr;var Pr=function(i){Q(e,i);function e(t){var n=i.call(this,t,8)||this;return n._=void 0,n}return e}(G);W.RequestType8=Pr;var kr=function(i){Q(e,i);function e(t){var n=i.call(this,t,9)||this;return n._=void 0,n}return e}(G);W.RequestType9=kr;var Er=function(i){Q(e,i);function e(t){var n=i.call(this,t,1)||this;return n._=void 0,n}return e}(G);W.NotificationType=Er;var Or=function(i){Q(e,i);function e(t){var n=i.call(this,t,0)||this;return n._=void 0,n}return e}(G);W.NotificationType0=Or;var Nr=function(i){Q(e,i);function e(t){var n=i.call(this,t,1)||this;return n._=void 0,n}return e}(G);W.NotificationType1=Nr;var Mr=function(i){Q(e,i);function e(t){var n=i.call(this,t,2)||this;return n._=void 0,n}return e}(G);W.NotificationType2=Mr;var Fr=function(i){Q(e,i);function e(t){var n=i.call(this,t,3)||this;return n._=void 0,n}return e}(G);W.NotificationType3=Fr;var Lr=function(i){Q(e,i);function e(t){var n=i.call(this,t,4)||this;return n._=void 0,n}return e}(G);W.NotificationType4=Lr;var Wr=function(i){Q(e,i);function e(t){var n=i.call(this,t,5)||this;return n._=void 0,n}return e}(G);W.NotificationType5=Wr;var jr=function(i){Q(e,i);function e(t){var n=i.call(this,t,6)||this;return n._=void 0,n}return e}(G);W.NotificationType6=jr;var Ir=function(i){Q(e,i);function e(t){var n=i.call(this,t,7)||this;return n._=void 0,n}return e}(G);W.NotificationType7=Ir;var Hr=function(i){Q(e,i);function e(t){var n=i.call(this,t,8)||this;return n._=void 0,n}return e}(G);W.NotificationType8=Hr;var Ar=function(i){Q(e,i);function e(t){var n=i.call(this,t,9)||this;return n._=void 0,n}return e}(G);W.NotificationType9=Ar;function zr(i){var e=i;return e&&Be.string(e.method)&&(Be.string(e.id)||Be.number(e.id))}W.isRequestMessage=zr;function $r(i){var e=i;return e&&Be.string(e.method)&&i.id===void 0}W.isNotificationMessage=$r;function Br(i){var e=i;return e&&(e.result!==void 0||!!e.error)&&(Be.string(e.id)||Be.number(e.id)||e.id===null)}W.isResponseMessage=Br});var rt=A(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});var Ur;(function(i){function e(t){return{dispose:t}}i.create=e})(Ur=Ue.Disposable||(Ue.Disposable={}));var Jr;(function(i){var e={dispose:function(){}};i.None=function(){return e}})(Jr=Ue.Event||(Ue.Event={}));var Qr=function(){function i(){}return i.prototype.add=function(e,t,n){var o=this;t===void 0&&(t=null),this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:function(){return o.remove(e,t)}})},i.prototype.remove=function(e,t){if(t===void 0&&(t=null),!!this._callbacks){for(var n=!1,o=0,a=this._callbacks.length;o<a;o++)if(this._callbacks[o]===e)if(this._contexts[o]===t){this._callbacks.splice(o,1),this._contexts.splice(o,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}},i.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this._callbacks)return[];for(var n=[],o=this._callbacks.slice(0),a=this._contexts.slice(0),c=0,u=o.length;c<u;c++)try{n.push(o[c].apply(a[c],e))}catch(l){console.error(l)}return n},i.prototype.isEmpty=function(){return!this._callbacks||this._callbacks.length===0},i.prototype.dispose=function(){this._callbacks=void 0,this._contexts=void 0},i}(),Gr=function(){function i(e){this._options=e}return Object.defineProperty(i.prototype,"event",{get:function(){var e=this;return this._event||(this._event=function(t,n,o){e._callbacks||(e._callbacks=new Qr),e._options&&e._options.onFirstListenerAdd&&e._callbacks.isEmpty()&&e._options.onFirstListenerAdd(e),e._callbacks.add(t,n);var a;return a={dispose:function(){e._callbacks.remove(t,n),a.dispose=i._noop,e._options&&e._options.onLastListenerRemove&&e._callbacks.isEmpty()&&e._options.onLastListenerRemove(e)}},Array.isArray(o)&&o.push(a),a}),this._event},enumerable:!0,configurable:!0}),i.prototype.fire=function(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)},i.prototype.dispose=function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)},i._noop=function(){},i}();Ue.Emitter=Gr});var Ct=A(Te=>{"use strict";var Wt=Te&&Te.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Te,"__esModule",{value:!0});var Ft=rt(),Ye=Xe(),Lt=8192,_i=new Buffer("\r","ascii")[0],Ci=new Buffer(`
`,"ascii")[0],Xr=`\r
`,Yr=function(){function i(e){e===void 0&&(e="utf8"),this.encoding=e,this.index=0,this.buffer=new Buffer(Lt)}return i.prototype.append=function(e){var t=e;if(typeof e=="string"){var n=e,o=Buffer.byteLength(n,this.encoding);t=new Buffer(o),t.write(n,0,o,this.encoding)}if(this.buffer.length-this.index>=t.length)t.copy(this.buffer,this.index,0,t.length);else{var a=(Math.ceil((this.index+t.length)/Lt)+1)*Lt;this.index===0?(this.buffer=new Buffer(a),t.copy(this.buffer,0,0,t.length)):this.buffer=Buffer.concat([this.buffer.slice(0,this.index),t],a)}this.index+=t.length},i.prototype.tryReadHeaders=function(){for(var e=void 0,t=0;t+3<this.index&&(this.buffer[t]!==_i||this.buffer[t+1]!==Ci||this.buffer[t+2]!==_i||this.buffer[t+3]!==Ci);)t++;if(t+3>=this.index)return e;e=Object.create(null);var n=this.buffer.toString("ascii",0,t).split(Xr);n.forEach(function(a){var c=a.indexOf(":");if(c===-1)throw new Error("Message header must separate key and value using :");var u=a.substr(0,c),l=a.substr(c+1).trim();e[u]=l});var o=t+4;return this.buffer=this.buffer.slice(o),this.index=this.index-o,e},i.prototype.tryReadContent=function(e){if(this.index<e)return null;var t=this.buffer.toString(this.encoding,0,e),n=e;return this.buffer.copy(this.buffer,0,n),this.index=this.index-n,t},Object.defineProperty(i.prototype,"numberOfBytes",{get:function(){return this.index},enumerable:!0,configurable:!0}),i}(),Zr;(function(i){function e(t){var n=t;return n&&Ye.func(n.listen)&&Ye.func(n.dispose)&&Ye.func(n.onError)&&Ye.func(n.onClose)&&Ye.func(n.onPartialMessage)}i.is=e})(Zr=Te.MessageReader||(Te.MessageReader={}));var jt=function(){function i(){this.errorEmitter=new Ft.Emitter,this.closeEmitter=new Ft.Emitter,this.partialMessageEmitter=new Ft.Emitter}return i.prototype.dispose=function(){this.errorEmitter.dispose(),this.closeEmitter.dispose()},Object.defineProperty(i.prototype,"onError",{get:function(){return this.errorEmitter.event},enumerable:!0,configurable:!0}),i.prototype.fireError=function(e){this.errorEmitter.fire(this.asError(e))},Object.defineProperty(i.prototype,"onClose",{get:function(){return this.closeEmitter.event},enumerable:!0,configurable:!0}),i.prototype.fireClose=function(){this.closeEmitter.fire(void 0)},Object.defineProperty(i.prototype,"onPartialMessage",{get:function(){return this.partialMessageEmitter.event},enumerable:!0,configurable:!0}),i.prototype.firePartialMessage=function(e){this.partialMessageEmitter.fire(e)},i.prototype.asError=function(e){return e instanceof Error?e:new Error("Reader recevied error. Reason: "+(Ye.string(e.message)?e.message:"unknown"))},i}();Te.AbstractMessageReader=jt;var wi=function(i){Wt(e,i);function e(t,n){n===void 0&&(n="utf8");var o=i.call(this)||this;return o.readable=t,o.buffer=new Yr(n),o._partialMessageTimeout=1e4,o}return Object.defineProperty(e.prototype,"partialMessageTimeout",{get:function(){return this._partialMessageTimeout},set:function(t){this._partialMessageTimeout=t},enumerable:!0,configurable:!0}),e.prototype.listen=function(t){var n=this;this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t,this.readable.on("data",function(o){n.onData(o)}),this.readable.on("error",function(o){return n.fireError(o)}),this.readable.on("close",function(){return n.fireClose()})},e.prototype.onData=function(t){for(this.buffer.append(t);;){if(this.nextMessageLength===-1){var n=this.buffer.tryReadHeaders();if(!n)return;var o=n["Content-Length"];if(!o)throw new Error("Header must provide a Content-Length property.");var a=parseInt(o);if(isNaN(a))throw new Error("Content-Length value must be a number.");this.nextMessageLength=a}var c=this.buffer.tryReadContent(this.nextMessageLength);if(c===null){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.messageToken++;var u=JSON.parse(c);this.callback(u)}},e.prototype.clearPartialMessageTimer=function(){this.partialMessageTimer&&(clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)},e.prototype.setPartialMessageTimer=function(){var t=this;this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=setTimeout(function(n,o){t.partialMessageTimer=void 0,n===t.messageToken&&(t.firePartialMessage({messageToken:n,waitingTime:o}),t.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))},e}(jt);Te.StreamMessageReader=wi;var Kr=function(i){Wt(e,i);function e(t){var n=i.call(this)||this;n.process=t;var o=n.process;return o.on("error",function(a){return n.fireError(a)}),o.on("close",function(){return n.fireClose()}),n}return e.prototype.listen=function(t){this.process.on("message",t)},e}(jt);Te.IPCMessageReader=Kr;var Vr=function(i){Wt(e,i);function e(t,n){return n===void 0&&(n="utf-8"),i.call(this,t,n)||this}return e}(wi);Te.SocketMessageReader=Vr});var Tt=A(De=>{"use strict";var It=De&&De.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(De,"__esModule",{value:!0});var Ri=rt(),ot=Xe(),Ti="Content-Length: ",wt=`\r
`,eo;(function(i){function e(t){var n=t;return n&&ot.func(n.dispose)&&ot.func(n.onClose)&&ot.func(n.onError)&&ot.func(n.write)}i.is=e})(eo=De.MessageWriter||(De.MessageWriter={}));var Rt=function(){function i(){this.errorEmitter=new Ri.Emitter,this.closeEmitter=new Ri.Emitter}return i.prototype.dispose=function(){this.errorEmitter.dispose(),this.closeEmitter.dispose()},Object.defineProperty(i.prototype,"onError",{get:function(){return this.errorEmitter.event},enumerable:!0,configurable:!0}),i.prototype.fireError=function(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])},Object.defineProperty(i.prototype,"onClose",{get:function(){return this.closeEmitter.event},enumerable:!0,configurable:!0}),i.prototype.fireClose=function(){this.closeEmitter.fire(void 0)},i.prototype.asError=function(e){return e instanceof Error?e:new Error("Writer recevied error. Reason: "+(ot.string(e.message)?e.message:"unknown"))},i}();De.AbstractMessageWriter=Rt;var to=function(i){It(e,i);function e(t,n){n===void 0&&(n="utf8");var o=i.call(this)||this;return o.writable=t,o.encoding=n,o.errorCount=0,o.writable.on("error",function(a){return o.fireError(a)}),o.writable.on("close",function(){return o.fireClose()}),o}return e.prototype.write=function(t){var n=JSON.stringify(t),o=Buffer.byteLength(n,this.encoding),a=[Ti,o.toString(),wt,wt];try{this.writable.write(a.join(""),"ascii"),this.writable.write(n,this.encoding),this.errorCount=0}catch(c){this.errorCount++,this.fireError(c,t,this.errorCount)}},e}(Rt);De.StreamMessageWriter=to;var io=function(i){It(e,i);function e(t){var n=i.call(this)||this;n.process=t,n.errorCount=0,n.queue=[],n.sending=!1;var o=n.process;return o.on("error",function(a){return n.fireError(a)}),o.on("close",function(){return n.fireClose}),n}return e.prototype.write=function(t){!this.sending&&this.queue.length===0?this.doWriteMessage(t):this.queue.push(t)},e.prototype.doWriteMessage=function(t){var n=this;try{this.process.send&&(this.sending=!0,this.process.send(t,void 0,void 0,function(o){n.sending=!1,o?(n.errorCount++,n.fireError(o,t,n.errorCount)):n.errorCount=0,n.queue.length>0&&n.doWriteMessage(n.queue.shift())}))}catch(o){this.errorCount++,this.fireError(o,t,this.errorCount)}},e}(Rt);De.IPCMessageWriter=io;var no=function(i){It(e,i);function e(t,n){n===void 0&&(n="utf8");var o=i.call(this)||this;return o.socket=t,o.queue=[],o.sending=!1,o.encoding=n,o.errorCount=0,o.socket.on("error",function(a){return o.fireError(a)}),o.socket.on("close",function(){return o.fireClose()}),o}return e.prototype.write=function(t){!this.sending&&this.queue.length===0?this.doWriteMessage(t):this.queue.push(t)},e.prototype.doWriteMessage=function(t){var n=this,o=JSON.stringify(t),a=Buffer.byteLength(o,this.encoding),c=[Ti,a.toString(),wt,wt];try{this.sending=!0,this.socket.write(c.join(""),"ascii",function(u){u&&n.handleError(u,t);try{n.socket.write(o,n.encoding,function(l){n.sending=!1,l?n.handleError(l,t):n.errorCount=0,n.queue.length>0&&n.doWriteMessage(n.queue.shift())})}catch(l){n.handleError(l,t)}})}catch(u){this.handleError(u,t)}},e.prototype.handleError=function(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)},e}(Rt);De.SocketMessageWriter=no});var bi=A(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});var Ht=rt(),ro=Xe(),Di;(function(i){i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ht.Event.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ht.Event.None});function e(t){var n=t;return n&&(n===i.None||n===i.Cancelled||ro.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}i.is=e})(Di=st.CancellationToken||(st.CancellationToken={}));var oo=Object.freeze(function(i,e){var t=setTimeout(i.bind(e),0);return{dispose:function(){clearTimeout(t)}}}),so=function(){function i(){this._isCancelled=!1}return i.prototype.cancel=function(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this._emitter=void 0))},Object.defineProperty(i.prototype,"isCancellationRequested",{get:function(){return this._isCancelled},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onCancellationRequested",{get:function(){return this._isCancelled?oo:(this._emitter||(this._emitter=new Ht.Emitter),this._emitter.event)},enumerable:!0,configurable:!0}),i}(),ao=function(){function i(){}return Object.defineProperty(i.prototype,"token",{get:function(){return this._token||(this._token=new so),this._token},enumerable:!0,configurable:!0}),i.prototype.cancel=function(){this._token?this._token.cancel():this._token=Di.Cancelled},i.prototype.dispose=function(){this.cancel()},i}();st.CancellationTokenSource=ao});var Si=A(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});var be;(function(i){i.None=0,i.First=1,i.Last=2})(be=at.Touch||(at.Touch={}));var uo=function(){function i(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0}return i.prototype.clear=function(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0},i.prototype.isEmpty=function(){return!this._head&&!this._tail},Object.defineProperty(i.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),i.prototype.has=function(e){return this._map.has(e)},i.prototype.get=function(e){var t=this._map.get(e);if(!!t)return t.value},i.prototype.set=function(e,t,n){n===void 0&&(n=be.None);var o=this._map.get(e);if(o)o.value=t,n!==be.None&&this.touch(o,n);else{switch(o={key:e,value:t,next:void 0,previous:void 0},n){case be.None:this.addItemLast(o);break;case be.First:this.addItemFirst(o);break;case be.Last:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}},i.prototype.delete=function(e){var t=this._map.get(e);return t?(this._map.delete(e),this.removeItem(t),this._size--,!0):!1},i.prototype.shift=function(){if(!(!this._head&&!this._tail)){if(!this._head||!this._tail)throw new Error("Invalid list");var e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}},i.prototype.forEach=function(e,t){for(var n=this._head;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.next},i.prototype.forEachReverse=function(e,t){for(var n=this._tail;n;)t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),n=n.previous},i.prototype.values=function(){for(var e=[],t=this._head;t;)e.push(t.value),t=t.next;return e},i.prototype.keys=function(){for(var e=[],t=this._head;t;)e.push(t.key),t=t.next;return e},i.prototype.addItemFirst=function(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e},i.prototype.addItemLast=function(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e},i.prototype.removeItem=function(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head)this._head=e.next;else if(e===this._tail)this._tail=e.previous;else{var t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}},i.prototype.touch=function(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==be.First&&t!==be.Last)){if(t===be.First){if(e===this._head)return;var n=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e}else if(t===be.Last){if(e===this._tail)return;var n=e.next,o=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e}}},i}();at.LinkedMap=uo});var ki=A(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});var co=require("path"),lo=require("os"),fo=require("crypto"),qi=require("net"),xi=Ct(),Pi=Tt();function ho(){var i=fo.randomBytes(21).toString("hex");return process.platform==="win32"?"\\\\.\\pipe\\vscode-jsonrpc-"+i+"-sock":co.join(lo.tmpdir(),"vscode-"+i+".sock")}ut.generateRandomPipeName=ho;function po(i,e){e===void 0&&(e="utf-8");var t,n=new Promise(function(o,a){t=o});return new Promise(function(o,a){var c=qi.createServer(function(u){c.close(),t([new xi.SocketMessageReader(u,e),new Pi.SocketMessageWriter(u,e)])});c.on("error",a),c.listen(i,function(){c.removeListener("error",a),o({onConnected:function(){return n}})})})}ut.createClientPipeTransport=po;function go(i,e){e===void 0&&(e="utf-8");var t=qi.createConnection(i);return[new xi.SocketMessageReader(t,e),new Pi.SocketMessageWriter(t,e)]}ut.createServerPipeTransport=go});var Mi=A(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});var Ei=require("net"),Oi=Ct(),Ni=Tt();function mo(i,e){e===void 0&&(e="utf-8");var t,n=new Promise(function(o,a){t=o});return new Promise(function(o,a){var c=Ei.createServer(function(u){c.close(),t([new Oi.SocketMessageReader(u,e),new Ni.SocketMessageWriter(u,e)])});c.on("error",a),c.listen(i,"127.0.0.1",function(){c.removeListener("error",a),o({onConnected:function(){return n}})})})}Dt.createClientSocketTransport=mo;function vo(i,e){e===void 0&&(e="utf-8");var t=Ei.createConnection(i,"127.0.0.1");return[new Oi.SocketMessageReader(t,e),new Ni.SocketMessageWriter(t,e)]}Dt.createServerSocketTransport=vo});var Ke=A(T=>{"use strict";var yo=T&&T.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function Li(i){for(var e in i)T.hasOwnProperty(e)||(T[e]=i[e])}Object.defineProperty(T,"__esModule",{value:!0});var se=Xe(),S=yi();T.RequestType=S.RequestType;T.RequestType0=S.RequestType0;T.RequestType1=S.RequestType1;T.RequestType2=S.RequestType2;T.RequestType3=S.RequestType3;T.RequestType4=S.RequestType4;T.RequestType5=S.RequestType5;T.RequestType6=S.RequestType6;T.RequestType7=S.RequestType7;T.RequestType8=S.RequestType8;T.RequestType9=S.RequestType9;T.ResponseError=S.ResponseError;T.ErrorCodes=S.ErrorCodes;T.NotificationType=S.NotificationType;T.NotificationType0=S.NotificationType0;T.NotificationType1=S.NotificationType1;T.NotificationType2=S.NotificationType2;T.NotificationType3=S.NotificationType3;T.NotificationType4=S.NotificationType4;T.NotificationType5=S.NotificationType5;T.NotificationType6=S.NotificationType6;T.NotificationType7=S.NotificationType7;T.NotificationType8=S.NotificationType8;T.NotificationType9=S.NotificationType9;var lt=Ct();T.MessageReader=lt.MessageReader;T.StreamMessageReader=lt.StreamMessageReader;T.IPCMessageReader=lt.IPCMessageReader;T.SocketMessageReader=lt.SocketMessageReader;var dt=Tt();T.MessageWriter=dt.MessageWriter;T.StreamMessageWriter=dt.StreamMessageWriter;T.IPCMessageWriter=dt.IPCMessageWriter;T.SocketMessageWriter=dt.SocketMessageWriter;var Je=rt();T.Disposable=Je.Disposable;T.Event=Je.Event;T.Emitter=Je.Emitter;var Ze=bi();T.CancellationTokenSource=Ze.CancellationTokenSource;T.CancellationToken=Ze.CancellationToken;var Fi=Si();Li(ki());Li(Mi());var ct;(function(i){i.type=new S.NotificationType("$/cancelRequest")})(ct||(ct={}));T.NullLogger=Object.freeze({error:function(){},warn:function(){},info:function(){},log:function(){}});var K;(function(i){i[i.Off=0]="Off",i[i.Messages=1]="Messages",i[i.Verbose=2]="Verbose"})(K=T.Trace||(T.Trace={}));(function(i){function e(n){switch(n=n.toLowerCase(),n){case"off":return i.Off;case"messages":return i.Messages;case"verbose":return i.Verbose;default:return i.Off}}i.fromString=e;function t(n){switch(n){case i.Off:return"off";case i.Messages:return"messages";case i.Verbose:return"verbose";default:return"off"}}i.toString=t})(K=T.Trace||(T.Trace={}));var Wi;(function(i){i.type=new S.NotificationType("$/setTraceNotification")})(Wi=T.SetTraceNotification||(T.SetTraceNotification={}));var At;(function(i){i.type=new S.NotificationType("$/logTraceNotification")})(At=T.LogTraceNotification||(T.LogTraceNotification={}));var bt;(function(i){i[i.Closed=1]="Closed",i[i.Disposed=2]="Disposed",i[i.AlreadyListening=3]="AlreadyListening"})(bt=T.ConnectionErrors||(T.ConnectionErrors={}));var St=function(i){yo(e,i);function e(t,n){var o=i.call(this,n)||this;return o.code=t,Object.setPrototypeOf(o,e.prototype),o}return e}(Error);T.ConnectionError=St;var _o;(function(i){function e(t){var n=t;return n&&se.func(n.cancelUndispatched)}i.is=e})(_o=T.ConnectionStrategy||(T.ConnectionStrategy={}));var me;(function(i){i[i.New=1]="New",i[i.Listening=2]="Listening",i[i.Closed=3]="Closed",i[i.Disposed=4]="Disposed"})(me||(me={}));function Co(i,e,t,n){var o=0,a=0,c=0,u="2.0",l=void 0,m=Object.create(null),_=void 0,L=Object.create(null),z,I=new Fi.LinkedMap,P=Object.create(null),D=Object.create(null),w=K.Off,x,M=me.New,fe=new Je.Emitter,Pe=new Je.Emitter,he=new Je.Emitter,Ne=new Je.Emitter;function ke(d){return"req-"+d.toString()}function Me(d){return d===null?"res-unknown-"+(++c).toString():"res-"+d.toString()}function Fe(){return"not-"+(++a).toString()}function ze(d,y){S.isRequestMessage(y)?d.set(ke(y.id),y):S.isResponseMessage(y)?d.set(Me(y.id),y):d.set(Fe(),y)}function _e(d){}function pe(){return M===me.Listening}function Ce(){return M===me.Closed}function ue(){return M===me.Disposed}function Le(){(M===me.New||M===me.Listening)&&(M=me.Closed,Pe.fire(void 0))}function $e(d){fe.fire([d,void 0,void 0])}function C(d){fe.fire(d)}i.onClose(Le),i.onError($e),e.onClose(Le),e.onError(C);function s(){z||I.size===0||(z=setImmediate(function(){z=void 0,r()}))}function r(){if(I.size!==0){var d=I.shift();try{S.isRequestMessage(d)?p(d):S.isNotificationMessage(d)?k(d):S.isResponseMessage(d)?f(d):H(d)}finally{s()}}}var h=function(d){try{if(S.isNotificationMessage(d)&&d.method===ct.type.method){var y=ke(d.params.id),R=I.get(y);if(S.isRequestMessage(R)){var E=n&&n.cancelUndispatched?n.cancelUndispatched(R,_e):void 0;if(E&&(E.error!==void 0||E.result!==void 0)){I.delete(y),E.id=R.id,X(E,d.method,Date.now()),e.write(E);return}}}ze(I,d)}finally{s()}};function p(d){if(ue())return;function y($,we,Ie){var Re={jsonrpc:u,id:d.id};$ instanceof S.ResponseError?Re.error=$.toJson():Re.result=$===void 0?null:$,X(Re,we,Ie),e.write(Re)}function R($,we,Ie){var Re={jsonrpc:u,id:d.id,error:$.toJson()};X(Re,we,Ie),e.write(Re)}function E($,we,Ie){$===void 0&&($=null);var Re={jsonrpc:u,id:d.id,result:$};X(Re,we,Ie),e.write(Re)}Mt(d);var F=m[d.method],ne,oe;F&&(ne=F.type,oe=F.handler);var ce=Date.now();if(oe||l){var ge=new Ze.CancellationTokenSource,je=String(d.id);D[je]=ge;try{var le=void 0;d.params===void 0||ne!==void 0&&ne.numberOfParams===0?le=oe?oe(ge.token):l(d.method,ge.token):se.array(d.params)&&(ne===void 0||ne.numberOfParams>1)?le=oe?oe.apply(void 0,d.params.concat([ge.token])):l.apply(void 0,[d.method].concat(d.params,[ge.token])):le=oe?oe(d.params,ge.token):l(d.method,d.params,ge.token);var vt=le;le?vt.then?vt.then(function($){delete D[je],y($,d.method,ce)},function($){delete D[je],$ instanceof S.ResponseError?R($,d.method,ce):$&&se.string($.message)?R(new S.ResponseError(S.ErrorCodes.InternalError,"Request "+d.method+" failed with message: "+$.message),d.method,ce):R(new S.ResponseError(S.ErrorCodes.InternalError,"Request "+d.method+" failed unexpectedly without providing any details."),d.method,ce)}):(delete D[je],y(le,d.method,ce)):(delete D[je],E(le,d.method,ce))}catch($){delete D[je],$ instanceof S.ResponseError?y($,d.method,ce):$&&se.string($.message)?R(new S.ResponseError(S.ErrorCodes.InternalError,"Request "+d.method+" failed with message: "+$.message),d.method,ce):R(new S.ResponseError(S.ErrorCodes.InternalError,"Request "+d.method+" failed unexpectedly without providing any details."),d.method,ce)}}else R(new S.ResponseError(S.ErrorCodes.MethodNotFound,"Unhandled method "+d.method),d.method,ce)}function f(d){if(!ue())if(d.id===null)d.error?t.error(`Received response message without id: Error is: 
`+JSON.stringify(d.error,void 0,4)):t.error("Received response message without id. No further error information provided.");else{var y=String(d.id),R=P[y];if(rr(d,R),R){delete P[y];try{if(d.error){var E=d.error;R.reject(new S.ResponseError(E.code,E.message,E.data))}else if(d.result!==void 0)R.resolve(d.result);else throw new Error("Should never happen.")}catch(F){F.message?t.error("Response handler '"+R.method+"' failed with message: "+F.message):t.error("Response handler '"+R.method+"' failed unexpectedly.")}}}}function k(d){if(!ue()){var y=void 0,R;if(d.method===ct.type.method)R=function(F){var ne=F.id,oe=D[String(ne)];oe&&oe.cancel()};else{var E=L[d.method];E&&(R=E.handler,y=E.type)}if(R||_)try{nr(d),d.params===void 0||y!==void 0&&y.numberOfParams===0?R?R():_(d.method):se.array(d.params)&&(y===void 0||y.numberOfParams>1)?R?R.apply(void 0,d.params):_.apply(void 0,[d.method].concat(d.params)):R?R(d.params):_(d.method,d.params)}catch(F){F.message?t.error("Notification handler '"+d.method+"' failed with message: "+F.message):t.error("Notification handler '"+d.method+"' failed unexpectedly.")}else he.fire(d)}}function H(d){if(!d){t.error("Received empty message.");return}t.error(`Received message which is neither a response nor a notification message:
`+JSON.stringify(d,null,4));var y=d;if(se.string(y.id)||se.number(y.id)){var R=String(y.id),E=P[R];E&&E.reject(new Error("The received response has neither a result nor an error property."))}}function de(d){if(!(w===K.Off||!x)){var y=void 0;w===K.Verbose&&d.params&&(y="Params: "+JSON.stringify(d.params,null,4)+`

`),x.log("Sending request '"+d.method+" - ("+d.id+")'.",y)}}function We(d){if(!(w===K.Off||!x)){var y=void 0;w===K.Verbose&&(d.params?y="Params: "+JSON.stringify(d.params,null,4)+`

`:y=`No parameters provided.

`),x.log("Sending notification '"+d.method+"'.",y)}}function X(d,y,R){if(!(w===K.Off||!x)){var E=void 0;w===K.Verbose&&(d.error&&d.error.data?E="Error data: "+JSON.stringify(d.error.data,null,4)+`

`:d.result?E="Result: "+JSON.stringify(d.result,null,4)+`

`:d.error===void 0&&(E=`No result returned.

`)),x.log("Sending response '"+y+" - ("+d.id+")'. Processing request took "+(Date.now()-R)+"ms",E)}}function Mt(d){if(!(w===K.Off||!x)){var y=void 0;w===K.Verbose&&d.params&&(y="Params: "+JSON.stringify(d.params,null,4)+`

`),x.log("Received request '"+d.method+" - ("+d.id+")'.",y)}}function nr(d){if(!(w===K.Off||!x||d.method===At.type.method)){var y=void 0;w===K.Verbose&&(d.params?y="Params: "+JSON.stringify(d.params,null,4)+`

`:y=`No parameters provided.

`),x.log("Received notification '"+d.method+"'.",y)}}function rr(d,y){if(!(w===K.Off||!x)){var R=void 0;if(w===K.Verbose&&(d.error&&d.error.data?R="Error data: "+JSON.stringify(d.error.data,null,4)+`

`:d.result?R="Result: "+JSON.stringify(d.result,null,4)+`

`:d.error===void 0&&(R=`No result returned.

`)),y){var E=d.error?" Request failed: "+d.error.message+" ("+d.error.code+").":"";x.log("Received response '"+y.method+" - ("+d.id+")' in "+(Date.now()-y.timerStart)+"ms."+E,R)}else x.log("Received response "+d.id+" without active response promise.",R)}}function nt(){if(Ce())throw new St(bt.Closed,"Connection is closed.");if(ue())throw new St(bt.Disposed,"Connection is disposed.")}function or(){if(pe())throw new St(bt.AlreadyListening,"Connection is already listening")}function sr(){if(!pe())throw new Error("Call listen() first.")}function Ge(d){return d===void 0?null:d}function di(d,y){var R,E=d.numberOfParams;switch(E){case 0:R=null;break;case 1:R=Ge(y[0]);break;default:R=[];for(var F=0;F<y.length&&F<E;F++)R.push(Ge(y[F]));if(y.length<E)for(var F=y.length;F<E;F++)R.push(null);break}return R}var mt={sendNotification:function(d){for(var y=[],R=1;R<arguments.length;R++)y[R-1]=arguments[R];nt();var E,F;if(se.string(d))switch(E=d,y.length){case 0:F=null;break;case 1:F=y[0];break;default:F=y;break}else E=d.method,F=di(d,y);var ne={jsonrpc:u,method:E,params:F};We(ne),e.write(ne)},onNotification:function(d,y){nt(),se.func(d)?_=d:y&&(se.string(d)?L[d]={type:void 0,handler:y}:L[d.method]={type:d,handler:y})},sendRequest:function(d){for(var y=[],R=1;R<arguments.length;R++)y[R-1]=arguments[R];nt(),sr();var E,F,ne=void 0;if(se.string(d))switch(E=d,y.length){case 0:F=null;break;case 1:Ze.CancellationToken.is(y[0])?(F=null,ne=y[0]):F=Ge(y[0]);break;default:var oe=y.length-1;Ze.CancellationToken.is(y[oe])?(ne=y[oe],y.length===2?F=Ge(y[0]):F=y.slice(0,oe).map(function(le){return Ge(le)})):F=y.map(function(le){return Ge(le)});break}else{E=d.method,F=di(d,y);var ce=d.numberOfParams;ne=Ze.CancellationToken.is(y[ce])?y[ce]:void 0}var ge=o++,je=new Promise(function(le,vt){var $={jsonrpc:u,id:ge,method:E,params:F},we={method:E,timerStart:Date.now(),resolve:le,reject:vt};de($);try{e.write($)}catch(Ie){we.reject(new S.ResponseError(S.ErrorCodes.MessageWriteError,Ie.message?Ie.message:"Unknown reason")),we=null}we&&(P[String(ge)]=we)});return ne&&ne.onCancellationRequested(function(){mt.sendNotification(ct.type,{id:ge})}),je},onRequest:function(d,y){nt(),se.func(d)?l=d:y&&(se.string(d)?m[d]={type:void 0,handler:y}:m[d.method]={type:d,handler:y})},trace:function(d,y,R){R===void 0&&(R=!1),w=d,w===K.Off?x=void 0:x=y,R&&!Ce()&&!ue()&&mt.sendNotification(Wi.type,{value:K.toString(d)})},onError:fe.event,onClose:Pe.event,onUnhandledNotification:he.event,onDispose:Ne.event,dispose:function(){if(!ue()){M=me.Disposed,Ne.fire(void 0);var d=new Error("Connection got disposed.");Object.keys(P).forEach(function(y){P[y].reject(d)}),P=Object.create(null),D=Object.create(null),I=new Fi.LinkedMap,se.func(e.dispose)&&e.dispose(),se.func(i.dispose)&&i.dispose()}},listen:function(){nt(),or(),M=me.Listening,i.listen(h)},inspect:function(){console.log("inspect")}};return mt.onNotification(At.type,function(d){w===K.Off||!x||x.log(d.message,w===K.Verbose?d.verbose:void 0)}),mt}function wo(i){return i.listen!==void 0&&i.read===void 0}function Ro(i){return i.write!==void 0&&i.end===void 0}function To(i,e,t,n){t||(t=T.NullLogger);var o=wo(i)?i:new lt.StreamMessageReader(i),a=Ro(e)?e:new dt.StreamMessageWriter(e);return Co(o,a,t,n)}T.createMessageConnection=To});var Ii=A((ji,qt)=>{(function(i){if(typeof qt=="object"&&typeof qt.exports=="object"){var e=i(require,ji);e!==void 0&&(qt.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],i)})(function(i,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t;(function(s){function r(p,f){return{line:p,character:f}}s.create=r;function h(p){var f=p;return C.defined(f)&&C.number(f.line)&&C.number(f.character)}s.is=h})(t=e.Position||(e.Position={}));var n;(function(s){function r(p,f,k,H){if(C.number(p)&&C.number(f)&&C.number(k)&&C.number(H))return{start:t.create(p,f),end:t.create(k,H)};if(t.is(p)&&t.is(f))return{start:p,end:f};throw new Error("Range#create called with invalid arguments["+p+", "+f+", "+k+", "+H+"]")}s.create=r;function h(p){var f=p;return C.defined(f)&&t.is(f.start)&&t.is(f.end)}s.is=h})(n=e.Range||(e.Range={}));var o;(function(s){function r(p,f){return{uri:p,range:f}}s.create=r;function h(p){var f=p;return C.defined(f)&&n.is(f.range)&&(C.string(f.uri)||C.undefined(f.uri))}s.is=h})(o=e.Location||(e.Location={}));var a;(function(s){s.Error=1,s.Warning=2,s.Information=3,s.Hint=4})(a=e.DiagnosticSeverity||(e.DiagnosticSeverity={}));var c;(function(s){function r(p,f,k,H,de){var We={range:p,message:f};return C.defined(k)&&(We.severity=k),C.defined(H)&&(We.code=H),C.defined(de)&&(We.source=de),We}s.create=r;function h(p){var f=p;return C.defined(f)&&n.is(f.range)&&C.string(f.message)&&(C.number(f.severity)||C.undefined(f.severity))&&(C.number(f.code)||C.string(f.code)||C.undefined(f.code))&&(C.string(f.source)||C.undefined(f.source))}s.is=h})(c=e.Diagnostic||(e.Diagnostic={}));var u;(function(s){function r(p,f){for(var k=[],H=2;H<arguments.length;H++)k[H-2]=arguments[H];var de={title:p,command:f};return C.defined(k)&&k.length>0&&(de.arguments=k),de}s.create=r;function h(p){var f=p;return C.defined(f)&&C.string(f.title)&&C.string(f.title)}s.is=h})(u=e.Command||(e.Command={}));var l;(function(s){function r(f,k){return{range:f,newText:k}}s.replace=r;function h(f,k){return{range:{start:f,end:f},newText:k}}s.insert=h;function p(f){return{range:f,newText:""}}s.del=p})(l=e.TextEdit||(e.TextEdit={}));var m;(function(s){function r(p,f){return{textDocument:p,edits:f}}s.create=r;function h(p){var f=p;return C.defined(f)&&I.is(f.textDocument)&&Array.isArray(f.edits)}s.is=h})(m=e.TextDocumentEdit||(e.TextDocumentEdit={}));var _=function(){function s(r){this.edits=r}return s.prototype.insert=function(r,h){this.edits.push(l.insert(r,h))},s.prototype.replace=function(r,h){this.edits.push(l.replace(r,h))},s.prototype.delete=function(r){this.edits.push(l.del(r))},s.prototype.add=function(r){this.edits.push(r)},s.prototype.all=function(){return this.edits},s.prototype.clear=function(){this.edits.splice(0,this.edits.length)},s}(),L=function(){function s(r){var h=this;this._textEditChanges=Object.create(null),r&&(this._workspaceEdit=r,r.documentChanges?r.documentChanges.forEach(function(p){var f=new _(p.edits);h._textEditChanges[p.textDocument.uri]=f}):r.changes&&Object.keys(r.changes).forEach(function(p){var f=new _(r.changes[p]);h._textEditChanges[p]=f}))}return Object.defineProperty(s.prototype,"edit",{get:function(){return this._workspaceEdit},enumerable:!0,configurable:!0}),s.prototype.getTextEditChange=function(r){if(I.is(r)){if(this._workspaceEdit||(this._workspaceEdit={documentChanges:[]}),!this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for versioned document changes.");var h=r,p=this._textEditChanges[h.uri];if(!p){var f=[],k={textDocument:h,edits:f};this._workspaceEdit.documentChanges.push(k),p=new _(f),this._textEditChanges[h.uri]=p}return p}else{if(this._workspaceEdit||(this._workspaceEdit={changes:Object.create(null)}),!this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var p=this._textEditChanges[r];if(!p){var f=[];this._workspaceEdit.changes[r]=f,p=new _(f),this._textEditChanges[r]=p}return p}},s}();e.WorkspaceChange=L;var z;(function(s){function r(p){return{uri:p}}s.create=r;function h(p){var f=p;return C.defined(f)&&C.string(f.uri)}s.is=h})(z=e.TextDocumentIdentifier||(e.TextDocumentIdentifier={}));var I;(function(s){function r(p,f){return{uri:p,version:f}}s.create=r;function h(p){var f=p;return C.defined(f)&&C.string(f.uri)&&C.number(f.version)}s.is=h})(I=e.VersionedTextDocumentIdentifier||(e.VersionedTextDocumentIdentifier={}));var P;(function(s){function r(p,f,k,H){return{uri:p,languageId:f,version:k,text:H}}s.create=r;function h(p){var f=p;return C.defined(f)&&C.string(f.uri)&&C.string(f.languageId)&&C.number(f.version)&&C.string(f.text)}s.is=h})(P=e.TextDocumentItem||(e.TextDocumentItem={}));var D;(function(s){s.Text=1,s.Method=2,s.Function=3,s.Constructor=4,s.Field=5,s.Variable=6,s.Class=7,s.Interface=8,s.Module=9,s.Property=10,s.Unit=11,s.Value=12,s.Enum=13,s.Keyword=14,s.Snippet=15,s.Color=16,s.File=17,s.Reference=18})(D=e.CompletionItemKind||(e.CompletionItemKind={}));var w;(function(s){s.PlainText=1,s.Snippet=2})(w=e.InsertTextFormat||(e.InsertTextFormat={}));var x;(function(s){function r(h){return{label:h}}s.create=r})(x=e.CompletionItem||(e.CompletionItem={}));var M;(function(s){function r(h,p){return{items:h||[],isIncomplete:!!p}}s.create=r})(M=e.CompletionList||(e.CompletionList={}));var fe;(function(s){function r(h){return h.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s.fromPlainText=r})(fe=e.MarkedString||(e.MarkedString={}));var Pe;(function(s){function r(h,p){return p?{label:h,documentation:p}:{label:h}}s.create=r})(Pe=e.ParameterInformation||(e.ParameterInformation={}));var he;(function(s){function r(h,p){for(var f=[],k=2;k<arguments.length;k++)f[k-2]=arguments[k];var H={label:h};return C.defined(p)&&(H.documentation=p),C.defined(f)?H.parameters=f:H.parameters=[],H}s.create=r})(he=e.SignatureInformation||(e.SignatureInformation={}));var Ne;(function(s){s.Text=1,s.Read=2,s.Write=3})(Ne=e.DocumentHighlightKind||(e.DocumentHighlightKind={}));var ke;(function(s){function r(h,p){var f={range:h};return C.number(p)&&(f.kind=p),f}s.create=r})(ke=e.DocumentHighlight||(e.DocumentHighlight={}));var Me;(function(s){s.File=1,s.Module=2,s.Namespace=3,s.Package=4,s.Class=5,s.Method=6,s.Property=7,s.Field=8,s.Constructor=9,s.Enum=10,s.Interface=11,s.Function=12,s.Variable=13,s.Constant=14,s.String=15,s.Number=16,s.Boolean=17,s.Array=18})(Me=e.SymbolKind||(e.SymbolKind={}));var Fe;(function(s){function r(h,p,f,k,H){var de={name:h,kind:p,location:{uri:k,range:f}};return H&&(de.containerName=H),de}s.create=r})(Fe=e.SymbolInformation||(e.SymbolInformation={}));var ze;(function(s){function r(p){return{diagnostics:p}}s.create=r;function h(p){var f=p;return C.defined(f)&&C.typedArray(f.diagnostics,c.is)}s.is=h})(ze=e.CodeActionContext||(e.CodeActionContext={}));var _e;(function(s){function r(p,f){var k={range:p};return C.defined(f)&&(k.data=f),k}s.create=r;function h(p){var f=p;return C.defined(f)&&n.is(f.range)&&(C.undefined(f.command)||u.is(f.command))}s.is=h})(_e=e.CodeLens||(e.CodeLens={}));var pe;(function(s){function r(p,f){return{tabSize:p,insertSpaces:f}}s.create=r;function h(p){var f=p;return C.defined(f)&&C.number(f.tabSize)&&C.boolean(f.insertSpaces)}s.is=h})(pe=e.FormattingOptions||(e.FormattingOptions={}));var Ce=function(){function s(){}return s}();e.DocumentLink=Ce,function(s){function r(p,f){return{range:p,target:f}}s.create=r;function h(p){var f=p;return C.defined(f)&&n.is(f.range)&&(C.undefined(f.target)||C.string(f.target))}s.is=h}(Ce=e.DocumentLink||(e.DocumentLink={})),e.DocumentLink=Ce,e.EOL=[`
`,`\r
`,"\r"];var ue;(function(s){function r(p,f,k,H){return new $e(p,f,k,H)}s.create=r;function h(p){var f=p;return!!(C.defined(f)&&C.string(f.uri)&&(C.undefined(f.languageId)||C.string(f.languageId))&&C.number(f.lineCount)&&C.func(f.getText)&&C.func(f.positionAt)&&C.func(f.offsetAt))}s.is=h})(ue=e.TextDocument||(e.TextDocument={}));var Le;(function(s){s.Manual=1,s.AfterDelay=2,s.FocusOut=3})(Le=e.TextDocumentSaveReason||(e.TextDocumentSaveReason={}));var $e=function(){function s(r,h,p,f){this._uri=r,this._languageId=h,this._version=p,this._content=f,this._lineOffsets=null}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),s.prototype.getText=function(){return this._content},s.prototype.update=function(r,h){this._content=r.text,this._version=h,this._lineOffsets=null},s.prototype.getLineOffsets=function(){if(this._lineOffsets===null){for(var r=[],h=this._content,p=!0,f=0;f<h.length;f++){p&&(r.push(f),p=!1);var k=h.charAt(f);p=k==="\r"||k===`
`,k==="\r"&&f+1<h.length&&h.charAt(f+1)===`
`&&f++}p&&h.length>0&&r.push(h.length),this._lineOffsets=r}return this._lineOffsets},s.prototype.positionAt=function(r){r=Math.max(Math.min(r,this._content.length),0);var h=this.getLineOffsets(),p=0,f=h.length;if(f===0)return t.create(0,r);for(;p<f;){var k=Math.floor((p+f)/2);h[k]>r?f=k:p=k+1}var H=p-1;return t.create(H,r-h[H])},s.prototype.offsetAt=function(r){var h=this.getLineOffsets();if(r.line>=h.length)return this._content.length;if(r.line<0)return 0;var p=h[r.line],f=r.line+1<h.length?h[r.line+1]:this._content.length;return Math.max(Math.min(p+r.character,f),p)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!0,configurable:!0}),s}(),C;(function(s){var r=Object.prototype.toString;function h(X){return typeof X<"u"}s.defined=h;function p(X){return typeof X>"u"}s.undefined=p;function f(X){return X===!0||X===!1}s.boolean=f;function k(X){return r.call(X)==="[object String]"}s.string=k;function H(X){return r.call(X)==="[object Number]"}s.number=H;function de(X){return r.call(X)==="[object Function]"}s.func=de;function We(X,Mt){return Array.isArray(X)&&X.every(Mt)}s.typedArray=We})(C||(C={}))})});var $i=A(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});var xt=Object.prototype.toString;function Do(i){return i===!0||i===!1}ve.boolean=Do;function Hi(i){return xt.call(i)==="[object String]"}ve.string=Hi;function bo(i){return xt.call(i)==="[object Number]"}ve.number=bo;function So(i){return xt.call(i)==="[object Error]"}ve.error=So;function Ai(i){return xt.call(i)==="[object Function]"}ve.func=Ai;function zi(i){return Array.isArray(i)}ve.array=zi;function qo(i){return zi(i)&&i.every(e=>Hi(e))}ve.stringArray=qo;function xo(i,e){return Array.isArray(i)&&i.every(e)}ve.typedArray=xo;function Po(i){return i&&Ai(i.then)}ve.thenable=Po});var Bi=A(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});var zt=$i(),O=Ke(),ko;(function(i){function e(t){let n=t;return zt.string(n.language)||zt.string(n.scheme)||zt.string(n.pattern)}i.is=e})(ko=v.DocumentFilter||(v.DocumentFilter={}));var Eo;(function(i){i.type=new O.RequestType("client/registerCapability")})(Eo=v.RegistrationRequest||(v.RegistrationRequest={}));var Oo;(function(i){i.type=new O.RequestType("client/unregisterCapability")})(Oo=v.UnregistrationRequest||(v.UnregistrationRequest={}));var No;(function(i){i.None=0,i.Full=1,i.Incremental=2})(No=v.TextDocumentSyncKind||(v.TextDocumentSyncKind={}));var Mo;(function(i){i.type=new O.RequestType("initialize")})(Mo=v.InitializeRequest||(v.InitializeRequest={}));var Fo;(function(i){i.unknownProtocolVersion=1})(Fo=v.InitializeError||(v.InitializeError={}));var Lo;(function(i){i.type=new O.NotificationType("initialized")})(Lo=v.InitializedNotification||(v.InitializedNotification={}));var Wo;(function(i){i.type=new O.RequestType0("shutdown")})(Wo=v.ShutdownRequest||(v.ShutdownRequest={}));var jo;(function(i){i.type=new O.NotificationType0("exit")})(jo=v.ExitNotification||(v.ExitNotification={}));var Io;(function(i){i.type=new O.NotificationType("workspace/didChangeConfiguration")})(Io=v.DidChangeConfigurationNotification||(v.DidChangeConfigurationNotification={}));var Ho;(function(i){i.Error=1,i.Warning=2,i.Info=3,i.Log=4})(Ho=v.MessageType||(v.MessageType={}));var Ao;(function(i){i.type=new O.NotificationType("window/showMessage")})(Ao=v.ShowMessageNotification||(v.ShowMessageNotification={}));var zo;(function(i){i.type=new O.RequestType("window/showMessageRequest")})(zo=v.ShowMessageRequest||(v.ShowMessageRequest={}));var $o;(function(i){i.type=new O.NotificationType("window/logMessage")})($o=v.LogMessageNotification||(v.LogMessageNotification={}));var Bo;(function(i){i.type=new O.NotificationType("telemetry/event")})(Bo=v.TelemetryEventNotification||(v.TelemetryEventNotification={}));var Uo;(function(i){i.type=new O.NotificationType("textDocument/didOpen")})(Uo=v.DidOpenTextDocumentNotification||(v.DidOpenTextDocumentNotification={}));var Jo;(function(i){i.type=new O.NotificationType("textDocument/didChange")})(Jo=v.DidChangeTextDocumentNotification||(v.DidChangeTextDocumentNotification={}));var Qo;(function(i){i.type=new O.NotificationType("textDocument/didClose")})(Qo=v.DidCloseTextDocumentNotification||(v.DidCloseTextDocumentNotification={}));var Go;(function(i){i.type=new O.NotificationType("textDocument/didSave")})(Go=v.DidSaveTextDocumentNotification||(v.DidSaveTextDocumentNotification={}));var Xo;(function(i){i.type=new O.NotificationType("textDocument/willSave")})(Xo=v.WillSaveTextDocumentNotification||(v.WillSaveTextDocumentNotification={}));var Yo;(function(i){i.type=new O.RequestType("textDocument/willSaveWaitUntil")})(Yo=v.WillSaveTextDocumentWaitUntilRequest||(v.WillSaveTextDocumentWaitUntilRequest={}));var Zo;(function(i){i.type=new O.NotificationType("workspace/didChangeWatchedFiles")})(Zo=v.DidChangeWatchedFilesNotification||(v.DidChangeWatchedFilesNotification={}));var Ko;(function(i){i.Created=1,i.Changed=2,i.Deleted=3})(Ko=v.FileChangeType||(v.FileChangeType={}));var Vo;(function(i){i.Create=1,i.Change=2,i.Delete=4})(Vo=v.WatchKind||(v.WatchKind={}));var es;(function(i){i.type=new O.NotificationType("textDocument/publishDiagnostics")})(es=v.PublishDiagnosticsNotification||(v.PublishDiagnosticsNotification={}));var ts;(function(i){i.type=new O.RequestType("textDocument/completion")})(ts=v.CompletionRequest||(v.CompletionRequest={}));var is;(function(i){i.type=new O.RequestType("completionItem/resolve")})(is=v.CompletionResolveRequest||(v.CompletionResolveRequest={}));var ns;(function(i){i.type=new O.RequestType("textDocument/hover")})(ns=v.HoverRequest||(v.HoverRequest={}));var rs;(function(i){i.type=new O.RequestType("textDocument/signatureHelp")})(rs=v.SignatureHelpRequest||(v.SignatureHelpRequest={}));var os;(function(i){i.type=new O.RequestType("textDocument/definition")})(os=v.DefinitionRequest||(v.DefinitionRequest={}));var ss;(function(i){i.type=new O.RequestType("textDocument/references")})(ss=v.ReferencesRequest||(v.ReferencesRequest={}));var as;(function(i){i.type=new O.RequestType("textDocument/documentHighlight")})(as=v.DocumentHighlightRequest||(v.DocumentHighlightRequest={}));var us;(function(i){i.type=new O.RequestType("textDocument/documentSymbol")})(us=v.DocumentSymbolRequest||(v.DocumentSymbolRequest={}));var cs;(function(i){i.type=new O.RequestType("workspace/symbol")})(cs=v.WorkspaceSymbolRequest||(v.WorkspaceSymbolRequest={}));var ls;(function(i){i.type=new O.RequestType("textDocument/codeAction")})(ls=v.CodeActionRequest||(v.CodeActionRequest={}));var ds;(function(i){i.type=new O.RequestType("textDocument/codeLens")})(ds=v.CodeLensRequest||(v.CodeLensRequest={}));var fs;(function(i){i.type=new O.RequestType("codeLens/resolve")})(fs=v.CodeLensResolveRequest||(v.CodeLensResolveRequest={}));var hs;(function(i){i.type=new O.RequestType("textDocument/formatting")})(hs=v.DocumentFormattingRequest||(v.DocumentFormattingRequest={}));var ps;(function(i){i.type=new O.RequestType("textDocument/rangeFormatting")})(ps=v.DocumentRangeFormattingRequest||(v.DocumentRangeFormattingRequest={}));var gs;(function(i){i.type=new O.RequestType("textDocument/onTypeFormatting")})(gs=v.DocumentOnTypeFormattingRequest||(v.DocumentOnTypeFormattingRequest={}));var ms;(function(i){i.type=new O.RequestType("textDocument/rename")})(ms=v.RenameRequest||(v.RenameRequest={}));var vs;(function(i){i.type=new O.RequestType("textDocument/documentLink")})(vs=v.DocumentLinkRequest||(v.DocumentLinkRequest={}));var ys;(function(i){i.type=new O.RequestType("documentLink/resolve")})(ys=v.DocumentLinkResolveRequest||(v.DocumentLinkResolveRequest={}));var _s;(function(i){i.type=new O.RequestType("workspace/executeCommand")})(_s=v.ExecuteCommandRequest||(v.ExecuteCommandRequest={}));var Cs;(function(i){i.type=new O.RequestType("workspace/applyEdit")})(Cs=v.ApplyWorkspaceEditRequest||(v.ApplyWorkspaceEditRequest={}))});var Ui=A(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});var ws=Ke(),Rs;(function(i){i.type=new ws.RequestType("workspace/configuration")})(Rs=Pt.ConfigurationRequest||(Pt.ConfigurationRequest={}))});var Qi=A(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});var Ji=Ke(),Ts;(function(i){i.type=new Ji.RequestType0("workspace/workspaceFolders")})(Ts=Ve.WorkspaceFoldersRequest||(Ve.WorkspaceFoldersRequest={}));var Ds;(function(i){i.type=new Ji.NotificationType("workspace/didChangeWorkspaceFolders")})(Ds=Ve.DidChangeWorkspaceFoldersNotification||(Ve.DidChangeWorkspaceFoldersNotification={}))});var Xi=A(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});var Gi=Ke(),bs;(function(i){i.type=new Gi.RequestType("textDocument/documentColor")})(bs=et.DocumentColorRequest||(et.DocumentColorRequest={}));var Ss;(function(i){i.type=new Gi.RequestType("textDocument/colorPresentation")})(Ss=et.ColorPresentationRequest||(et.ColorPresentationRequest={}))});var He=A(j=>{"use strict";function Ki(i){for(var e in i)j.hasOwnProperty(e)||(j[e]=i[e])}Object.defineProperty(j,"__esModule",{value:!0});var B=Ke();j.ErrorCodes=B.ErrorCodes;j.ResponseError=B.ResponseError;j.CancellationToken=B.CancellationToken;j.CancellationTokenSource=B.CancellationTokenSource;j.Disposable=B.Disposable;j.Event=B.Event;j.Emitter=B.Emitter;j.Trace=B.Trace;j.SetTraceNotification=B.SetTraceNotification;j.LogTraceNotification=B.LogTraceNotification;j.RequestType=B.RequestType;j.RequestType0=B.RequestType0;j.NotificationType=B.NotificationType;j.NotificationType0=B.NotificationType0;j.MessageReader=B.MessageReader;j.MessageWriter=B.MessageWriter;j.ConnectionStrategy=B.ConnectionStrategy;j.StreamMessageReader=B.StreamMessageReader;j.StreamMessageWriter=B.StreamMessageWriter;j.IPCMessageReader=B.IPCMessageReader;j.IPCMessageWriter=B.IPCMessageWriter;j.createClientPipeTransport=B.createClientPipeTransport;j.createServerPipeTransport=B.createServerPipeTransport;j.generateRandomPipeName=B.generateRandomPipeName;j.createClientSocketTransport=B.createClientSocketTransport;j.createServerSocketTransport=B.createServerSocketTransport;Ki(Ii());Ki(Bi());var qs=Ui(),Yi=Qi(),Zi=Xi(),xs;(function(i){let e;(function(o){o.type=qs.ConfigurationRequest.type})(e=i.ConfigurationRequest||(i.ConfigurationRequest={}));let t;(function(o){o.type=Yi.WorkspaceFoldersRequest.type})(t=i.WorkspaceFoldersRequest||(i.WorkspaceFoldersRequest={}));let n;(function(o){o.type=Yi.DidChangeWorkspaceFoldersNotification.type})(n=i.DidChangeWorkspaceFoldersNotification||(i.DidChangeWorkspaceFoldersNotification={})),i.DocumentColorRequest=Zi.DocumentColorRequest,i.ColorPresentationRequest=Zi.ColorPresentationRequest})(xs=j.Proposed||(j.Proposed={}));function Ps(i,e,t,n){return B.createMessageConnection(i,e,t,n)}j.createProtocolConnection=Ps});var ft=A(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});var kt=Object.prototype.toString;function ks(i){return i===!0||i===!1}ye.boolean=ks;function Vi(i){return kt.call(i)==="[object String]"}ye.string=Vi;function Es(i){return kt.call(i)==="[object Number]"}ye.number=Es;function Os(i){return kt.call(i)==="[object Error]"}ye.error=Os;function en(i){return kt.call(i)==="[object Function]"}ye.func=en;function tn(i){return Array.isArray(i)}ye.array=tn;function Ns(i){return tn(i)&&i.every(e=>Vi(e))}ye.stringArray=Ns;function Ms(i,e){return Array.isArray(i)&&i.every(e)}ye.typedArray=Ms;function Fs(i){return i&&en(i.then)}ye.thenable=Fs});var Bt=A($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});var Ls=require("vscode"),nn=class extends Ls.CompletionItem{constructor(e){super(e)}};$t.default=nn});var Jt=A(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});var Ws=require("vscode"),rn=class extends Ws.CodeLens{constructor(e){super(e)}};Ut.default=rn});var on=A(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});var Se=require("vscode"),re=He(),Qt=ft(),js=Bt(),Is=Jt();function Hs(i){let t=i||(s=>s.toString());function n(s){return t(s)}function o(s){return{uri:t(s.uri)}}function a(s){return{uri:t(s.uri),version:s.version}}function c(s){return{textDocument:{uri:t(s.uri),languageId:s.languageId,version:s.version,text:s.getText()}}}function u(s){let r=s;return!!r.document&&!!r.contentChanges}function l(s){let r=s;return!!r.uri&&!!r.version}function m(s){if(l(s))return{textDocument:{uri:t(s.uri),version:s.version},contentChanges:[{text:s.getText()}]};if(u(s)){let r=s.document;return{textDocument:{uri:t(r.uri),version:r.version},contentChanges:s.contentChanges.map(p=>{let f=p.range;return{range:{start:{line:f.start.line,character:f.start.character},end:{line:f.end.line,character:f.end.character}},rangeLength:p.rangeLength,text:p.text}})}}else throw Error("Unsupported text document change parameter")}function _(s){return{textDocument:o(s)}}function L(s,r=!1){let h={textDocument:a(s)};return r&&(h.text=s.getText()),h}function z(s){switch(s){case Se.TextDocumentSaveReason.Manual:return re.TextDocumentSaveReason.Manual;case Se.TextDocumentSaveReason.AfterDelay:return re.TextDocumentSaveReason.AfterDelay;case Se.TextDocumentSaveReason.FocusOut:return re.TextDocumentSaveReason.FocusOut}return re.TextDocumentSaveReason.Manual}function I(s){return{textDocument:o(s.document),reason:z(s.reason)}}function P(s,r){return{textDocument:o(s),position:D(r)}}function D(s){return{line:s.line,character:s.character}}function w(s){if(s!==void 0)return s===null?null:{line:s.line,character:s.character}}function x(s){return s==null?s:{start:w(s.start),end:w(s.end)}}function M(s){switch(s){case Se.DiagnosticSeverity.Error:return re.DiagnosticSeverity.Error;case Se.DiagnosticSeverity.Warning:return re.DiagnosticSeverity.Warning;case Se.DiagnosticSeverity.Information:return re.DiagnosticSeverity.Information;case Se.DiagnosticSeverity.Hint:return re.DiagnosticSeverity.Hint}}function fe(s){let r=re.Diagnostic.create(x(s.range),s.message);return s.severity&&(r.severity=M(s.severity)),(Qt.number(s.code)||Qt.string(s.code))&&(r.code=s.code),s.source&&(r.source=s.source),r}function Pe(s){return s==null?s:s.map(fe)}function he(s){let r={label:s.label};return s.detail&&(r.detail=s.detail),s.documentation&&(r.documentation=s.documentation),s.filterText&&(r.filterText=s.filterText),Ne(r,s),Qt.number(s.kind)&&(Se.CompletionItemKind.Text<=s.kind&&s.kind<=Se.CompletionItemKind.Reference?r.kind=s.kind+1:r.kind=re.CompletionItemKind.Text),s.sortText&&(r.sortText=s.sortText),s.additionalTextEdits&&(r.additionalTextEdits=Me(s.additionalTextEdits)),s.commitCharacters&&(r.commitCharacters=s.commitCharacters.slice()),s.command&&(r.command=_e(s.command)),s instanceof js.default&&s.data&&(r.data=s.data),r}function Ne(s,r){let h=re.InsertTextFormat.PlainText,p,f;r.textEdit?(p=r.textEdit.newText,f=x(r.textEdit.range)):r.insertText instanceof Se.SnippetString?(h=re.InsertTextFormat.Snippet,p=r.insertText.value):p=r.insertText,r.range&&(f=x(r.range)),s.insertTextFormat=h,r.fromEdit&&p&&f?s.textEdit={newText:p,range:f}:s.insertText=p}function ke(s){return{range:x(s.range),newText:s.newText}}function Me(s){return s==null?s:s.map(ke)}function Fe(s,r,h){return{textDocument:o(s),position:D(r),context:{includeDeclaration:h.includeDeclaration}}}function ze(s){return s==null?s:re.CodeActionContext.create(Pe(s.diagnostics))}function _e(s){let r=re.Command.create(s.title,s.command);return s.arguments&&(r.arguments=s.arguments),r}function pe(s){let r=re.CodeLens.create(x(s.range));return s.command&&(r.command=_e(s.command)),s instanceof Is.default&&s.data&&(r.data=s.data),r}function Ce(s){return{tabSize:s.tabSize,insertSpaces:s.insertSpaces}}function ue(s){return{textDocument:o(s)}}function Le(s){return{textDocument:o(s)}}function $e(s){let r=re.DocumentLink.create(x(s.range));return s.target&&(r.target=n(s.target)),r}function C(s){return{textDocument:o(s)}}return{asUri:n,asTextDocumentIdentifier:o,asOpenTextDocumentParams:c,asChangeTextDocumentParams:m,asCloseTextDocumentParams:_,asSaveTextDocumentParams:L,asWillSaveTextDocumentParams:I,asTextDocumentPositionParams:P,asWorkerPosition:D,asRange:x,asPosition:w,asDiagnosticSeverity:M,asDiagnostic:fe,asDiagnostics:Pe,asCompletionItem:he,asTextEdit:ke,asReferenceParams:Fe,asCodeActionContext:ze,asCommand:_e,asCodeLens:pe,asFormattingOptions:Ce,asDocumentSymbolParams:ue,asCodeLensParams:Le,asDocumentLink:$e,asDocumentLinkParams:C}}Gt.createConverter=Hs});var sn=A(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});var U=require("vscode"),Oe=He(),Ae=ft(),As=Bt(),zs=Jt();function $s(i){let t=i||(r=>U.Uri.parse(r));function n(r){return t(r)}function o(r){return r.map(a)}function a(r){let h=new U.Diagnostic(u(r.range),r.message,l(r.severity));return(Ae.number(r.code)||Ae.string(r.code))&&(h.code=r.code),r.source&&(h.source=r.source),h}function c(r){if(!!r)return new U.Position(r.line,r.character)}function u(r){if(!!r)return new U.Range(c(r.start),c(r.end))}function l(r){if(r==null)return U.DiagnosticSeverity.Error;switch(r){case Oe.DiagnosticSeverity.Error:return U.DiagnosticSeverity.Error;case Oe.DiagnosticSeverity.Warning:return U.DiagnosticSeverity.Warning;case Oe.DiagnosticSeverity.Information:return U.DiagnosticSeverity.Information;case Oe.DiagnosticSeverity.Hint:return U.DiagnosticSeverity.Hint}return U.DiagnosticSeverity.Error}function m(r){if(!!r)return new U.Hover(r.contents,u(r.range))}function _(r){if(!r)return;if(Array.isArray(r))return r.map(L);let h=r;return new U.CompletionList(h.items.map(L),h.isIncomplete)}function L(r){let h=new As.default(r.label);r.detail&&(h.detail=r.detail),r.documentation&&(h.documentation=r.documentation),r.filterText&&(h.filterText=r.filterText);let p=z(r);return p&&(h.insertText=p.text,h.range=p.range,h.fromEdit=p.fromEdit),Ae.number(r.kind)&&r.kind>0&&(h.kind=r.kind-1),r.sortText&&(h.sortText=r.sortText),r.additionalTextEdits&&(h.additionalTextEdits=P(r.additionalTextEdits)),Ae.stringArray(r.commitCharacters)&&(h.commitCharacters=r.commitCharacters.slice()),r.command&&(h.command=pe(r.command)),r.data!==void 0&&r.data!==null&&(h.data=r.data),h}function z(r){return r.textEdit?r.insertTextFormat===Oe.InsertTextFormat.Snippet?{text:new U.SnippetString(r.textEdit.newText),range:u(r.textEdit.range),fromEdit:!0}:{text:r.textEdit.newText,range:u(r.textEdit.range),fromEdit:!0}:r.insertText?r.insertTextFormat===Oe.InsertTextFormat.Snippet?{text:new U.SnippetString(r.insertText),fromEdit:!1}:{text:r.insertText,fromEdit:!1}:void 0}function I(r){if(!!r)return new U.TextEdit(u(r.range),r.newText)}function P(r){if(!!r)return r.map(I)}function D(r){if(!r)return;let h=new U.SignatureHelp;return Ae.number(r.activeSignature)?h.activeSignature=r.activeSignature:h.activeSignature=0,Ae.number(r.activeParameter)?h.activeParameter=r.activeParameter:h.activeParameter=0,r.signatures&&(h.signatures=w(r.signatures)),h}function w(r){return r.map(x)}function x(r){let h=new U.SignatureInformation(r.label);return r.documentation&&(h.documentation=r.documentation),r.parameters&&(h.parameters=M(r.parameters)),h}function M(r){return r.map(fe)}function fe(r){let h=new U.ParameterInformation(r.label);return r.documentation&&(h.documentation=r.documentation),h}function Pe(r){if(!!r)return Ae.array(r)?r.map(h=>he(h)):he(r)}function he(r){if(!!r)return new U.Location(t(r.uri),u(r.range))}function Ne(r){if(!!r)return r.map(h=>he(h))}function ke(r){if(!!r)return r.map(Me)}function Me(r){let h=new U.DocumentHighlight(u(r.range));return Ae.number(r.kind)&&(h.kind=Fe(r.kind)),h}function Fe(r){switch(r){case Oe.DocumentHighlightKind.Text:return U.DocumentHighlightKind.Text;case Oe.DocumentHighlightKind.Read:return U.DocumentHighlightKind.Read;case Oe.DocumentHighlightKind.Write:return U.DocumentHighlightKind.Write}return U.DocumentHighlightKind.Text}function ze(r,h){if(!!r)return r.map(p=>_e(p,h))}function _e(r,h){let p=new U.SymbolInformation(r.name,r.kind-1,u(r.location.range),r.location.uri?t(r.location.uri):h);return r.containerName&&(p.containerName=r.containerName),p}function pe(r){let h={title:r.title,command:r.command};return r.arguments&&(h.arguments=r.arguments),h}function Ce(r){if(!!r)return r.map(pe)}function ue(r){if(!r)return;let h=new zs.default(u(r.range));return r.command&&(h.command=pe(r.command)),r.data!==void 0&&r.data!==null&&(h.data=r.data),h}function Le(r){if(!!r)return r.map(h=>ue(h))}function $e(r){if(!r)return;let h=new U.WorkspaceEdit;return r.documentChanges?r.documentChanges.forEach(p=>{h.set(t(p.textDocument.uri),P(p.edits))}):r.changes&&Object.keys(r.changes).forEach(p=>{h.set(t(p),P(r.changes[p]))}),h}function C(r){let h=u(r.range),p=r.target?n(r.target):void 0;return new U.DocumentLink(h,p)}function s(r){if(!!r)return r.map(C)}return{asUri:n,asDiagnostics:o,asDiagnostic:a,asRange:u,asPosition:c,asDiagnosticSeverity:l,asHover:m,asCompletionResult:_,asCompletionItem:L,asTextEdit:I,asTextEdits:P,asSignatureHelp:D,asSignatureInformations:w,asSignatureInformation:x,asParameterInformations:M,asParameterInformation:fe,asDefinitionResult:Pe,asLocation:he,asReferences:Ne,asDocumentHighlights:ke,asDocumentHighlight:Me,asDocumentHighlightKind:Fe,asSymbolInformations:ze,asSymbolInformation:_e,asCommand:pe,asCommands:Ce,asCodeLens:ue,asCodeLenses:Le,asWorkspaceEdit:$e,asDocumentLink:C,asDocumentLinks:s}}Xt.createConverter=$s});var un=A(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});var an=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(t>=0||this.timeout===void 0)&&(this.timeout=setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},t>=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}};Yt.Delayer=an});var dn=A(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});var Et=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},N=class extends Et{constructor(){super([N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),"-",N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),"-","4",N._randomHex(),N._randomHex(),N._randomHex(),"-",N._oneOf(N._timeHighBits),N._randomHex(),N._randomHex(),N._randomHex(),"-",N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex(),N._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return N._oneOf(N._chars)}};N._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];N._timeHighBits=["8","9","a","b"];Qe.empty=new Et("00000000-0000-0000-0000-000000000000");function cn(){return new N}Qe.v4=cn;var Bs=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function ln(i){return Bs.test(i)}Qe.isUUID=ln;function Us(i){if(!ln(i))throw new Error("invalid uuid");return new Et(i)}Qe.parse=Us;function Js(){return cn().asHex()}Qe.generateUuid=Js});var ei=A(ee=>{"use strict";function Qs(i){for(var e in i)ee.hasOwnProperty(e)||(ee[e]=i[e])}Object.defineProperty(ee,"__esModule",{value:!0});var b=require("vscode"),g=He(),Gs=on(),Xs=sn(),V=ft(),fn=un(),J=dn();Qs(He());var hn=class{error(e){console.error(e)}warn(e){console.warn(e)}info(e){console.info(e)}log(e){console.log(e)}};function Ys(i,e,t,n){let o=new hn,a=g.createProtocolConnection(i,e,o);return a.onError(u=>{t(u[0],u[1],u[2])}),a.onClose(n),{listen:()=>a.listen(),sendRequest:(u,...l)=>a.sendRequest(V.string(u)?u:u.method,...l),onRequest:(u,l)=>a.onRequest(V.string(u)?u:u.method,l),sendNotification:(u,l)=>a.sendNotification(V.string(u)?u:u.method,l),onNotification:(u,l)=>a.onNotification(V.string(u)?u:u.method,l),trace:(u,l,m=!1)=>a.trace(u,l,m),initialize:u=>a.sendRequest(g.InitializeRequest.type,u),shutdown:()=>a.sendRequest(g.ShutdownRequest.type,void 0),exit:()=>a.sendNotification(g.ExitNotification.type),onLogMessage:u=>a.onNotification(g.LogMessageNotification.type,u),onShowMessage:u=>a.onNotification(g.ShowMessageNotification.type,u),onTelemetry:u=>a.onNotification(g.TelemetryEventNotification.type,u),didChangeConfiguration:u=>a.sendNotification(g.DidChangeConfigurationNotification.type,u),didChangeWatchedFiles:u=>a.sendNotification(g.DidChangeWatchedFilesNotification.type,u),didOpenTextDocument:u=>a.sendNotification(g.DidOpenTextDocumentNotification.type,u),didChangeTextDocument:u=>a.sendNotification(g.DidChangeTextDocumentNotification.type,u),didCloseTextDocument:u=>a.sendNotification(g.DidCloseTextDocumentNotification.type,u),didSaveTextDocument:u=>a.sendNotification(g.DidSaveTextDocumentNotification.type,u),onDiagnostics:u=>a.onNotification(g.PublishDiagnosticsNotification.type,u),dispose:()=>a.dispose()}}var Zs;(function(i){i[i.stdio=0]="stdio",i[i.ipc=1]="ipc",i[i.pipe=2]="pipe"})(Zs=ee.TransportKind||(ee.TransportKind={}));var Ot;(function(i){i[i.Continue=1]="Continue",i[i.Shutdown=2]="Shutdown"})(Ot=ee.ErrorAction||(ee.ErrorAction={}));var tt;(function(i){i[i.DoNotRestart=1]="DoNotRestart",i[i.Restart=2]="Restart"})(tt=ee.CloseAction||(ee.CloseAction={}));var Zt=class{constructor(e){this.name=e,this.restarts=[]}error(e,t,n){return n&&n<=3?Ot.Continue:Ot.Shutdown}closed(){return this.restarts.push(Date.now()),this.restarts.length<5?tt.Restart:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?(b.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`),tt.DoNotRestart):(this.restarts.shift(),tt.Restart)}},ht;(function(i){i[i.Info=1]="Info",i[i.Warn=2]="Warn",i[i.Error=3]="Error",i[i.Never=4]="Never"})(ht=ee.RevealOutputChannelOn||(ee.RevealOutputChannelOn={}));var Kt;(function(i){i[i.Stopped=1]="Stopped",i[i.Running=2]="Running"})(Kt=ee.State||(ee.State={}));var Y;(function(i){i[i.Initial=0]="Initial",i[i.Starting=1]="Starting",i[i.StartFailed=2]="StartFailed",i[i.Running=3]="Running",i[i.Stopping=4]="Stopping",i[i.Stopped=5]="Stopped"})(Y||(Y={}));var Vt;(function(i){function e(t){let n=t;return n&&V.func(n.register)&&V.func(n.unregister)&&V.func(n.dispose)&&n.messages!==void 0}i.is=e})(Vt||(Vt={}));function q(i,e){return i[e]===void 0&&(i[e]={}),i[e]}var qe=class{constructor(e,t,n,o,a,c){this._client=e,this._event=t,this._type=n,this._middleware=o,this._createParams=a,this._selectorFilter=c,this._selectors=new Map}static textDocumentFilter(e,t){for(let n of e)if(b.languages.match(n,t))return!0;return!1}register(e,t){!t.registerOptions.documentSelector||(this._listener||(this._listener=this._event(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))&&(this._middleware?this._middleware(e,t=>this._client.sendNotification(this._type,this._createParams(t))):this._client.sendNotification(this._type,this._createParams(e)),this.notificationSent(e))}notificationSent(e){}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._listener&&this._listener.dispose()}},pn=class extends qe{constructor(e,t){super(e,b.workspace.onDidOpenTextDocument,g.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),qe.textDocumentFilter);this._syncedDocuments=t}get messages(){return g.DidOpenTextDocumentNotification.type}fillClientCapabilities(e){q(q(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:J.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){if(super.register(e,t),!t.registerOptions.documentSelector)return;let n=t.registerOptions.documentSelector;b.workspace.textDocuments.forEach(o=>{let a=o.uri.toString();if(!this._syncedDocuments.has(a)&&b.languages.match(n,o)){let c=this._client.clientOptions.middleware,u=l=>{this._client.sendNotification(this._type,this._createParams(l))};c.didOpen?c.didOpen(o,u):u(o),this._syncedDocuments.set(a,o)}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.set(e.uri.toString(),e)}},gn=class extends qe{constructor(e,t){super(e,b.workspace.onDidCloseTextDocument,g.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,n=>e.code2ProtocolConverter.asCloseTextDocumentParams(n),qe.textDocumentFilter);this._syncedDocuments=t}get messages(){return g.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){q(q(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.openClose&&this.register(this.messages,{id:J.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e){super.notificationSent(e),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(o=>{if(b.languages.match(t,o)&&!this._selectorFilter(n,o)){let a=this._client.clientOptions.middleware,c=u=>{this._client.sendNotification(this._type,this._createParams(u))};this._syncedDocuments.delete(o.uri.toString()),a.didClose?a.didClose(o,c):c(o)}})}},mn=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1}get messages(){return g.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){q(q(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.change!==void 0&&n.change!==g.TextDocumentSyncKind.None&&this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}register(e,t){!t.registerOptions.documentSelector||(this._listener||(this._listener=b.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{documentSelector:t.registerOptions.documentSelector,syncKind:t.registerOptions.syncKind}))}callback(e){for(let t of this._changeData.values())if(b.languages.match(t.documentSelector,e.document)){let n=this._client.clientOptions.middleware;if(t.syncKind===g.TextDocumentSyncKind.Incremental){let o=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);n.didChange?n.didChange(e,()=>this._client.sendNotification(g.DidChangeTextDocumentNotification.type,o)):this._client.sendNotification(g.DidChangeTextDocumentNotification.type,o)}else if(t.syncKind===g.TextDocumentSyncKind.Full){let o=a=>{this._changeDelayer?(this._changeDelayer.uri!==a.document.uri.toString()&&(this.forceDelivery(),this._changeDelayer.uri=a.document.uri.toString()),this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(g.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(a.document))})):(this._changeDelayer={uri:a.document.uri.toString(),delayer:new fn.Delayer(200)},this._changeDelayer.delayer.trigger(()=>{this._client.sendNotification(g.DidChangeTextDocumentNotification.type,this._client.code2ProtocolConverter.asChangeTextDocumentParams(a.document))},-1))};n.didChange?n.didChange(e,o):o(e)}}}unregister(e){this._changeData.delete(e),this._changeData.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._listener&&(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}},vn=class extends qe{constructor(e){super(e,b.workspace.onWillSaveTextDocument,g.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(t,n)=>qe.textDocumentFilter(t,n.document))}get messages(){return g.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=q(q(e,"textDocument"),"synchronization");t.willSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSave&&this.register(this.messages,{id:J.generateUuid(),registerOptions:{documentSelector:t}})}},yn=class{constructor(e){this._client=e,this._selectors=new Map}get messages(){return g.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=q(q(e,"textDocument"),"synchronization");t.willSaveWaitUntil=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.willSaveWaitUntil&&this.register(this.messages,{id:J.generateUuid(),registerOptions:{documentSelector:t}})}register(e,t){!t.registerOptions.documentSelector||(this._listener||(this._listener=b.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,t.registerOptions.documentSelector))}callback(e){if(qe.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,n=o=>this._client.sendRequest(g.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(o)).then(a=>this._client.protocol2CodeConverter.asTextEdits(a));e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._listener&&(this._listener.dispose(),this._listener=void 0)}},_n=class extends qe{constructor(e){super(e,b.workspace.onDidSaveTextDocument,g.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),qe.textDocumentFilter)}get messages(){return g.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){q(q(e,"textDocument"),"synchronization").didSave=!0}initialize(e,t){let n=e.resolvedTextDocumentSync;t&&n&&n.save&&this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{includeText:!!n.save.includeText})})}register(e,t){this._includeText=!!t.registerOptions.includeText,super.register(e,t)}},Cn=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get messages(){return g.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){q(q(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0}initialize(e,t){}register(e,t){if(!Array.isArray(t.registerOptions.watchers))return;let n=[];for(let o of t.registerOptions.watchers){if(!V.string(o.globPattern))continue;let a=!0,c=!0,u=!0;o.kind!==void 0&&o.kind!==null&&(a=(o.kind&g.WatchKind.Create)!==0,c=(o.kind&g.WatchKind.Change)!=0,u=(o.kind&g.WatchKind.Delete)!=0);let l=b.workspace.createFileSystemWatcher(o.globPattern,!a,!c,!u);this.hookListeners(l,a,c,u),n.push(l)}this._watchers.set(t.id,n)}registerRaw(e,t){let n=[];for(let o of t)this.hookListeners(o,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,t,n,o,a){t&&e.onDidCreate(c=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(c),type:g.FileChangeType.Created}),null,a),n&&e.onDidChange(c=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(c),type:g.FileChangeType.Changed}),null,a),o&&e.onDidDelete(c=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(c),type:g.FileChangeType.Deleted}),null,a)}unregister(e){let t=this._watchers.get(e);if(t)for(let n of t)n.dispose()}dispose(){this._watchers.forEach(e=>{for(let t of e)t.dispose()})}},ae=class{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);if(!t.registerOptions.documentSelector)return;let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()})}},wn=class{constructor(e,t){this._client=e,this._message=t,this._providers=new Map}get messages(){return this._message}register(e,t){if(e.method!==this.messages.method)throw new Error(`Register called on wron feature. Requested ${e.method} but reached feature ${this.messages.method}`);let n=this.registerLanguageProvider(t.registerOptions);n&&this._providers.set(t.id,n)}unregister(e){let t=this._providers.get(e);t&&t.dispose()}dispose(){this._providers.forEach(e=>{e.dispose()})}},Rn=class extends ae{constructor(e){super(e,g.CompletionRequest.type)}fillClientCapabilities(e){let t=q(q(e,"textDocument"),"completion");t.dynamicRegistration=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0}}initialize(e,t){!e.completionProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.completionProvider)})}registerLanguageProvider(e){let t=e.triggerCharacters||[],n=this._client,o=(u,l,m)=>n.sendRequest(g.CompletionRequest.type,n.code2ProtocolConverter.asTextDocumentPositionParams(u,l),m).then(n.protocol2CodeConverter.asCompletionResult,_=>(n.logFailedRequest(g.CompletionRequest.type,_),Promise.resolve([]))),a=(u,l)=>n.sendRequest(g.CompletionResolveRequest.type,n.code2ProtocolConverter.asCompletionItem(u),l).then(n.protocol2CodeConverter.asCompletionItem,m=>(n.logFailedRequest(g.CompletionResolveRequest.type,m),Promise.resolve(u))),c=this._client.clientOptions.middleware;return b.languages.registerCompletionItemProvider(e.documentSelector,{provideCompletionItems:(u,l,m)=>c.provideCompletionItem?c.provideCompletionItem(u,l,m,o):o(u,l,m),resolveCompletionItem:e.resolveProvider?(u,l)=>c.resolveCompletionItem?c.resolveCompletionItem(u,l,a):a(u,l):void 0},...t)}},Tn=class extends ae{constructor(e){super(e,g.HoverRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"hover").dynamicRegistration=!0}initialize(e,t){!e.hoverProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(a,c,u)=>t.sendRequest(g.HoverRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(a,c),u).then(t.protocol2CodeConverter.asHover,l=>(t.logFailedRequest(g.HoverRequest.type,l),Promise.resolve(null))),o=t.clientOptions.middleware;return b.languages.registerHoverProvider(e.documentSelector,{provideHover:(a,c,u)=>o.provideHover?o.provideHover(a,c,u,n):n(a,c,u)})}},Dn=class extends ae{constructor(e){super(e,g.SignatureHelpRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"signatureHelp").dynamicRegistration=!0}initialize(e,t){!e.signatureHelpProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.signatureHelpProvider)})}registerLanguageProvider(e){let t=this._client,n=(c,u,l)=>t.sendRequest(g.SignatureHelpRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(c,u),l).then(t.protocol2CodeConverter.asSignatureHelp,m=>(t.logFailedRequest(g.SignatureHelpRequest.type,m),Promise.resolve(null))),o=t.clientOptions.middleware,a=e.triggerCharacters||[];return b.languages.registerSignatureHelpProvider(e.documentSelector,{provideSignatureHelp:(c,u,l)=>o.provideSignatureHelp?o.provideSignatureHelp(c,u,l,n):n(c,u,l)},...a)}},bn=class extends ae{constructor(e){super(e,g.DefinitionRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"definition").dynamicRegistration=!0}initialize(e,t){!e.definitionProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(a,c,u)=>t.sendRequest(g.DefinitionRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(a,c),u).then(t.protocol2CodeConverter.asDefinitionResult,l=>(t.logFailedRequest(g.DefinitionRequest.type,l),Promise.resolve(null))),o=t.clientOptions.middleware;return b.languages.registerDefinitionProvider(e.documentSelector,{provideDefinition:(a,c,u)=>o.provideDefinition?o.provideDefinition(a,c,u,n):n(a,c,u)})}},Sn=class extends ae{constructor(e){super(e,g.ReferencesRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,t){!e.referencesProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(a,c,u,l)=>t.sendRequest(g.ReferencesRequest.type,t.code2ProtocolConverter.asReferenceParams(a,c,u),l).then(t.protocol2CodeConverter.asReferences,m=>(t.logFailedRequest(g.ReferencesRequest.type,m),Promise.resolve([]))),o=t.clientOptions.middleware;return b.languages.registerReferenceProvider(e.documentSelector,{provideReferences:(a,c,u,l)=>o.provideReferences?o.provideReferences(a,c,u,l,n):n(a,c,u,l)})}},qn=class extends ae{constructor(e){super(e,g.DocumentHighlightRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,t){!e.documentHighlightProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(a,c,u)=>t.sendRequest(g.DocumentHighlightRequest.type,t.code2ProtocolConverter.asTextDocumentPositionParams(a,c),u).then(t.protocol2CodeConverter.asDocumentHighlights,l=>(t.logFailedRequest(g.DocumentHighlightRequest.type,l),Promise.resolve([]))),o=t.clientOptions.middleware;return b.languages.registerDocumentHighlightProvider(e.documentSelector,{provideDocumentHighlights:(a,c,u)=>o.provideDocumentHighlights?o.provideDocumentHighlights(a,c,u,n):n(a,c,u)})}},xn=class extends ae{constructor(e){super(e,g.DocumentSymbolRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"documentSymbol").dynamicRegistration=!0}initialize(e,t){!e.documentSymbolProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(a,c)=>t.sendRequest(g.DocumentSymbolRequest.type,t.code2ProtocolConverter.asDocumentSymbolParams(a),c).then(t.protocol2CodeConverter.asSymbolInformations,u=>(t.logFailedRequest(g.DocumentSymbolRequest.type,u),Promise.resolve([]))),o=t.clientOptions.middleware;return b.languages.registerDocumentSymbolProvider(e.documentSelector,{provideDocumentSymbols:(a,c)=>o.provideDocumentSymbols?o.provideDocumentSymbols(a,c,n):n(a,c)})}},Pn=class extends wn{constructor(e){super(e,g.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){q(q(e,"workspace"),"symbol").dynamicRegistration=!0}initialize(e){!e.workspaceSymbolProvider||this.register(this.messages,{id:J.generateUuid(),registerOptions:void 0})}registerLanguageProvider(e){let t=this._client,n=(a,c)=>t.sendRequest(g.WorkspaceSymbolRequest.type,{query:a},c).then(t.protocol2CodeConverter.asSymbolInformations,u=>(t.logFailedRequest(g.WorkspaceSymbolRequest.type,u),Promise.resolve([]))),o=t.clientOptions.middleware;return b.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:(a,c)=>o.provideWorkspaceSymbols?o.provideWorkspaceSymbols(a,c,n):n(a,c)})}},kn=class extends ae{constructor(e){super(e,g.CodeActionRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"codeAction").dynamicRegistration=!0}initialize(e,t){!e.codeActionProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(a,c,u,l)=>{let m={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(a),range:t.code2ProtocolConverter.asRange(c),context:t.code2ProtocolConverter.asCodeActionContext(u)};return t.sendRequest(g.CodeActionRequest.type,m,l).then(t.protocol2CodeConverter.asCommands,_=>(t.logFailedRequest(g.CodeActionRequest.type,_),Promise.resolve([])))},o=t.clientOptions.middleware;return b.languages.registerCodeActionsProvider(e.documentSelector,{provideCodeActions:(a,c,u,l)=>o.provideCodeActions?o.provideCodeActions(a,c,u,l,n):n(a,c,u,l)})}},En=class extends ae{constructor(e){super(e,g.CodeLensRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"codeLens").dynamicRegistration=!0}initialize(e,t){!e.codeLensProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.codeLensProvider)})}registerLanguageProvider(e){let t=this._client,n=(c,u)=>t.sendRequest(g.CodeLensRequest.type,t.code2ProtocolConverter.asCodeLensParams(c),u).then(t.protocol2CodeConverter.asCodeLenses,l=>(t.logFailedRequest(g.CodeLensRequest.type,l),Promise.resolve([]))),o=(c,u)=>t.sendRequest(g.CodeLensResolveRequest.type,t.code2ProtocolConverter.asCodeLens(c),u).then(t.protocol2CodeConverter.asCodeLens,l=>(t.logFailedRequest(g.CodeLensResolveRequest.type,l),c)),a=t.clientOptions.middleware;return b.languages.registerCodeLensProvider(e.documentSelector,{provideCodeLenses:(c,u)=>a.provideCodeLenses?a.provideCodeLenses(c,u,n):n(c,u),resolveCodeLens:e.resolveProvider?(c,u)=>a.resolveCodeLens?a.resolveCodeLens(c,u,o):o(c,u):void 0})}},On=class extends ae{constructor(e){super(e,g.DocumentFormattingRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,t){!e.documentFormattingProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(a,c,u)=>{let l={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(a),options:t.code2ProtocolConverter.asFormattingOptions(c)};return t.sendRequest(g.DocumentFormattingRequest.type,l,u).then(t.protocol2CodeConverter.asTextEdits,m=>(t.logFailedRequest(g.DocumentFormattingRequest.type,m),Promise.resolve([])))},o=t.clientOptions.middleware;return b.languages.registerDocumentFormattingEditProvider(e.documentSelector,{provideDocumentFormattingEdits:(a,c,u)=>o.provideDocumentFormattingEdits?o.provideDocumentFormattingEdits(a,c,u,n):n(a,c,u)})}},Nn=class extends ae{constructor(e){super(e,g.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(e,t){!e.documentRangeFormattingProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(a,c,u,l)=>{let m={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(a),range:t.code2ProtocolConverter.asRange(c),options:t.code2ProtocolConverter.asFormattingOptions(u)};return t.sendRequest(g.DocumentRangeFormattingRequest.type,m,l).then(t.protocol2CodeConverter.asTextEdits,_=>(t.logFailedRequest(g.DocumentRangeFormattingRequest.type,_),Promise.resolve([])))},o=t.clientOptions.middleware;return b.languages.registerDocumentRangeFormattingEditProvider(e.documentSelector,{provideDocumentRangeFormattingEdits:(a,c,u,l)=>o.provideDocumentRangeFormattingEdits?o.provideDocumentRangeFormattingEdits(a,c,u,l,n):n(a,c,u,l)})}},Mn=class extends ae{constructor(e){super(e,g.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,t){!e.documentOnTypeFormattingProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentOnTypeFormattingProvider)})}registerLanguageProvider(e){let t=this._client,n=e.moreTriggerCharacter||[],o=(c,u,l,m,_)=>{let L={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(c),position:t.code2ProtocolConverter.asPosition(u),ch:l,options:t.code2ProtocolConverter.asFormattingOptions(m)};return t.sendRequest(g.DocumentOnTypeFormattingRequest.type,L,_).then(t.protocol2CodeConverter.asTextEdits,z=>(t.logFailedRequest(g.DocumentOnTypeFormattingRequest.type,z),Promise.resolve([])))},a=t.clientOptions.middleware;return b.languages.registerOnTypeFormattingEditProvider(e.documentSelector,{provideOnTypeFormattingEdits:(c,u,l,m,_)=>a.provideOnTypeFormattingEdits?a.provideOnTypeFormattingEdits(c,u,l,m,_,o):o(c,u,l,m,_)},e.firstTriggerCharacter,...n)}},Fn=class extends ae{constructor(e){super(e,g.RenameRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"rename").dynamicRegistration=!0}initialize(e,t){!e.renameProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t})})}registerLanguageProvider(e){let t=this._client,n=(a,c,u,l)=>{let m={textDocument:t.code2ProtocolConverter.asTextDocumentIdentifier(a),position:t.code2ProtocolConverter.asPosition(c),newName:u};return t.sendRequest(g.RenameRequest.type,m,l).then(t.protocol2CodeConverter.asWorkspaceEdit,_=>{t.logFailedRequest(g.RenameRequest.type,_),Promise.reject(new Error(_.message))})},o=t.clientOptions.middleware;return b.languages.registerRenameProvider(e.documentSelector,{provideRenameEdits:(a,c,u,l)=>o.provideRenameEdits?o.provideRenameEdits(a,c,u,l,n):n(a,c,u,l)})}},Ln=class extends ae{constructor(e){super(e,g.DocumentLinkRequest.type)}fillClientCapabilities(e){q(q(e,"textDocument"),"documentLink").dynamicRegistration=!0}initialize(e,t){!e.documentLinkProvider||!t||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e.documentLinkProvider)})}registerLanguageProvider(e){let t=this._client,n=(c,u)=>t.sendRequest(g.DocumentLinkRequest.type,t.code2ProtocolConverter.asDocumentLinkParams(c),u).then(t.protocol2CodeConverter.asDocumentLinks,l=>{t.logFailedRequest(g.DocumentLinkRequest.type,l),Promise.resolve(new Error(l.message))}),o=(c,u)=>t.sendRequest(g.DocumentLinkResolveRequest.type,t.code2ProtocolConverter.asDocumentLink(c),u).then(t.protocol2CodeConverter.asDocumentLink,l=>{t.logFailedRequest(g.DocumentLinkResolveRequest.type,l),Promise.resolve(new Error(l.message))}),a=t.clientOptions.middleware;return b.languages.registerDocumentLinkProvider(e.documentSelector,{provideDocumentLinks:(c,u)=>a.provideDocumentLinks?a.provideDocumentLinks(c,u,n):n(c,u),resolveDocumentLink:e.resolveProvider?(c,u)=>a.resolveDocumentLink?a.resolveDocumentLink(c,u,o):o(c,u):void 0})}},Wn=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return g.DidChangeConfigurationNotification.type}fillClientCapabilities(e){q(q(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&&this.register(this.messages,{id:J.generateUuid(),registerOptions:{section:e}})}register(e,t){let n=b.workspace.onDidChangeConfiguration(()=>{this.onDidChangeConfiguration(t.registerOptions.section)});this._listeners.set(t.id,n),t.registerOptions.section!==void 0&&this.onDidChangeConfiguration(t.registerOptions.section)}unregister(e){let t=this._listeners.get(e);t&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose()}onDidChangeConfiguration(e){let t;V.string(e)?t=[e]:t=e;let n=a=>{if(a===void 0){this._client.sendNotification(g.DidChangeConfigurationNotification.type,{settings:null});return}this._client.sendNotification(g.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(a)})},o=this.getMiddleware();o?o(t,n):n(t)}extractSettingsInformation(e){function t(a,c){let u=a;for(let l=0;l<c.length-1;l++){let m=u[c[l]];m||(m=Object.create(null),u[c[l]]=m),u=m}return u}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,o=Object.create(null);for(let a=0;a<e.length;a++){let c=e[a],u=c.indexOf("."),l=null;if(u>=0?l=b.workspace.getConfiguration(c.substr(0,u),n).get(c.substr(u+1)):l=b.workspace.getConfiguration(c,n),l){let m=e[a].split(".");t(o,m)[m[m.length-1]]=l}}return o}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&&e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},jn=class{constructor(e){this._client=e,this._commands=new Map}get messages(){return g.ExecuteCommandRequest.type}fillClientCapabilities(e){q(q(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register(this.messages,{id:J.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e,t){let n=this._client;if(t.registerOptions.commands){let o=[];for(let a of t.registerOptions.commands)o.push(b.commands.registerCommand(a,(...c)=>{let u={command:a,arguments:c};n.sendRequest(g.ExecuteCommandRequest.type,u).then(void 0,l=>{n.logFailedRequest(g.ExecuteCommandRequest.type,l)})}));this._commands.set(t.id,o)}}unregister(e){let t=this._commands.get(e);t&&t.forEach(n=>n.dispose())}dispose(){this._commands.forEach(e=>{e.forEach(t=>t.dispose())})}},Ks;(function(i){function e(t){return t&&g.MessageReader.is(t.reader)&&g.MessageWriter.is(t.writer)}i.is=e})(Ks=ee.MessageTransports||(ee.MessageTransports={}));var In=class{constructor(e,t,n){this._features=[],this._method2Message=new Map,this._dynamicFeatures=new Map,this._id=e,this._name=t,n=n||{},this._clientOptions={documentSelector:n.documentSelector||[],synchronize:n.synchronize||{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName||this._name,revealOutputChannelOn:n.revealOutputChannelOn||ht.Error,stdioEncoding:n.stdioEncoding||"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,errorHandler:n.errorHandler||new Zt(this._name),middleware:n.middleware||{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this.state=Y.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new fn.Delayer(250),this._onReady=new Promise((o,a)=>{this._onReadyCallbacks={resolve:o,reject:a}}),this._telemetryEmitter=new g.Emitter,this._stateChangeEmitter=new g.Emitter,this._tracer={log:(o,a)=>{this.logTrace(o,a)}},this._c2p=Gs.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=Xs.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0),this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();n!==t&&this._stateChangeEmitter.fire({oldState:t,newState:n})}getPublicState(){return this.state===Y.Running?Kt.Running:Kt.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(n){throw this.error(`Sending request ${V.string(e)?e:e.method} failed.`,n),n}}onRequest(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onRequest(e,t)}catch(n){throw this.error(`Registering request handler ${V.string(e)?e:e.method} failed.`,n),n}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");this.forceDocumentSync();try{this._resolvedConnection.sendNotification(e,t)}catch(n){throw this.error(`Sending notification ${V.string(e)?e:e.method} failed.`,n),n}}onNotification(e,t){if(!this.isConnectionActive())throw new Error("Language client is not ready yet");try{this._resolvedConnection.onNotification(e,t)}catch(n){throw this.error(`Registering notification handler ${V.string(e)?e:e.method} failed.`,n),n}}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=b.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(){return new Zt(this._name)}set trace(e){this._trace=e,this.onReady().then(()=>{this.resolveConnection().then(t=>{t.trace(e,this._tracer)})},()=>{})}data2String(e){if(e instanceof g.ResponseError){let t=e;return`  Message: ${t.message}
  Code: ${t.code} ${t.data?`
`+t.data.toString():""}`}return e instanceof Error?V.string(e.stack)?e.stack:e.message:V.string(e)?e:e.toString()}info(e,t){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=ht.Info&&this.outputChannel.show(!0)}warn(e,t){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=ht.Warn&&this.outputChannel.show(!0)}error(e,t){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t)),this._clientOptions.revealOutputChannelOn<=ht.Error&&this.outputChannel.show(!0)}logTrace(e,t){this.outputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&&this.outputChannel.appendLine(this.data2String(t))}needsStart(){return this.state===Y.Initial||this.state===Y.Stopping||this.state===Y.Stopped}needsStop(){return this.state===Y.Starting||this.state===Y.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===Y.Running&&!!this._resolvedConnection}start(){return this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?b.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):b.languages.createDiagnosticCollection()),this.state=Y.Starting,this.resolveConnection().then(e=>{e.onLogMessage(t=>{switch(t.type){case g.MessageType.Error:this.error(t.message);break;case g.MessageType.Warning:this.warn(t.message);break;case g.MessageType.Info:this.info(t.message);break;default:this.outputChannel.appendLine(t.message)}}),e.onShowMessage(t=>{switch(t.type){case g.MessageType.Error:b.window.showErrorMessage(t.message);break;case g.MessageType.Warning:b.window.showWarningMessage(t.message);break;case g.MessageType.Info:b.window.showInformationMessage(t.message);break;default:b.window.showInformationMessage(t.message)}}),e.onRequest(g.ShowMessageRequest.type,t=>{let n;switch(t.type){case g.MessageType.Error:n=b.window.showErrorMessage;break;case g.MessageType.Warning:n=b.window.showWarningMessage;break;case g.MessageType.Info:n=b.window.showInformationMessage;break;default:n=b.window.showInformationMessage}let o=t.actions||[];return n(t.message,...o)}),e.onTelemetry(t=>{this._telemetryEmitter.fire(t)}),e.listen(),this.initialize(e).then(void 0,()=>{})},e=>{this.state=Y.StartFailed,this._onReadyCallbacks.reject(e),this.error("Starting client failed",e),b.window.showErrorMessage(`Couldn't start client ${this._name}`)}),new b.Disposable(()=>{this.needsStop()&&this.stop()})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,n=this._clientOptions.workspaceFolder?this._clientOptions.workspaceFolder.uri.fsPath:b.workspace.rootPath,o={processId:process.pid,rootPath:n||null,rootUri:n?this._c2p.asUri(b.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:V.func(t)?t():t,trace:g.Trace.toString(this._trace)};return this.fillInitializeParams(o),e.initialize(o).then(a=>{this._resolvedConnection=e,this._initializeResult=a,this.state=Y.Running;let c;return V.number(a.capabilities.textDocumentSync)&&a.capabilities.textDocumentSync!==g.TextDocumentSyncKind.None?c={openClose:!0,change:a.capabilities.textDocumentSync,save:{includeText:!1}}:a.capabilities.textDocumentSync!==void 0&&a.capabilities.textDocumentSync!==null&&(c=a.capabilities.textDocumentSync),this._capabilities=Object.assign({},a.capabilities,{resolvedTextDocumentSync:c}),e.onDiagnostics(u=>this.handleDiagnostics(u)),e.onRequest(g.RegistrationRequest.type,u=>this.handleRegistrationRequest(u)),e.onRequest("client/registerFeature",u=>this.handleRegistrationRequest(u)),e.onRequest(g.UnregistrationRequest.type,u=>this.handleUnregistrationRequest(u)),e.onRequest("client/unregisterFeature",u=>this.handleUnregistrationRequest(u)),e.onRequest(g.ApplyWorkspaceEditRequest.type,u=>this.handleApplyWorkspaceEdit(u)),e.sendNotification(g.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),a},a=>{this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(a)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(a)):a instanceof g.ResponseError&&a.data&&a.data.retry?b.window.showErrorMessage(a.message,{title:"Retry",id:"retry"}).then(c=>{c&&c.id==="retry"?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(a))}):(a&&a.message&&b.window.showErrorMessage(a.message),this.error("Server initialization failed.",a),this.stop(),this._onReadyCallbacks.reject(a))})}stop(){return this._initializeResult=void 0,this._connectionPromise?(this.state=Y.Stopping,this.cleanUp(),this.resolveConnection().then(e=>e.shutdown().then(()=>{e.exit(),e.dispose(),this.state=Y.Stopped,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._outputChannel&&this._outputChannel.clear()}))):(this.state=Y.Stopped,Promise.resolve())}cleanUp(e=!1){this._listeners&&(this._listeners.forEach(t=>t.dispose()),this._listeners=void 0),this._providers&&(this._providers.forEach(t=>t.dispose()),this._providers=void 0);for(let t of this._dynamicFeatures.values())t.dispose();this._outputChannel&&this._disposeOutputChannel&&this._outputChannel.dispose(),!e&&this._diagnostics&&(this._diagnostics.dispose(),this._diagnostics=void 0)}notifyFileEvent(e){this._fileEvents.push(e),this._fileEventDelayer.trigger(()=>{this.onReady().then(()=>{this.resolveConnection().then(t=>{this.isConnectionActive()&&t.didChangeWatchedFiles({changes:this._fileEvents}),this._fileEvents=[]})},t=>{this.error("Notify file events failed.",t)})})}forceDocumentSync(){this._dynamicFeatures.get(g.DidChangeTextDocumentNotification.type.method).forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),n=this._p2c.asDiagnostics(e.diagnostics);this._diagnostics.set(t,n)}createConnection(){let e=(n,o,a)=>{this.handleConnectionError(n,o,a)},t=()=>{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8").then(n=>Ys(n.reader,n.writer,e,t))}handleConnectionClosed(){if(this.state===Y.Stopping||this.state===Y.Stopped)return;this._resolvedConnection&&this._resolvedConnection.dispose(),this._connectionPromise=void 0,this._resolvedConnection=void 0;let e=this._clientOptions.errorHandler.closed();e===tt.DoNotRestart?(this.error("Connection to server got closed. Server will not be restarted."),this.state=Y.Stopped,this.cleanUp(!1)):e===tt.Restart&&(this.info("Connection to server got closed. Server will restart."),this.cleanUp(!0),this.state=Y.Initial,this.start())}handleConnectionError(e,t,n){this._clientOptions.errorHandler.error(e,t,n)===Ot.Shutdown&&(this.error("Connection to server is erroring. Shutting down server."),this.stop())}hookConfigurationChanged(e){b.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let n=b.workspace.getConfiguration(this._id),o=g.Trace.Off;n&&(o=g.Trace.fromString(n.get("trace.server","off"))),this._trace=o,e.trace(this._trace,this._tracer,t)}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let n;V.array(t)?n=t:n=[t],!!n&&this._dynamicFeatures.get(g.DidChangeWatchedFilesNotification.type.method).registerRaw(J.generateUuid(),n)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),Vt.is(e)){let t=e.messages;if(Array.isArray(t))for(let n of t)this._method2Message.set(n.method,n),this._dynamicFeatures.set(n.method,e);else this._method2Message.set(t.method,t),this._dynamicFeatures.set(t.method,e)}}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new Wn(this)),this.registerFeature(new pn(this,e)),this.registerFeature(new mn(this)),this.registerFeature(new vn(this)),this.registerFeature(new yn(this)),this.registerFeature(new _n(this)),this.registerFeature(new gn(this,e)),this.registerFeature(new Cn(this,t=>this.notifyFileEvent(t))),this.registerFeature(new Rn(this)),this.registerFeature(new Tn(this)),this.registerFeature(new Dn(this)),this.registerFeature(new bn(this)),this.registerFeature(new Sn(this)),this.registerFeature(new qn(this)),this.registerFeature(new xn(this)),this.registerFeature(new Pn(this)),this.registerFeature(new kn(this)),this.registerFeature(new En(this)),this.registerFeature(new On(this)),this.registerFeature(new Nn(this)),this.registerFeature(new Mn(this)),this.registerFeature(new Fn(this)),this.registerFeature(new Ln(this)),this.registerFeature(new jn(this))}fillInitializeParams(e){for(let t of this._features)V.func(t.fillInitializeParams)&&t.fillInitializeParams(e)}computeClientCapabilities(){let e={};q(e,"workspace").applyEdit=!0;for(let t of this._features)t.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let n of this._features)n.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,n)=>{for(let o of e.registrations){let a=this._dynamicFeatures.get(o.method);if(!a){n(new Error(`No feature implementation for ${o.method} found. Registration failed.`));return}let c=o.registerOptions||{};c.documentSelector=c.documentSelector||this._clientOptions.documentSelector;let u={id:o.id,registerOptions:c};a.register(this._method2Message.get(o.method),u)}t()})}handleUnregistrationRequest(e){return new Promise((t,n)=>{for(let o of e.unregisterations){let a=this._dynamicFeatures.get(o.method);if(!a){n(new Error(`No feature implementation for ${o.method} found. Unregistration failed.`));return}a.unregister(o.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,n=new Map;b.workspace.textDocuments.forEach(a=>n.set(a.uri.toString(),a));let o=!1;if(t.documentChanges){for(let a of t.documentChanges)if(a.textDocument.version&&a.textDocument.version>=0){let c=n.get(a.textDocument.uri);if(c&&c.version!==a.textDocument.version){o=!0;break}}}return o?Promise.resolve({applied:!1}):b.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(a=>({applied:a}))}logFailedRequest(e,t){t instanceof g.ResponseError&&t.code===g.ErrorCodes.RequestCancelled||this.error(`Request ${e.method} failed.`,t)}};ee.BaseLanguageClient=In});var $n=A(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});var zn=require("path"),Vs=require("os"),Hn=require("net"),ea=require("child_process");function ta(i){let e=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],t="";for(let n=0;n<i;n++){let o=Math.floor(e.length*Math.random());t+=e[o]}return t}function An(){var i="vscode-"+ta(40);return process.platform==="win32"?"\\\\.\\pipe\\"+i+"-sock":zn.join(Vs.tmpdir(),i+".sock")}function ia(i,e,t){var n={};for(var o in i)n[o]=i[o];return n.STDIN_PIPE_NAME=e,n.STDOUT_PIPE_NAME=t,n.ATOM_SHELL_INTERNAL_RUN_AS_NODE="1",n.ELECTRON_RUN_AS_NODE="1",n}function na(i,e,t,n){var o=!1,a=D=>{o||(o=!0,n(void 0,D))},c=D=>{o||(o=!0,n(D,void 0))},u=An(),l=An(),m=ia(t.env||process.env,u,l),_,L=Hn.createServer(D=>{D.once("data",w=>{_.stdin=Hn.connect(u),_.stdout=D,a(_)})});L.listen(l);var z=!1,I=()=>{z||(z=!0,L.close())};let P=zn.join(__dirname,"electronForkStart");_=ea.fork(P,[i].concat(e),{silent:!0,cwd:t.cwd,env:m,execArgv:t.execArgv}),_.once("error",D=>{I(),c(D)}),_.once("exit",D=>{I(),c(D)})}ti.fork=na});var Un=A(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});var Bn=require("child_process"),ra=require("path"),oa=process.platform==="win32",sa=process.platform==="darwin",aa=process.platform==="linux";function ua(i,e){if(oa)try{let o={stdio:["pipe","pipe","ignore"]};return e&&(o.cwd=e),Bn.execFileSync("taskkill",["/T","/F","/PID",i.pid.toString()],o),!0}catch{return!1}else if(aa||sa)try{var t=ra.join(__dirname,"terminateProcess.sh"),n=Bn.spawnSync(t,[i.pid.toString()]);return!n.error}catch{return!1}else return i.kill("SIGKILL"),!0}ii.terminate=ua});var Qn=A(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});var ni=require("vscode"),ca=He(),Jn=class{constructor(e){this._client=e}fillClientCapabilities(e){e.workspace=e.workspace||{};let t=e;t.workspace.configuration=!0}initialize(){this._client.onRequest(ca.Proposed.ConfigurationRequest.type,(t,n)=>{let o=c=>{let u=[];for(let l of c.items){let m=l.scopeUri!==void 0&&l.scopeUri!==null?this._client.protocol2CodeConverter.asUri(l.scopeUri):void 0;u.push(this.getConfiguration(m,l.section!==null?l.section:void 0))}return u},a=this.getConfigurationMiddleware();return a.configuration?a.configuration(t,n,o):o(t,n)})}getConfiguration(e,t){let n=null;if(t){let o=t.lastIndexOf(".");if(o===-1)n=ni.workspace.getConfiguration(void 0,e).get(t);else{let a=ni.workspace.getConfiguration(t.substr(0,o));a&&(n=a.get(t.substr(o+1)))}}else{let o=ni.workspace.getConfiguration(void 0,e);n={};for(let a of Object.keys(o))o.has(a)&&(n[a]=o.get(a))}return n||null}getConfigurationMiddleware(){let e=this._client.clientOptions.middleware;return e&&e.workspace?e.workspace:{}}};ri.ConfigurationFeature=Jn});var Xn=A(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});var oi=require("vscode"),si=He(),Gn=class{constructor(e){this._client=e,this._listeners=new Map}get messages(){return si.Proposed.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=e,n=oi.workspace.workspaceFolders;n===void 0?t.workspaceFolders=null:t.workspaceFolders=n.map(o=>this.asProtocol(o))}fillClientCapabilities(e){e.workspace=e.workspace||{};let t=e;t.workspace.workspaceFolders=!0}initialize(){this._client.onRequest(si.Proposed.WorkspaceFoldersRequest.type,t=>{let n=()=>{let a=oi.workspace.workspaceFolders;return a===void 0?null:a.map(u=>this.asProtocol(u))},o=this.getWorkspaceFolderMiddleware();return o.workspaceFolders?o.workspaceFolders(t,n):n(t)})}register(e,t){let n=t.id,o=oi.workspace.onDidChangeWorkspaceFolders(a=>{let c=l=>{let m={event:{added:l.added.map(_=>this.asProtocol(_)),removed:l.removed.map(_=>this.asProtocol(_))}};this._client.sendNotification(si.Proposed.DidChangeWorkspaceFoldersNotification.type,m)},u=this.getWorkspaceFolderMiddleware();u.didChangeWorkspaceFolders?u.didChangeWorkspaceFolders(a,c):c(a)});this._listeners.set(n,o)}unregister(e){let t=this._listeners.get(e);t!==void 0&&(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}getWorkspaceFolderMiddleware(){let e=this._client.clientOptions.middleware;return e&&e.workspace?e.workspace:{}}};ai.WorkspaceFoldersFeature=Gn});var er=A(xe=>{"use strict";function la(i){for(var e in i)xe.hasOwnProperty(e)||(xe[e]=i[e])}Object.defineProperty(xe,"__esModule",{value:!0});var Nt=require("child_process"),Yn=ei(),pt=require("vscode"),Z=He(),te=ft(),ui=$n(),da=Un();la(ei());var ie;(function(i){i[i.stdio=0]="stdio",i[i.ipc=1]="ipc",i[i.pipe=2]="pipe",i[i.socket=3]="socket"})(ie=xe.TransportKind||(xe.TransportKind={}));var it;(function(i){function e(t){let n=t;return n&&n.kind===ie.socket&&te.number(n.port)}i.isSocket=e})(it||(it={}));var ci;(function(i){function e(t){let n=t;return n&&n.writer!==void 0&&n.reader!==void 0}i.is=e})(ci||(ci={}));var li;(function(i){function e(t){let n=t;return n&&n.process!==void 0&&typeof n.detached=="boolean"}i.is=e})(li||(li={}));var Zn=class extends Yn.BaseLanguageClient{constructor(e,t,n,o,a){let c,u,l,m,_;te.string(t)?(c=e,u=t,l=n,m=o,_=!!a):(c=e.toLowerCase(),u=e,l=t,m=n,_=o),_===void 0&&(_=!1);super(c,u,m);this._serverOptions=l,this._forceDebug=_}stop(){return super.stop().then(()=>{if(this._serverProcess){let e=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(e),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=>{try{process.kill(e.pid,0),da.terminate(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}createMessageTransports(e){let t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:pt.workspace.rootPath;function n(l){if(!l)return process.env;let m=Object.create(null);return Object.keys(process.env).forEach(_=>m[_]=process.env[_]),Object.keys(l).forEach(_=>m[_]=l[_]),m}function o(){let l=process.execArgv;return l?l.some(m=>/^--debug=?/.test(m)||/^--debug-brk=?/.test(m)||/^--inspect=?/.test(m)||/^--inspect-brk=?/.test(m)):!1}let a=this._serverOptions;if(te.func(a))return a().then(l=>{if(Yn.MessageTransports.is(l))return this._isDetached=!!l.detached,l;if(ci.is(l))return this._isDetached=!!l.detached,{reader:new Z.StreamMessageReader(l.reader),writer:new Z.StreamMessageWriter(l.writer)};{let m;return li.is(l)?(m=l.process,this._isDetached=l.detached):(m=l,this._isDetached=!1),m.stderr.on("data",_=>this.outputChannel.append(te.string(_)?_:_.toString(e))),{reader:new Z.StreamMessageReader(m.stdout),writer:new Z.StreamMessageWriter(m.stdin)}}});let c,u=a;if(u.run||u.debug?typeof v8debug=="object"||this._forceDebug||o()?c=u.debug:c=u.run:c=a,c.module){let l=c,m=l.transport||ie.stdio;if(l.runtime){let _=[],L=l.options||Object.create(null);L.execArgv&&L.execArgv.forEach(P=>_.push(P)),_.push(l.module),l.args&&l.args.forEach(P=>_.push(P));let z=Object.create(null);z.cwd=L.cwd||t,z.env=n(L.env);let I;if(m===ie.ipc?(z.stdio=[null,null,null,"ipc"],_.push("--node-ipc")):m===ie.stdio?_.push("--stdio"):m===ie.pipe?(I=Z.generateRandomPipeName(),_.push(`--pipe=${I}`)):it.isSocket(m)&&_.push(`--socket=${m.port}`),_.push(`--clientProcessId=${process.pid.toString()}`),m===ie.ipc||m===ie.stdio){let P=Nt.spawn(l.runtime,_,z);return!P||!P.pid?Promise.reject(`Launching server using runtime ${l.runtime} failed.`):(this._serverProcess=P,P.stderr.on("data",D=>this.outputChannel.append(te.string(D)?D:D.toString(e))),m===ie.ipc?(P.stdout.on("data",D=>this.outputChannel.append(te.string(D)?D:D.toString(e))),Promise.resolve({reader:new Z.IPCMessageReader(P),writer:new Z.IPCMessageWriter(P)})):Promise.resolve({reader:new Z.StreamMessageReader(P.stdout),writer:new Z.StreamMessageWriter(P.stdin)}))}else{if(m==ie.pipe)return Z.createClientPipeTransport(I).then(P=>{let D=Nt.spawn(l.runtime,_,z);return!D||!D.pid?Promise.reject(`Launching server using runtime ${l.runtime} failed.`):(this._serverProcess=D,D.stderr.on("data",w=>this.outputChannel.append(te.string(w)?w:w.toString(e))),D.stdout.on("data",w=>this.outputChannel.append(te.string(w)?w:w.toString(e))),P.onConnected().then(w=>({reader:w[0],writer:w[1]})))});if(it.isSocket(m))return Z.createClientSocketTransport(m.port).then(P=>{let D=Nt.spawn(l.runtime,_,z);return!D||!D.pid?Promise.reject(`Launching server using runtime ${l.runtime} failed.`):(this._serverProcess=D,D.stderr.on("data",w=>this.outputChannel.append(te.string(w)?w:w.toString(e))),D.stdout.on("data",w=>this.outputChannel.append(te.string(w)?w:w.toString(e))),P.onConnected().then(w=>({reader:w[0],writer:w[1]})))})}}else{let _;return new Promise((L,z)=>{let I=l.args&&l.args.slice()||[];m===ie.ipc?I.push("--node-ipc"):m===ie.stdio?I.push("--stdio"):m===ie.pipe?(_=Z.generateRandomPipeName(),I.push(`--pipe=${_}`)):it.isSocket(m)&&I.push(`--socket=${m.port}`),I.push(`--clientProcessId=${process.pid.toString()}`);let P=l.options||Object.create(null);P.execArgv=P.execArgv||[],P.cwd=P.cwd||t,m===ie.ipc||m===ie.stdio?ui.fork(l.module,I||[],P,(D,w)=>{D||!w?z(D):(this._serverProcess=w,w.stderr.on("data",x=>this.outputChannel.append(te.string(x)?x:x.toString(e))),m===ie.ipc?(w.stdout.on("data",x=>this.outputChannel.append(te.string(x)?x:x.toString(e))),L({reader:new Z.IPCMessageReader(this._serverProcess),writer:new Z.IPCMessageWriter(this._serverProcess)})):L({reader:new Z.StreamMessageReader(w.stdout),writer:new Z.StreamMessageWriter(w.stdin)}))}):m===ie.pipe?Z.createClientPipeTransport(_).then(D=>{ui.fork(l.module,I||[],P,(w,x)=>{w||!x?z(w):(this._serverProcess=x,x.stderr.on("data",M=>this.outputChannel.append(te.string(M)?M:M.toString(e))),x.stdout.on("data",M=>this.outputChannel.append(te.string(M)?M:M.toString(e))),D.onConnected().then(M=>{L({reader:M[0],writer:M[1]})}))})}):it.isSocket(m)&&Z.createClientSocketTransport(m.port).then(D=>{ui.fork(l.module,I||[],P,(w,x)=>{w||!x?z(w):(this._serverProcess=x,x.stderr.on("data",M=>this.outputChannel.append(te.string(M)?M:M.toString(e))),x.stdout.on("data",M=>this.outputChannel.append(te.string(M)?M:M.toString(e))),D.onConnected().then(M=>{L({reader:M[0],writer:M[1]})}))})})})}}else if(c.command){let l=c,m=l.args||[],_=l.options||{};_.cwd=_.cwd||t;let L=Nt.spawn(l.command,m,_);return!L||!L.pid?Promise.reject(`Launching server using command ${l.command} failed.`):(L.stderr.on("data",z=>this.outputChannel.append(te.string(z)?z:z.toString(e))),this._serverProcess=L,this._isDetached=!!_.detached,Promise.resolve({reader:new Z.StreamMessageReader(L.stdout),writer:new Z.StreamMessageWriter(L.stdin)}))}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(a,null,4)))}registerProposedFeatures(){this.registerFeatures(Vn.createAll(this))}};xe.LanguageClient=Zn;var Kn=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return pt.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new pt.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),t=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,o=n?pt.workspace.getConfiguration(t).get(n,!1):pt.workspace.getConfiguration(t);o&&this._client.needsStart()?this._client.start():!o&&this._client.needsStop()&&this._client.stop()}};xe.SettingMonitor=Kn;var fa=Qn(),ha=Xn(),Vn;(function(i){i.ConfigurationFeature=fa.ConfigurationFeature,i.WorkspaceFoldersFeature=ha.WorkspaceFoldersFeature;function e(t){let n=[];return n.push(new i.WorkspaceFoldersFeature(t)),n.push(new i.ConfigurationFeature(t)),n}i.createAll=e})(Vn=xe.ProposedFeatures||(xe.ProposedFeatures={}))});var ga={};fr(ga,{activate:()=>pa});var tr=pi(require("path")),ir=require("vscode"),gt=pi(er());function pa(i){let e=i.asAbsolutePath(tr.join("server","server.js")),t={execArgv:["--nolazy","--inspect=9229"]},n={run:{module:e,transport:gt.TransportKind.ipc},debug:{module:e,transport:gt.TransportKind.ipc,options:t}},o={documentSelector:["feature"],synchronize:{configurationSection:"cucumberautocomplete",fileEvents:ir.workspace.createFileSystemWatcher("**/.clientrc")}},a=new gt.LanguageClient("cucumberautocomplete-client","Cucumber auto complete plugin",n,o).start();i.subscriptions.push(a)}"use strict";module.exports=hr(ga);0&&(module.exports={activate});
