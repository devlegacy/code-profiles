var en=Object.defineProperty;var tn=(e,t,n)=>t in e?en(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var F=(e,t,n)=>(tn(e,typeof t!="symbol"?t+"":t,n),n);import{i as Xe,r as Je,T as nn,v as on,u as re,p as he,j as k,F as rn,a as v,e as ln,c as cn,b as Ee,d as Ve,t as Ze,f as Qe,R as sn}from"./jsx-runtime.js";var an=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};var dt={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(an,function(){var n=1e3,o=6e4,i=36e5,l="millisecond",s="second",g="minute",r="hour",c="day",u="week",d="month",a="quarter",m="year",f="date",y="Invalid Date",L=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(I){var E=["th","st","nd","rd"],p=I%100;return"["+I+(E[(p-20)%10]||E[p]||E[0])+"]"}},P=function(I,E,p){var b=String(I);return!b||b.length>=E?I:""+Array(E+1-b.length).join(p)+I},O={s:P,z:function(I){var E=-I.utcOffset(),p=Math.abs(E),b=Math.floor(p/60),h=p%60;return(E<=0?"+":"-")+P(b,2,"0")+":"+P(h,2,"0")},m:function I(E,p){if(E.date()<p.date())return-I(p,E);var b=12*(p.year()-E.year())+(p.month()-E.month()),h=E.clone().add(b,d),w=p-h<0,x=E.clone().add(b+(w?-1:1),d);return+(-(b+(p-h)/(w?h-x:x-h))||0)},a:function(I){return I<0?Math.ceil(I)||0:Math.floor(I)},p:function(I){return{M:d,y:m,w:u,d:c,D:f,h:r,m:g,s,ms:l,Q:a}[I]||String(I||"").toLowerCase().replace(/s$/,"")},u:function(I){return I===void 0}},q="en",_={};_[q]=M;var $=function(I){return I instanceof ee},W=function I(E,p,b){var h;if(!E)return q;if(typeof E=="string"){var w=E.toLowerCase();_[w]&&(h=w),p&&(_[w]=p,h=w);var x=E.split("-");if(!h&&x.length>1)return I(x[0])}else{var N=E.name;_[N]=E,h=N}return!b&&h&&(q=h),h||!b&&q},S=function(I,E){if($(I))return I.clone();var p=typeof E=="object"?E:{};return p.date=I,p.args=arguments,new ee(p)},D=O;D.l=W,D.i=$,D.w=function(I,E){return S(I,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var ee=function(){function I(p){this.$L=W(p.locale,null,!0),this.parse(p)}var E=I.prototype;return E.parse=function(p){this.$d=function(b){var h=b.date,w=b.utc;if(h===null)return new Date(NaN);if(D.u(h))return new Date;if(h instanceof Date)return new Date(h);if(typeof h=="string"&&!/Z$/i.test(h)){var x=h.match(L);if(x){var N=x[2]-1||0,A=(x[7]||"0").substring(0,3);return w?new Date(Date.UTC(x[1],N,x[3]||1,x[4]||0,x[5]||0,x[6]||0,A)):new Date(x[1],N,x[3]||1,x[4]||0,x[5]||0,x[6]||0,A)}}return new Date(h)}(p),this.$x=p.x||{},this.init()},E.init=function(){var p=this.$d;this.$y=p.getFullYear(),this.$M=p.getMonth(),this.$D=p.getDate(),this.$W=p.getDay(),this.$H=p.getHours(),this.$m=p.getMinutes(),this.$s=p.getSeconds(),this.$ms=p.getMilliseconds()},E.$utils=function(){return D},E.isValid=function(){return this.$d.toString()!==y},E.isSame=function(p,b){var h=S(p);return this.startOf(b)<=h&&h<=this.endOf(b)},E.isAfter=function(p,b){return S(p)<this.startOf(b)},E.isBefore=function(p,b){return this.endOf(b)<S(p)},E.$g=function(p,b,h){return D.u(p)?this[b]:this.set(h,p)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(p,b){var h=this,w=!!D.u(b)||b,x=D.p(p),N=function(ne,V){var K=D.w(h.$u?Date.UTC(h.$y,V,ne):new Date(h.$y,V,ne),h);return w?K:K.endOf(c)},A=function(ne,V){return D.w(h.toDate()[ne].apply(h.toDate("s"),(w?[0,0,0,0]:[23,59,59,999]).slice(V)),h)},T=this.$W,H=this.$M,Y=this.$D,U="set"+(this.$u?"UTC":"");switch(x){case m:return w?N(1,0):N(31,11);case d:return w?N(1,H):N(0,H+1);case u:var se=this.$locale().weekStart||0,ae=(T<se?T+7:T)-se;return N(w?Y-ae:Y+(6-ae),H);case c:case f:return A(U+"Hours",0);case r:return A(U+"Minutes",1);case g:return A(U+"Seconds",2);case s:return A(U+"Milliseconds",3);default:return this.clone()}},E.endOf=function(p){return this.startOf(p,!1)},E.$set=function(p,b){var h,w=D.p(p),x="set"+(this.$u?"UTC":""),N=(h={},h[c]=x+"Date",h[f]=x+"Date",h[d]=x+"Month",h[m]=x+"FullYear",h[r]=x+"Hours",h[g]=x+"Minutes",h[s]=x+"Seconds",h[l]=x+"Milliseconds",h)[w],A=w===c?this.$D+(b-this.$W):b;if(w===d||w===m){var T=this.clone().set(f,1);T.$d[N](A),T.init(),this.$d=T.set(f,Math.min(this.$D,T.daysInMonth())).$d}else N&&this.$d[N](A);return this.init(),this},E.set=function(p,b){return this.clone().$set(p,b)},E.get=function(p){return this[D.p(p)]()},E.add=function(p,b){var h,w=this;p=Number(p);var x=D.p(b),N=function(H){var Y=S(w);return D.w(Y.date(Y.date()+Math.round(H*p)),w)};if(x===d)return this.set(d,this.$M+p);if(x===m)return this.set(m,this.$y+p);if(x===c)return N(1);if(x===u)return N(7);var A=(h={},h[g]=o,h[r]=i,h[s]=n,h)[x]||1,T=this.$d.getTime()+p*A;return D.w(T,this)},E.subtract=function(p,b){return this.add(-1*p,b)},E.format=function(p){var b=this,h=this.$locale();if(!this.isValid())return h.invalidDate||y;var w=p||"YYYY-MM-DDTHH:mm:ssZ",x=D.z(this),N=this.$H,A=this.$m,T=this.$M,H=h.weekdays,Y=h.months,U=function(V,K,Ne,ye){return V&&(V[K]||V(b,w))||Ne[K].slice(0,ye)},se=function(V){return D.s(N%12||12,V,"0")},ae=h.meridiem||function(V,K,Ne){var ye=V<12?"AM":"PM";return Ne?ye.toLowerCase():ye},ne={YY:String(this.$y).slice(-2),YYYY:this.$y,M:T+1,MM:D.s(T+1,2,"0"),MMM:U(h.monthsShort,T,Y,3),MMMM:U(Y,T),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:U(h.weekdaysMin,this.$W,H,2),ddd:U(h.weekdaysShort,this.$W,H,3),dddd:H[this.$W],H:String(N),HH:D.s(N,2,"0"),h:se(1),hh:se(2),a:ae(N,A,!0),A:ae(N,A,!1),m:String(A),mm:D.s(A,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:x};return w.replace(C,function(V,K){return K||ne[V]||x.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(p,b,h){var w,x=D.p(b),N=S(p),A=(N.utcOffset()-this.utcOffset())*o,T=this-N,H=D.m(this,N);return H=(w={},w[m]=H/12,w[d]=H,w[a]=H/3,w[u]=(T-A)/6048e5,w[c]=(T-A)/864e5,w[r]=T/i,w[g]=T/o,w[s]=T/n,w)[x]||T,h?H:D.a(H)},E.daysInMonth=function(){return this.endOf(d).$D},E.$locale=function(){return _[this.$L]},E.locale=function(p,b){if(!p)return this.$L;var h=this.clone(),w=W(p,b,!0);return w&&(h.$L=w),h},E.clone=function(){return D.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},I}(),te=ee.prototype;return S.prototype=te,[["$ms",l],["$s",s],["$m",g],["$H",r],["$W",c],["$M",d],["$y",m],["$D",f]].forEach(function(I){te[I[1]]=function(E){return this.$g(E,I[0],I[1])}}),S.extend=function(I,E){return I.$i||(I(E,ee,S),I.$i=!0),S},S.locale=W,S.isDayjs=$,S.unix=function(I){return S(1e3*I)},S.en=_[q],S.Ls=_,S.p={},S})})(dt);var dn=dt.exports;const ut="activePathChanged",un=":";function R(e){if(!(!e.file||!e.line))return`${e.file}${un}${e.line}`}const pe="sourceCodeLinkGenerated",ht="page",hn="fullPage",X=class{constructor(t,n){F(this,"_expanded",!0);F(this,"_children",[]);this._parent=t,this._element=n}static createRoot(t){const n=new X;return n.addChild(t),n}addChild(t){const n=new X(this,t);this._children.push(n),t.addEventListener(ft,()=>{let o=this;for(;o;)o._expand(),o=o._parent}),t.addEventListener(gt,()=>{n._toggleExpansionState()}),X._reportPath&&(t.addEventListener("click",()=>this._reportActivePath()),t.addEventListener(mt,()=>this._reportActivePath()))}_reportActivePath(){let t=this;if((t==null?void 0:t._element)===X._lastReportedActivePath[X._lastReportedActivePath.length-1])return;let n=[];for(;t!==void 0;)t._element&&n.unshift(t._element),t=t._parent;X._lastReportedActivePath=n.slice(),document.dispatchEvent(new CustomEvent(ut,{detail:n}))}getLastChild(){return this._children[this._children.length-1]}_isLeaf(){return this._children.length===0}_expand(){this._expanded||this._toggleExpansionState()}_toggleExpansionState(){if(!this._element||this._isLeaf())return;this._element.classList.toggle("collapsed");const t=!this._expanded;this._expanded=t;for(const n of this._children)n._toggleElementAndChildElementsVisibility(t);t?this._element.removeChild(this._element.lastChild):this._element.appendChild(document.createTextNode(" ...")),document.querySelectorAll(`.${ht}`).forEach(n=>{Array.from(n.childNodes.values()).every(o=>o.classList.contains("hidden"))?n.classList.add("hidden"):n.classList.remove("hidden")})}_toggleElementAndChildElementsVisibility(t){if(!!this._element&&(t?this._element.classList.remove("hidden"):this._element.classList.add("hidden"),!this._isLeaf()&&!!this._expanded))for(const n of this._children)n._toggleElementAndChildElementsVisibility(t)}makeExpandable(){if(!this._element)return;const t=Array.from(this._element.childNodes.values()).reverse().find(o=>o instanceof HTMLSpanElement&&o.classList.contains("indentation"));if(t){const o=t.textContent;t.textContent="";const i=t.appendChild(document.createElement("span"));i.classList.add("expander"),i.textContent=o}else this._element.classList.add("expandable-line");const n=this._element;n.onclick=o=>{const i=document.getSelection(),l=(i==null?void 0:i.type)==="Range",s=this._expandableContentClicked(n,o.clientX,o.clientY);(!l&&s==="content"||s==="indentation")&&(o.preventDefault(),this._toggleExpansionState())}}_expandableContentClicked(t,n,o){var r;let i;const l=t.childNodes,s=document.createRange();for(var g=0;i=l[g],g<l.length;g++)if((i.nodeType===3||i instanceof HTMLSpanElement)&&(s.selectNodeContents(i),this._isInside(n,o,s.getBoundingClientRect())))return(r=i.classList)!=null&&r.contains("indentation")?"indentation":"content";return"none"}_isInside(t,n,o){return n>=o.top&&t<=o.right&&n<=o.bottom}};let Z=X;F(Z,"_lastReportedActivePath",[]),F(Z,"_reportPath",!1);class fn{constructor(t,n){F(this,"_result");F(this,"_currentPageElement");F(this,"_currentLineElement");F(this,"_currentParentLineTreeNode");F(this,"_lineTreeNodeStack");F(this,"_currentIndentationLevel");this._opts=t,this._api=n,this._result=document.createDocumentFragment(),this._currentPageElement=this._createPage(),this._currentLineElement=this._createLine(),this._currentParentLineTreeNode=Z.createRoot(this._currentLineElement),this._lineTreeNodeStack=[],this._currentIndentationLevel=0}addNewLine(){this._currentPageElement.appendChild(this._currentLineElement),this._currentLineElement=this._createLine(),this._currentPageElement.childNodes.length%this._opts.pageSize===0&&(this._currentPageElement.classList.add(hn),this._result.appendChild(this._currentPageElement),this._currentPageElement=this._createPage())}addNewLineIndentation(t){const n=Math.round(t.value.length/Xe);if(this._opts.renderIndentationGuides)this._addIndentationGuides(t,n);else{const o=document.createElement("span");o.textContent=t.value,this._currentLineElement.appendChild(o)}n>this._currentIndentationLevel?(this._lineTreeNodeStack.push(this._currentParentLineTreeNode),this._currentParentLineTreeNode=this._currentParentLineTreeNode.getLastChild()):n<this._currentIndentationLevel&&(this._opts.renderNodeExpansionControls&&this._currentParentLineTreeNode.makeExpandable(),this._currentParentLineTreeNode=this._lineTreeNodeStack.pop()),this._currentParentLineTreeNode.addChild(this._currentLineElement),this._currentIndentationLevel=n}_addIndentationGuides(t,n){for(let o=0;o<n;o++){const i=document.createElement("span");i.className=t.type,i.textContent=" ".repeat(Xe),this._currentLineElement.appendChild(i)}}addNodeToCurrentLine(t){const n=yt(t,this._api);this._currentLineElement.appendChild(n)}getResult(){return this._currentLineElement.childNodes.length>0&&this._currentPageElement.appendChild(this._currentLineElement),this._currentPageElement.childNodes.length>0&&this._result.appendChild(this._currentPageElement),this._result}_createLine(){return document.createElement("p")}_createPage(){const t=document.createElement("div");return t.classList.add(ht),t}}const ft="ensureLineVisibilityRequested",gt="toggleLineExpansionRequested",mt="activePathRequested",gn=new Event(ft),mn=new Event(gt),pn=new Event(mt);function yn(){Z._lastReportedActivePath=[]}function pt(e,t,n,o={pageSize:100,renderIndentationGuides:!1,renderNodeExpansionControls:!1,renderBreadcrumbs:!1,renderLogEntryActions:!1,renderHighlights:!1,renderWatchView:!1,allowToMergeMultiToolLogs:!1,mergeMultiToolLogs:!1}){if(Z._reportPath=o.renderBreadcrumbs,n==="preview"){const l=document.createDocumentFragment();for(const s of e)if(s.type!=="indentation"){if(s.type==="linebreak"){l.appendChild(document.createTextNode(" "));continue}l.appendChild(yt(s,t))}return l}const i=new fn(o,t);for(const l of e){if(l.type==="linebreak"){i.addNewLine();continue}else if(l.type==="indentation"){i.addNewLineIndentation(l);continue}i.addNodeToCurrentLine(l)}return i.getResult()}function yt(e,t){var o;let n;if(e.type==="link"){const i=document.createElement("a");i.textContent=e.value,i.href="#";const l=e.data;l&&(i.onclick=s=>{s.preventDefault(),t.navigate(l.source,l.line,l.column)},document.dispatchEvent(new CustomEvent(pe,{detail:{link:i,loc:{file:l.source,line:l.line}}}))),n=i}else{const i=document.createElement("span");i.className=e.type,i.textContent=e.value,n=i}return(o=e.data)!=null&&o.tooltip&&(n.title=e.data.tooltip),n}const Lt=6.623046875,Ln=6.1382352941,Q="highlight",ze=new RegExp(`${Q}-[A-Z1-9]`,"g"),vt="loadEntryPreviewRequested",vn=new Event(vt),xe="entryAddedToGroup",En=new Event(xe),Et="entryGroupCountUpdated",wn=new Event(Et),wt="expandOnLoad",Ae="showRequested",Cn=new Set(["Default Light Modern","Default Dark Modern","Visual Studio Light","Visual Studio Dark","Default Light+","Default Dark+"]),Ie=navigator.platform==="Win32",bn=navigator.platform==="MacIntel",ie=bn?"Cmd":"Ctrl";function Ct(e,t){if(!!e){var n=parseInt(e.substring(1,3),16),o=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);n=n*(100+t)/100,o=o*(100+t)/100,i=i*(100+t)/100,n=n<255?n:255,o=o<255?o:255,i=i<255?i:255,n=Math.round(n),o=Math.round(o),i=Math.round(i);var l=n.toString(16).length==1?"0"+n.toString(16):n.toString(16),s=o.toString(16).length==1?"0"+o.toString(16):o.toString(16),g=i.toString(16).length==1?"0"+i.toString(16):i.toString(16);return"#"+l+s+g}}function De(e,t,n,o){return t||!o&&!n?Ct(e,-35):e}function xn(e){try{return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(t,n,o,i)=>"#"+n+n+o+o+i+i).substring(1).match(/.{2}/g).map(t=>parseInt(t,16))}catch{return}}function bt(e,t,n){const o=document.querySelector(":root"),i=getComputedStyle(document.documentElement);if(o){const l=o.style,s=i.getPropertyValue("--vscode-editor-foreground"),g=i.getPropertyValue("--vscode-editor-font-weight");if(!t){const a=document.body.getAttribute("data-vscode-theme-id"),m=document.body.getAttribute("data-vscode-theme-kind"),f=a&&Cn.has(a),y=m==="vscode-dark",L=m==="vscode-high-contrast-light",C=m==="vscode-high-contrast";let M=De(i.getPropertyValue("--vscode-terminal-ansiGreen"),L,C,y),P=De(i.getPropertyValue("--vscode-terminal-ansiYellow"),L,C,y),O=De(i.getPropertyValue("--vscode-terminal-ansiCyan"),L,C,y),q=i.getPropertyValue("--vscode-terminal-ansiRed"),_=i.getPropertyValue("--vscode-terminal-ansiBrightBlack");q=L||!y&&!C?Ct(q,-35):"#d16969",t={class:{foreground:f?y?"#4ec9b0":"#267f99":O},new:{foreground:f?y?"#569cd6":"#0000ff":O},operator:{foreground:f?y?"#d4d4d4":"#000000":void 0},string:{foreground:f?y?"#ce9178":"#a31515":M},number:{foreground:f?y?"#b5cea8":"#098658":P},boolean:{foreground:f?y?"#569cd6":"#0000ff":P},undefined:{foreground:f?y?"#569cd6":"#0000ff":_},null:{foreground:f?y?"#569cd6":"#0000ff":_},regexp:{foreground:f?y?"#d16969":"#811f3f":q},function:{foreground:f?y?"#dcdcaa":"#795e26":O},property:{foreground:f?y?"#9cdcfe":"#001080":void 0},type:{foreground:f?y?"#4ec9b0":"#267f99":O},timepoint:{foreground:f?y?"#b5cea8":"#098658":P},punctuation:{},error:{},linebreak:{},indentation:{},link:{}}}for(const a in t){const m=t[a],f=(m==null?void 0:m.fontStyle)||"";l.setProperty(`--console-ninja-preview-${a}-foreground`,(m==null?void 0:m.foreground)||s),l.setProperty(`--console-ninja-preview-${a}-font-style`,f.includes("italic")?"italic":""),l.setProperty(`--console-ninja-preview-${a}-font-weight`,f.includes("bold")?"bold":g),l.setProperty(`--console-ninja-preview-${a}-text-decoration`,(f.includes("underline")?"underline":" ")+(f.includes("strikethrough")?"line-through":""))}const r=[],c=new Map;for(const a of n){const m=xn(i.getPropertyValue(`--vscode-${a.color}`));m&&c.set(a.color,{key:a.color,rgb:m}),r.push(`.highlight-${a.key} .log-highlighter:before
        {
          content: '${a.key}';
          background-color: var(--vscode-${a.color});
        }
        .log-watch .header.highlight-${a.key}.highlight-header,
        .log-watch .header.highlight-${a.key}.highlight-header .location a {
          color: var(--vscode-${a.color}) !important;
        }`)}const u=document.createElement("style");u.id="highlightStyles",u.innerHTML=r.join(`
`);const d=document.getElementById("highlightStyles");d&&document.body.removeChild(d),document.body.appendChild(u),e.channel.api.resolveHighlightColors(Array.from(c.values()))}}function xt(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function In(e){const t=[];return{searchText:It(e,"","",t),pathOffsets:t.filter(o=>o.path.length>0)}}async function de(e,t){var o;St(e),e.searchTerm=e.search.value;const n=e.searchContext=Date.now();if(e.searchTerm.length!==0)try{e.searchLoading.classList.remove("hiddenImportant");const i=j(e);if(e.searchResults=(t==null?void 0:t.searchResults)||(i==="logs"?re(await e.channel.api.search(e.searchTerm,e.selectedTool)):Array.from(e.watchData.entries.values()).map(l=>({id:l.entryId}))),n!==e.searchContext)return;if(t===void 0&&((o=e.focusedLogEntry)==null?void 0:o.data.id)){const l=e.focusedLogEntry.querySelector(".container");l&&!l.classList.contains("hiddenImportant")&&(t={currentMatchIdx:e.searchResults.findIndex(s=>{var g;return s.id===((g=e.focusedLogEntry)==null?void 0:g.data.id)})})}if(e.searchRegexHtmlEncoded=new RegExp(ln(xt(e.searchTerm)),"ig"),e.searchResults=e.searchResults.reduce((l,s)=>{var u;const g=i==="logs"?e.logEntryList.getElementById(s.id):(u=Array.from(e.watchData.entries.values()).find(d=>d.entryId===s.id))==null?void 0:u.element;if(!g)return l;l.push(s),e.searchResultsById[s.id]=s;const r=g.querySelector(".log-message");r&&(s.summaryCount=fe(r,e.searchRegexHtmlEncoded,`match-${s.id}-s-`));const c=g.querySelector(".container");return c&&(i!=="logs"||e.logEntryList.isLoaded(s.id)||c.querySelector(".error-log-message"))&&(s.detailCount=fe(c,e.searchRegexHtmlEncoded,`match-${s.id}-d-`)),l},[]),e.searchResults.length){const l=(t==null?void 0:t.currentMatchIdx)&&e.searchResults[t.currentMatchIdx];e.currentMatchIdx=l?t.currentMatchIdx:0,e.currentMatchCount=0,e.searchResults[e.currentMatchIdx].detailCount||t?e.currentMatchType="detail":e.currentMatchType="summary",Se(e,t),e.previousMatch.classList.remove("disabled"),e.nextMatch.classList.remove("disabled")}else e.previousMatch.classList.add("disabled"),e.nextMatch.classList.add("disabled")}catch(i){console.error(i)}finally{if(n!==e.searchContext)return;e.searchLoading.classList.add("hiddenImportant")}}async function Sn(e,t,n){if(!e.logEntryList.isLoaded(n.id)){const o=re(await e.channel.api.getLogEntryDetails(n.id));Fn(n.id,o,n.args,e,t);const i=e.searchResultsById[n.id];if(i){const l=t.querySelector(".log-details .container");i.detailCount=fe(l,e.searchRegexHtmlEncoded,`match-${i.id}-d-`),e.searchResults[e.currentMatchIdx].id===n.id&&(e.currentMatchType==="summary"&&i.detailCount?Pe(e):e.currentMatchType==="detail"&&i.detailCount?(e.currentMatchCount===Number.NEGATIVE_INFINITY?e.currentMatchCount=0:e.currentMatchCount===Number.POSITIVE_INFINITY&&(e.currentMatchCount=i.detailCount-1),Se(e)):e.currentMatchCount===Number.NEGATIVE_INFINITY?Pe(e):e.currentMatchCount===Number.POSITIVE_INFINITY&&Tt(e))}}}function It(e,t,n,o){if(!e)return"";if(e.nodeType===Node.TEXT_NODE){const i=n.split("/").map(s=>parseInt(s,10));i.pop();const l=xt(e.nodeValue||"");return o.push({offset:t.length,length:l.length,path:i}),t+l}else if(e.nodeType===Node.ELEMENT_NODE){const i=e;(i.tagName==="BR"||i.tagName==="P")&&(t+=`
`);let l=0;for(const s of i.childNodes)t=It(s,t,n?`${n}/${l}`:`${l}`,o),l++;(i.tagName==="BR"||i.tagName==="P")&&(t+=`
`)}return t}function Tn(e,t){let n=e;for(const o of t)n=n.childNodes[o];return n}function St(e){document.querySelectorAll(".find-match").forEach(t=>{t.outerHTML=t.innerHTML}),e.searchLoading.classList.add("hiddenImportant"),e.searchContext=0,e.searchResults=[],e.searchResultsById={}}function fe(e,t,n){let o=0;const{searchText:i,pathOffsets:l}=In(e),s={};let g;for(;(g=t.exec(i))!==null;){const r=g.index,c=g[0].length,u=r+c,d=`<span class="find-match ${n}${o}">`,a="</span>";o++;const m=d.length+a.length;for(const f of l.values()){if(f.offset>u)break;if(r>f.offset+f.length)continue;const y=Tn(e,f.path);if(!y)continue;const L=s[f.path.join("/")]||0,C=Math.max(0,r-f.offset)+L,M=Math.min(y.innerHTML.length,u-f.offset)+L;M>C&&(s[f.path.join("/")]=L+m,y.innerHTML=y.innerHTML.substring(0,C)+d+y.innerHTML.substring(C,M)+a+y.innerHTML.substring(M))}}return o}function ge(e){let t=e.classList.contains("log-item")?e:e.parentElement;for(;t&&!(t!=null&&t.classList.contains("log-item"));)t=t.parentElement;if(t){const n=t.querySelector(".expander"),o=t.querySelector(".log-details .container");o?o.classList.contains("hiddenImportant")&&(n==null||n.onclick({})):t.classList.add(wt)}}function Tt(e){let t=!1,n=!1;for(;!t;){if(e.currentMatchIdx<0){if(n)return;e.currentMatchType,e.currentMatchIdx=e.searchResults.length-1,e.currentMatchCount=Number.POSITIVE_INFINITY,n=!0}e.currentMatchType==="summary"?(e.currentMatchCount===Number.POSITIVE_INFINITY?(e.currentMatchCount=e.searchResults[e.currentMatchIdx].summaryCount-1,e.searchResults[e.currentMatchIdx].detailCount!==void 0&&e.searchResults[e.currentMatchIdx].detailCount>0&&(e.currentMatchCount=-1)):e.currentMatchCount--,e.currentMatchCount>=0?t=!0:(e.currentMatchType="detail",e.currentMatchCount=Number.POSITIVE_INFINITY,e.currentMatchIdx--)):e.currentMatchType==="detail"&&(e.searchResults[e.currentMatchIdx].detailCount===void 0?e.currentMatchCount===Number.NEGATIVE_INFINITY?(e.currentMatchType="summary",e.currentMatchCount=-1,e.currentMatchIdx--):t=!0:(e.currentMatchCount===Number.NEGATIVE_INFINITY?e.currentMatchCount=0:e.currentMatchCount===Number.POSITIVE_INFINITY?e.currentMatchCount=e.searchResults[e.currentMatchIdx].detailCount-1:e.currentMatchCount--,e.currentMatchCount>=0&&e.currentMatchCount<e.searchResults[e.currentMatchIdx].detailCount?t=!0:(e.currentMatchType="summary",e.currentMatchCount=Number.POSITIVE_INFINITY)))}Se(e)}function Pe(e){var o;let t=!1,n=!1;for(;!t;){if(e.currentMatchIdx>=e.searchResults.length){if(n)return;e.currentMatchType,e.currentMatchIdx=0,e.currentMatchCount=-1,n=!0}e.currentMatchType==="summary"?(e.currentMatchCount++,e.currentMatchCount<e.searchResults[e.currentMatchIdx].summaryCount&&(e.searchResults[e.currentMatchIdx].detailCount===void 0||e.searchResults[e.currentMatchIdx].detailCount===0)?t=!0:(e.currentMatchType="detail",e.currentMatchCount=Number.NEGATIVE_INFINITY)):e.currentMatchType==="detail"&&(((o=e.searchResults[e.currentMatchIdx])==null?void 0:o.detailCount)===void 0?e.currentMatchCount===Number.POSITIVE_INFINITY?(e.currentMatchType="summary",e.currentMatchCount=-1,e.currentMatchIdx++):t=!0:(e.currentMatchCount===Number.POSITIVE_INFINITY?e.currentMatchCount=e.searchResults[e.currentMatchIdx].detailCount-1:e.currentMatchCount===Number.NEGATIVE_INFINITY?e.currentMatchCount=0:e.currentMatchCount++,e.currentMatchCount<e.searchResults[e.currentMatchIdx].detailCount?t=!0:(e.currentMatchType="summary",e.currentMatchCount=-1,e.currentMatchIdx++)))}Se(e)}function et(e,t){const n=t.classList.contains("log-item")?t:t.closest(".log-item"),o=t.closest(".page p");o&&o.dispatchEvent(gn),z(e,n,!1)}function Se(e,t){if(document.querySelectorAll(".find-match-current").forEach(l=>{l.classList.remove("find-match-current")}),e.searchResults.length===0)return;const n=`.match-${e.searchResults[e.currentMatchIdx].id}-${e.currentMatchType==="summary"?"s":"d"}-${e.currentMatchCount}`,o=j(e)==="logs";let i=!(t!=null&&t.searchResults);if(document.querySelectorAll(n).forEach(l=>{l.classList.add("find-match-current"),i&&(i=!1,et(e,l),o&&ge(l),qe(e,l))}),o&&(i||(t==null?void 0:t.searchResults))){const l=e.logEntryList.getElementById(e.searchResults[e.currentMatchIdx].id);l&&(i&&(et(e,l),ge(l)),qe(e,l))}}function Nt(e,t){e.autoscrollValue=t,e.autoscroll.title="Turn Auto Scrolling "+(e.autoscrollValue?"Off":"On");const n=e.autoscroll.firstChild;n.ariaLabel=e.autoscroll.title,e.autoscrollValue?(e.scrollPositionBottom=!0,n.classList.remove("codicon-unlock"),n.classList.add("codicon-lock")):(n.classList.add("codicon-unlock"),n.classList.remove("codicon-lock"))}function Dt(e,t){e.autoclearValue=t,e.autoclear.title="Turn Auto Clearing After Any File Change "+(e.autoclearValue?"Off":"On");const n=e.autoclear.firstChild;n.ariaLabel=e.autoclear.title,e.autoclearValue?n.classList.add("selected-icon-state"):n.classList.remove("selected-icon-state")}function _t(e,t,n){const o=t!=="None";e.showDateTimeValue=o,e.simpleDateTimeDisplayMode=n,n?e.showDateTime.title=`${o?"Do Not Show":"Show"} Log Entry Date and Time`:e.showDateTime.title="Change Date and Time Display Mode";const i=e.showDateTime.firstChild;i.ariaLabel=e.showDateTime.title,e.showDateTimeValue?i.classList.add("selected-icon-state"):i.classList.remove("selected-icon-state")}function Nn(e){return e==="next.js browser"||e==="remix browser"||e==="astro browser"||e==="nest.js"?"window":e==="next.js server"||e==="remix server"||e==="astro server"?"server-environment":e==="vite"?"symbol-event":e==="webpack"?"symbol-method":e==="live-server-extension"?"broadcast":e==="jest"||e==="wallaby runner"?"beaker":e==="cypress"?"globe":e==="node"||e==="wallaby core"?"terminal":"server-process"}function Dn(e){e.entryToolInserter=e.viewerOpts.mergeMultiToolLogs?(t,n)=>{const o=Nn(t.tool),i=document.createElement("span");i.title=t.tool,i.className="log-tool",n.appendChild(i),i.classList.add("codicon"),i.classList.add(`codicon-${o}`)}:()=>{}}function Mt(e,t,n){const o=t==="Absolute"?({ts:i})=>dn(new Date(i)).format(n):t==="Relative To Oldest"?({ts:i,oldestTs:l})=>Ze((l>0?`${Qe(i-l)}`:"").padEnd(6),6):t==="Relative To Previous"?({ts:i,previousTs:l})=>{const s=l();return Ze((s>0?`${Qe(i-s)}`:"").padEnd(6),6)}:()=>"";e.entryDateInserter=t==="None"?()=>{}:({ts:i,oldestTs:l,previousTs:s},g)=>{const r=document.createElement("span");r.className="log-date",g.appendChild(r),r.textContent=o({ts:i,oldestTs:l,previousTs:s})}}function kt(e,t){e.fontSize=t;const n=document.querySelector(":root");if(n){const o=n.style,i=t*14/10;e.watchMinHeight=i+9,e.watchMinWidth=100,o.setProperty("--console-ninja-logItemLocationPaddingLeft",`${t*8/10}px`),o.setProperty("--console-ninja-logDateMarginLeft",`${t*2/10}px`),o.setProperty("--console-ninja-logDateMarginRight",`${t*5/10}px`),o.setProperty("--console-ninja-logItemsFontSize",`${t}px`),o.setProperty("--console-ninja-logItemsExpanderIconFontSize",`${t*16/10}px`),o.setProperty("--console-ninja-logItemsLineHeight",`${i}px`),o.setProperty("--console-ninja-watchMinHeight",`${e.watchMinHeight}px`),o.setProperty("--console-ninja-watchMinWidth",`${e.watchMinWidth}px`),o.setProperty("--console-ninja-logItemsPageHeight",`${i*e.viewerOpts.pageSize}px`)}}function At(e,t){e.viewerOpts=t,e.viewerOpts.renderLogEntryActions?e.filter.classList.remove("hiddenImportant"):e.filter.classList.add("hiddenImportant")}function z(e,t,n=!0){e.focusedLogEntry&&(e.focusedLogEntry.tabIndex=-1,e.focusedLogEntry.querySelectorAll("a").forEach(o=>o.tabIndex=-1),B(e),Pn(e,e.focusedLogEntry),t!==e.focusedLogEntry&&me(e)),t?(e.focusedLogEntry=t,e.focusedLogEntry.tabIndex=0,e.focusedLogEntry.querySelectorAll("a:not(.not-tabable)").forEach(o=>o.tabIndex=0),n&&(e.focusedLogEntry.focus(),Pt(e,t))):(e.focusedLogEntry=void 0,B(e))}function me(e){Fe(e,!1),yn()}function Fe(e,t){t?(e.breadcrumbs.classList.add("active"),e.header.classList.remove("active")):(e.breadcrumbs.classList.remove("active"),e.header.classList.add("active"))}function _n(e){return e.breadcrumbs.classList.contains("active")}function Pt(e,t){if(!e.viewerOpts.renderLogEntryActions)return;const n=t.classList.contains("log-watch"),o=n?t.querySelector(".actions"):t.querySelector(".log-item-location");if(!o)return;n||(o.querySelector("a").className="log-item-location-link");let i=o.querySelector(".log-actions");i?i.classList.remove("hiddenImportant"):(n||(o.style.display="flex"),i=document.createElement("div"),i.innerHTML=`${n?`<a
        href="#"
        class="copy-action codicon codicon-copy not-tabable"
        role="button"
        tabindex="-1"
        title="Copy Log Entry To Clipboard (${ie} + C)"
      ></a>`:`<a
        href="#"
        class="expand-action codicon codicon-lightbulb not-tabable"
        role="button"
        tabindex="-1"
        title="Open Context Menu (${ie} + .)"
      ></a>`}`,i.className="log-actions",n?(i.querySelector("a.copy-action").onclick=l=>{$e(e,t),l.preventDefault(),l.stopPropagation()},o.prepend(i)):(i.querySelector("a.expand-action").onclick=l=>{Ft(e,l),l.preventDefault(),l.stopPropagation()},o.appendChild(i)))}function Ft(e,t){if(e.focusedLogEntry===void 0)return;const n=e.contextWidget.querySelector("a.highlight-action");e.focusedLogEntry.classList.contains(Q)?n.textContent="Unhighlight entries for this file/line":n.textContent="Highlight entries for this file/line";const o=e.contextWidget.querySelector("a.show-location-action"),i=e.contextWidget.querySelector("a.show-file-action"),l=e.contextWidget.querySelector("a.hide-location-action"),s=e.contextWidget.querySelector("a.hide-file-action"),g=e.contextWidget.querySelector("a.reset-filter-action");e.logEntryList.canAddToFilter(e.focusedLogEntry.data,"showLocation")?o.parentElement.classList.remove("hiddenImportant"):o.parentElement.classList.add("hiddenImportant"),e.logEntryList.canAddToFilter(e.focusedLogEntry.data,"showFile")?i.parentElement.classList.remove("hiddenImportant"):i.parentElement.classList.add("hiddenImportant"),e.logEntryList.canAddToFilter(e.focusedLogEntry.data,"hideLocation")?l.parentElement.classList.remove("hiddenImportant"):l.parentElement.classList.add("hiddenImportant"),e.logEntryList.canAddToFilter(e.focusedLogEntry.data,"hideFile")?s.parentElement.classList.remove("hiddenImportant"):s.parentElement.classList.add("hiddenImportant"),e.logEntryList.filter!==void 0?g.parentElement.classList.remove("hiddenImportant"):g.parentElement.classList.add("hiddenImportant"),e.contextWidget.classList.remove("hiddenImportant"),t?e.contextWidget.querySelector(".header").classList.remove("hiddenImportant"):e.contextWidget.querySelector(".header").classList.add("hiddenImportant"),e.contextWidget.querySelectorAll("li").forEach(m=>{m.classList.remove("selected")}),e.contextWidget.querySelector("a.copy-action").parentElement.classList.add("selected");const r=e.contextWidget.offsetHeight,c=10,u=(t==null?void 0:t.clientY)||e.focusedLogEntry.getBoundingClientRect().top+e.focusedLogEntry.getBoundingClientRect().height/2;e.contextWidget.style.maxHeight="unset";const d=u+r+c<e.contextWidget.parentElement.offsetHeight,a=u-r-c>0;!d&&!a&&(e.contextWidget.style.maxHeight=`${e.contextWidget.parentElement.offsetHeight}px`),e.contextWidget.style.top=`${d?u+c:a?u-r-c:0}px`,e.contextWidget.style.right=`${c*3}px`}function B(e){e.contextWidget.classList.add("hiddenImportant")}function tt(e){return!e.contextWidget.classList.contains("hiddenImportant")}async function Mn(e,t,n){if(e.codePreviewerLocation!==t)return;const o=e.codePreviewerWidget,i=await e.channel.api.highlight({file:t.file,line:t.line});if(e.codePreviewerLocation!==t||!i)return;o.onmouseover=()=>{e.codePreviewerLocation=t},o.onmouseout=()=>$t(e),o.style.left="unset",o.style.right="unset",o.innerHTML=i.text;const l=document.createElement("div");l.classList.add("file-name");let s=qt(t.file)||"",g=e.projectFolder;s=nt(s),g&&(g=nt(g)),g&&(s.startsWith(g)||Ie&&s.toLowerCase().startsWith(g.toLowerCase()))&&(s=s.slice(g.length),(s.startsWith("/")||s.startsWith("\\"))&&(s=s.slice(1))),l.textContent=`${s}:${t.line}`,o.insertBefore(l,o.firstChild);const r=Array.from(o.querySelectorAll("p"));r[t.line-i.minLine].classList.add("median");const u=i.maxLine.toString().length;for(let _=0;_<r.length;_++){const $=r[_],W=_+i.minLine,S=document.createElement("span");S.classList.add("line-number"),S.textContent=`${W}`.padStart(u," "),$.insertBefore(S,$.firstChild)}const d=/^\s+/u,a=Array.from(o.querySelectorAll("span:first-child"));if(!a.some(_=>!d.test(_.textContent||""))){const _=Math.min(...a.map($=>{if(!$.textContent)return 0;const W=$.textContent.match(d);return W?W[0].length:0}));a.forEach($=>$.textContent=($.textContent||"").slice(_))}o.classList.remove("hiddenImportant");const m=o.offsetHeight,f=o.offsetWidth,y=10,L=n.clientY,C=n.clientX;o.style.maxHeight="unset";const M=L+m+y<o.parentElement.offsetHeight,P=L-m-y>0;!M&&!P&&(o.style.maxHeight=`${o.parentElement.offsetHeight}px`),o.style.top=`${M?L+y:P?L-m-y:0}px`;const O=C+f<o.parentElement.offsetWidth;C-f>0?o.style.right=`${o.parentElement.offsetWidth-C}px`:O&&(o.style.left=`${C}px`)}const kn=Ve(Mn,100);function An(e,t,n){t.file&&(e.codePreviewerLocation=t,kn(e,t,n))}function $t(e){e.codePreviewerLocation=void 0,setTimeout(()=>e.codePreviewerLocation===void 0&&e.codePreviewerWidget.classList.add("hiddenImportant"),150)}function Le(e,t,n){!e.logEntryList.canAddToFilter(t.data,n)||(e.logEntryList.addToFilter(t.data,n),e.channel.api.updateFilter(e.logEntryList.filter),G(e,e.focusedLogEntry?{id:e.focusedLogEntry.data.id}:void 0),Be(e))}function _e(e){e.logEntryList.filter!==void 0&&(e.logEntryList.resetFilter(),e.channel.api.updateFilter(),G(e,e.focusedLogEntry?{id:e.focusedLogEntry.data.id}:void 0),Be(e))}function Be(e){e.logEntryList.filter!==void 0?(e.filter.classList.remove("disabled-icon-state"),e.filter.classList.add("selected-icon-state"),e.filter.title="Clear Active Filter (Shift + Escape)"):(e.filter.classList.add("disabled-icon-state"),e.filter.classList.remove("selected-icon-state"),e.filter.title="Filter (use log entry context lightbulb menu to set)")}function Pn(e,t){if(!e.viewerOpts.renderLogEntryActions||t.classList.contains("log-watch"))return;let n=t.querySelector(".log-actions");n&&n.classList.add("hiddenImportant")}function $e(e,t){const n=e.logEntryList.getId(t);n&&e.channel.api.copyLogEntryDetails(n)}function je(e,t){e.selectedTool||(e.selectedTool=t.tool),e.viewerOpts.mergeMultiToolLogs&&(e.selectedTool=void 0),e.tools[t.tool]||(e.tools[t.tool]=!0,Qt(e))}function Re(e){e.selectedTool&&!e.viewerOpts.mergeMultiToolLogs?e.multiToolUseDetected&&(e.logsName.innerText=e.selectedTool+" Logs"):e.logsName.innerText="Logs"}function we(e,t){let n=e.querySelector(".log-group-count");n||(n=document.createElement("span"),n.className="log-group-count",e.insertBefore(n,e.querySelector(".log-message"))),n.textContent=t?`x${t+1}`:""}function Rt(e,t,n,o,i,l,s,g,r,c,u,d,a,m,f,y){if(je(t,n),t.selectedTool&&t.selectedTool!==n.tool)return null;const L=document.createElement("div");L.className="log-item";const C=document.createElement("div");C.className="log-summary",C.title=m||"",L.appendChild(C);const M=document.createElement("div");M.className="expander codicon codicon-chevron-right",C.appendChild(M);const P=document.createElement("div");P.className="log-item-content",C.appendChild(P),t.entryDateInserter({ts:i,oldestTs:t.logEntryList.getFirstElementTimestamp(),previousTs:()=>{var w,x;const h=t.logEntryList.getPreviousElementIndex(o);return h>=0?(x=(w=t.logItems.children[h])==null?void 0:w.data)==null?void 0:x.ts:0}},P),t.entryToolInserter(n,P);const O=document.createElement("span");O.className="log-message log-highlighting",P.appendChild(O);const q=document.createElement("div");q.className="log-item-location",C.appendChild(q);const _=document.createElement("a");_.href="#",_.tabIndex=-1,document.dispatchEvent(new CustomEvent(pe,{detail:{link:_,loc:{file:g.file.startsWith("file")||g.file.startsWith("http")?g.file:he(g.file),line:g.line}}})),q.appendChild(_),s&&we(P,s);const $=document.createElement("div");$.className="log-details log-highlighting",L.appendChild($);const W=document.createElement("div");W.className="container hiddenImportant",$.appendChild(W),e&&e.appendChild(L),O.appendChild(c),W.appendChild(u);const S=_;if(S.textContent=d,S.textContent.length>t.niceFileLocationLength){const h=d.length*(Ln*t.fontSize/10)+8;t.niceFileLocationLength=d.length;const w=document.getElementById("styleOverride");w&&(w.innerHTML=`.log-item-width { width: ${h}px; }`)}q.classList.add("log-item-width"),S.onclick=h=>{h.preventDefault(),f()};const D=P;D.onclick=h=>{if(L.tabIndex===0){const w=document.getSelection();(w==null?void 0:w.type)!=="Range"&&(E(b,p),h.preventDefault(),h.stopPropagation())}},L.onclick=h=>{L.tabIndex!==0&&z(t,L),h.preventDefault(),h.stopPropagation()};function ee(h){const w=h.querySelector(".expander"),x=h.querySelector(".log-details .container");return{expander:w,logDetails:x}}function te(h,w){h.classList.remove("codicon-chevron-down"),h.classList.add("codicon-chevron-right"),w.classList.add("hiddenImportant")}function I(h,w){h.classList.add("codicon-chevron-down"),h.classList.remove("codicon-chevron-right"),w.classList.remove("hiddenImportant"),y(L)}function E(h,w){w.classList.contains("hiddenImportant")?I(h,w):te(h,w)}const p=W,b=M;return Wt(t,p),b.onclick=async h=>{E(b,p),h&&h.preventDefault&&h.preventDefault()},L.onkeydown=h=>{var w,x,N;if(!p.isContentEditable){let A=null;if(h.key==="ArrowDown"||h.key==="ArrowUp")if(tt(t)){const T=t.contextWidget.querySelector(".selected");T.classList.remove("selected"),h.key==="ArrowDown"?(w=We(T,"down"))==null||w.classList.add("selected"):h.key==="ArrowUp"&&((x=We(T,"up"))==null||x.classList.add("selected")),(N=t.contextWidget.querySelector(".selected"))==null||N.scrollIntoView({block:"nearest"}),h.preventDefault()}else h.key==="ArrowDown"?A=L.nextElementSibling:h.key==="ArrowUp"&&(A=L.previousElementSibling),A&&(z(t,A),h.preventDefault());if(h.key===" ")E(b,p),h.preventDefault();else if(h.key==="Enter")if(tt(t))t.contextWidget.querySelector(".selected a").click(),h.preventDefault();else{const T=h.target;b.classList.contains("codicon-chevron-down")&&T&&T.nodeName!=="A"&&(p.contentEditable="true",p.focus({preventScroll:!0}),t.enteredLogEntry=p,h.preventDefault())}else h.key==="ArrowRight"?(I(b,p),h.preventDefault()):h.key==="ArrowLeft"&&(h.ctrlKey||h.metaKey?document.querySelectorAll(".log-item").forEach(T=>{if(T.childElementCount){const{expander:H,logDetails:Y}=ee(T);te(H,Y)}}):te(b,p),h.preventDefault());t.viewerOpts.renderLogEntryActions&&(h.metaKey||h.ctrlKey)&&h.key==="."&&(Ft(t),h.preventDefault())}},t.logEntryList.addElement({id:o,ts:i,hash:l,duplicateCount:s,...g,args:r},L),L.addEventListener(Et,()=>{we(P,t.logEntryList.getDuplicateCount(L))}),L}function We(e,t,n=0){if(!e||e.parentElement.childElementCount<n)return;const o=t==="down"?e.nextElementSibling||e.parentElement.firstElementChild:e.previousElementSibling||e.parentElement.lastElementChild;return o.classList.contains("hiddenImportant")?We(o,t,++n):o}function Wt(e,t){t.onblur=()=>{t.contentEditable="false",delete e.enteredLogEntry},t.oncut=()=>!1,t.onpaste=()=>!1,t.onkeydown=n=>{var o,i,l;if(t.isContentEditable){if(n.key==="Escape"&&(t.contentEditable="false",delete e.enteredLogEntry,(o=window.getSelection())==null||o.empty(),t.closest(".log-item").focus({preventScroll:!0}),n.preventDefault(),n.stopPropagation(),me(e)),n.key==="Enter"){const s=window.getSelection();if(s&&s.anchorNode){if(s.anchorNode.textContent){for(const g of t.querySelectorAll("a"))if((i=g.textContent)!=null&&i.includes(s.anchorNode.textContent)){g.click();break}}if(e.viewerOpts.renderNodeExpansionControls){const g=(l=s.anchorNode.parentElement)==null?void 0:l.closest(".page p");g&&g.dispatchEvent(mn)}}n.preventDefault()}n.key!=="ArrowDown"&&n.key!=="ArrowUp"&&n.key!=="ArrowLeft"&&n.key!=="ArrowRight"&&n.key!=="Home"&&n.key!=="End"&&n.key!=="PageUp"&&n.key!=="PageDown"&&n.preventDefault()}},t.onkeyup=()=>{var n,o;if(t.isContentEditable&&e.viewerOpts.renderBreadcrumbs){const i=window.getSelection(),l=(o=(n=i==null?void 0:i.focusNode)==null?void 0:n.parentElement)==null?void 0:o.closest("p");l&&l.dispatchEvent(pn)}}}function Ht(e,t){if(e.selectedTool&&cn(e.selectedTool)!==t.session.tool||!t.mtime)return;const n=e.logItems.children;for(let o=n.length-1;o>=0;o--){const i=n[o];if(i.classList.contains("pre-file-change"))break;(e.logEntryList.getTimestamp(i)||0)<t.mtime&&(i.classList.add("pre-file-change"),i.classList.remove(Q),i.classList.remove("checkpoint"),i.className=i.className.replace(ze,""))}}function nt(e){return Ie?e.replace(/\//gu,"\\"):e.replace(/\\/gu,"/")}function qt(e){const t=new URL(e).pathname;let n=decodeURIComponent(t);return Ie&&n.startsWith("/")&&(n=n.slice(1)),n}function ot(e){if(e===void 0)return;const t=qt(e.source);if(t!==void 0)return{file:t,line:e.line}}function Ot(e,t,n){if(e.selectedTool&&e.selectedTool!==t.session.tool||!e.logEntryList.canAdd(ot(t.stack[0]))||Ye(e,t,n))return;const o=document.createDocumentFragment(),i=document.createDocumentFragment(),l=document.createElement("span");l.className="error-log-message",l.textContent=t.message,o.appendChild(l);const s=document.createElement("span");s.className="error-log-message",s.textContent=t.message;const g=d=>{const a=document.createElement("span");return a.textContent=d,a};i.appendChild(s),t.stack.forEach(d=>{if(i.appendChild(document.createElement("br")),i.appendChild(g(" ")),i.appendChild(g(" ")),i.appendChild(g("at")),i.appendChild(g(" ")),d.context){const a=document.createElement("span");a.className="error-context function",a.textContent=d.context.trim(),i.appendChild(a),i.appendChild(g(" "))}if(d.source){const a=document.createElement("a");a.className="error-source",a.textContent=`${Ee(d.source,50)}:${d.line}:${d.column}`,a.href="#",a.onclick=m=>{m.preventDefault(),e.channel.api.navigate(d.source,d.line,d.column)},document.dispatchEvent(new CustomEvent(pe,{detail:{link:a,loc:{file:d.source,line:d.line}}})),i.appendChild(a)}});let r="",c="";t.stack.length&&(r=Ee(t.stack[0].source)+":"+t.stack[0].line+":"+t.stack[0].column,c=t.stack[0].source+":"+t.stack[0].line+":"+t.stack[0].column);const u=Rt(n,e,t.session,t.id,t.ts,t.hash,void 0,ot(t.stack[0])||{file:"",line:0},void 0,o,i,r,c,void 0,()=>{t.stack.length&&e.channel.api.navigate(t.stack[0].source,t.stack[0].line,t.stack[0].column)},()=>{});u&&u.addEventListener(xe,()=>{we(u.querySelector(".log-item-content"),e.logEntryList.incrementDuplicateCount(u))}),le(e),ce(e,e.logItems.lastElementChild)}async function Fn(e,t,n,o,i){o.logEntryList.setLoaded(e);const l=i.querySelector(".log-details .container"),s=Vt(o,t,n);l==null||l.replaceChildren(),l==null||l.appendChild(s)}function Vt(e,t,n){const o=document.createDocumentFragment();if(n.length===t.length)n.forEach((i,l)=>{if(t[l]){if(i.context){const r=document.createElement("p");r.className="log-context",r.textContent=`${i.context}:`,o.appendChild(r)}const s=pt(t[l],e.channel.api,"details",e.viewerOpts),g=document.createElement("div");g.className="log-text",g.appendChild(s),o.appendChild(g)}});else{const i=document.createElement("span");i.className="error-log-message",i.textContent="Log details are no longer available.",o.appendChild(i)}return o}function $n(){return`<div class="log-watch log-items log-item log-details log-highlighting" tabIndex=0>
  <div class="content-container">
    <div class="header">
      <div class="context"></div>
      <div class="location"></div>
      <div class="actions">
        <a class="codicon codicon-close not-tabable" href="#" tabindex="-1" title="Close (${ie} + W)"></a>
      </div>
    </div>
    <div class="container"></div>
  </div>
  <div class="resizer top-left"></div>
  <div class="resizer top-right"></div>
  <div class="resizer bottom-left"></div>
  <div class="resizer bottom-right"></div>
  <div class="resizer top"></div>
  <div class="resizer bottom"></div>
  <div class="resizer left"></div>
  <div class="resizer right"></div>
</div>`}let oe=100;function zt(e,t){let n=0,o=0,i=0,l=0,s=!1;e.classList.add("draggable"),e.onmousedown=u,t.onmousedown=g;function g(d){s=!0,u(),i=d.clientX,l=d.clientY,document.onmouseup=c,document.onmousemove=r,document.onmouseenter=a=>{s&&a.buttons!==1&&c(a)},d.preventDefault()}function r(d){n=i-d.clientX,o=l-d.clientY,i=d.clientX,l=d.clientY,e.style.top=e.offsetTop-o+"px",e.style.left=e.offsetLeft-n+"px",d.preventDefault(),d.stopPropagation()}function c(d){s=!1,document.onmouseup=null,document.onmousemove=null,document.onmouseleave=null,d.preventDefault()}function u(d){oe++,e.style.zIndex=""+oe,oe>1e4&&(oe=100),d==null||d.preventDefault()}}function Rn(e,t){e.classList.remove("draggable"),e.onmousedown=null,t.onmousedown=null}function Bt(e,t){e.classList.add("resizable");const n=e.querySelectorAll(".resizer"),o=20;let i=0,l=0,s=0,g=0,r=0,c=0;for(let u=0;u<n.length;u++){let d=function(f){if(m.classList.contains("top")){const y=l-(f.pageY-c);y>o&&(e.style.height=y+"px",e.style.top=g+(f.pageY-c-t)+"px")}else if(m.classList.contains("bottom")){const y=l+(f.pageY-c);y>o&&(e.style.height=y+"px")}else if(m.classList.contains("left")){const y=i-(f.pageX-r);y>o&&(e.style.width=y+"px",e.style.left=s+(f.pageX-r)+"px")}else if(m.classList.contains("right")){const y=i+(f.pageX-r);y>o&&(e.style.width=y+"px")}else if(m.classList.contains("bottom-right")){const y=i+(f.pageX-r),L=l+(f.pageY-c);y>o&&(e.style.width=y+"px"),L>o&&(e.style.height=L+"px")}else if(m.classList.contains("bottom-left")){const y=l+(f.pageY-c),L=i-(f.pageX-r);y>o&&(e.style.height=y+"px"),L>o&&(e.style.width=L+"px",e.style.left=s+(f.pageX-r)+"px")}else if(m.classList.contains("top-right")){const y=i+(f.pageX-r),L=l-(f.pageY-c);y>o&&(e.style.width=y+"px"),L>o&&(e.style.height=L+"px",e.style.top=g+(f.pageY-c-t)+"px")}else{const y=i-(f.pageX-r),L=l-(f.pageY-c);y>o&&(e.style.width=y+"px",e.style.left=s+(f.pageX-r)+"px"),L>o&&(e.style.height=L+"px",e.style.top=g+(f.pageY-c-t)+"px")}f.preventDefault()},a=function(){window.removeEventListener("mousemove",d)};const m=n[u];e.appendChild(m),m.addEventListener("mousedown",function(f){f.preventDefault(),i=parseFloat(getComputedStyle(e,null).getPropertyValue("width").replace("px","")),l=parseFloat(getComputedStyle(e,null).getPropertyValue("height").replace("px","")),s=e.getBoundingClientRect().left,g=e.getBoundingClientRect().top,r=f.pageX,c=f.pageY,window.addEventListener("mousemove",d),window.addEventListener("mouseup",a)})}}function Wn(e){e.classList.remove("resizable")}function Ce(e,t){e.watchesContainer.removeChild(t.element),e.channel.api.closeWatch(t.location),e.watchData.entries.delete(R(t.location)),Te(e),e.watchData.entries.size===0&&(e.logView.click(),Ke(e))}function jt(e,t,n){const o=t.querySelector(".location"),i=`${Ee(n.file)}:${n.line}`;o.replaceChildren();const l=document.createElement("a");l.href="#",l.textContent=i,l.onclick=s=>{s.preventDefault(),e.channel.api.navigate(he(n.file),n.line)},document.dispatchEvent(new CustomEvent(pe,{detail:{link:l,loc:{file:n.file.startsWith("file")||n.file.startsWith("http")?n.file:he(n.file),line:n.line}}})),o.appendChild(l)}function Hn(e,t,n){const o=t.querySelector(".context");o.textContent=n.join(", ")}function be(e,t){if(!t){e.watchData.entries.forEach(l=>{be(e,l.location)});return}const n=R(t);if(!n)return;const o=e.watchData.entries.get(n);if(!o)return;const i=e.logEntryList.getHighlight(t);i?(o.header.classList.add(Zt(i.key)),o.header.classList.add("highlight-header")):Ge(o.header)}async function Yt(e,t){var c;const n=R(t);if(!n)return;const o=await e.channel.api.getLogEntryDataWithDetails(t);if(!o)return;const i=o.logEntry,l=re(o.details);let s=e.watchData.entries.get(n);s||(s=zn(e,i),e.watchData.entries.set(n,s),Te(e),jt(e,s.header,t),be(e,t),Ke(e)),s.entryId=i.id,s.element.data={...i,ts:0,index:0};const g=i.args?i.args.length>1?i.args:[{context:void 0}]:[],r=Vt(e,l,g);s.details.replaceChildren(r),Pt(e,s.element),Hn(e,s.header,((c=i.args)==null?void 0:c.map(u=>u.context||"").filter(u=>u))||[])}function qn(e){return e.logs.classList.contains("hiddenImportant")?e.watchesContainer.offsetHeight:e.logsContainer.offsetHeight}function On(e){return e.logs.classList.contains("hiddenImportant")?e.watchesContainer.offsetWidth:e.logsContainer.offsetWidth}function Te(e){e.watches.querySelectorAll(".layout-resizer").forEach(d=>d.remove());const t=Array.from(e.watchData.entries.values()),n=100/t.length;let o=0;const i=e.orientation==="vertical",l=i?(d,a)=>{d.top=a}:(d,a)=>{d.left=a},s=i?(d,a)=>{d.left=a}:(d,a)=>{d.top=a},g=i?(d,a)=>{d.bottom=a}:(d,a)=>{d.right=a},r=i?(d,a)=>{d.right=a}:(d,a)=>{d.bottom=a},c=i?(d,a)=>{d.width=a}:(d,a)=>{d.height=a},u=i?(d,a)=>{d.height=a}:(d,a)=>{d.width=a};if(e.watchData.layout==="manual")for(let d=0;d<t.length;d++){const a=t[d];if(a.layoutApplied){o+=n/2;continue}l(a.element.style,o+"%"),g(a.element.style,"unset"),s(a.element.style,Math.random()*10+d/2*(25*Math.random())/t.length+"%"),r(a.element.style,"unset"),c(a.element.style,85-d*25*Math.random()/t.length+"%"),u(a.element.style,n-5+"%"),o+=n,zt(a.element,a.header),Bt(a.element,e.watches.offsetTop),a.layoutApplied=!0}else if(e.watchData.layout==="auto"){const d=i?100*e.watchMinHeight/qn(e):100*e.watchMinWidth/On(e),a=[],m=[],f=[];for(let L=0;L<t.length;L++){const C=t[L];let M;C.defaultSizeChangeFactor!==1?M=n*C.defaultSizeChangeFactor:M=n,a.push({percent:M}),M<d?m.push(a[L]):C.defaultSizeChangeFactor>1&&f.push(a[L])}const y=m.reduce((L,C)=>{const M=d-C.percent;return C.percent=d,L+M},0);if(y>0&&f.length>0){const L=y/f.length;for(let C=0;C<f.length;C++)f[C].percent-=L}for(let L=0;L<t.length;L++){const C=t[L];l(C.element.style,o===0?"1px":o+"%"),o+=a[L].percent,g(C.element.style,L===t.length-1?"0":100-o+"%"),s(C.element.style,"1px"),r(C.element.style,i?"1px":"0px"),c(C.element.style,"unset"),u(C.element.style,"unset"),Rn(C.element,C.header),Wn(C.element),C.layoutApplied=!0,L>0&&e.watches.appendChild(Vn(t[L-1],C,i))}}}function Vn(e,t,n){const o=document.createElement("div");o.className="layout-resizer",n?o.style.top=t.element.style.top:o.style.left=t.element.style.left,o.onmousedown=s;let i=0,l;function s(c){l={e:c,offset:n?o.offsetTop+o.offsetHeight/2:o.offsetLeft+o.offsetWidth/2,firstSize:n?e.element.offsetHeight:e.element.offsetWidth,secondSize:n?t.element.offsetHeight:t.element.offsetWidth,parentSize:n?o.parentElement.offsetHeight:o.parentElement.offsetWidth,minSize:n?e.header.offsetHeight:Number(window.getComputedStyle(e.element,null).getPropertyValue("min-width").replace("px",""))+5},document.onmousemove=g,document.onmouseup=u=>{document.onmousemove=document.onmouseup=null,i!==0&&(e.defaultSizeChangeFactor=(l.firstSize+i)/l.firstSize,t.defaultSizeChangeFactor=(l.secondSize-i)/l.secondSize),u.preventDefault()},c.preventDefault()}function g(c){i=n?c.clientY-l.e.clientY:c.clientX-l.e.clientX,i=Math.min(Math.max(i,-l.firstSize+l.minSize),l.secondSize-l.minSize);const u=r(l.offset+i),d=100-u;n?(o.style.top=t.element.style.top=u+"%",e.element.style.bottom=d+"%"):(o.style.left=t.element.style.left=u+"%",e.element.style.right=d+"%"),c.preventDefault()}function r(c){return 100*(c/l.parentSize)}return o}function zn(e,t){let n,o=document.createElement("div");o.innerHTML=$n(),o=o.childNodes[0];const i=o.querySelector(".container");oe++,o.style.zIndex=""+oe;const l=o.querySelector(".header");zt(o,l),Bt(o,e.watches.offsetTop);const s=l.querySelector(".actions .codicon-close");return s.onclick=r=>{Ce(e,n),r.preventDefault()},o.onclick=r=>{z(e,o),r.stopPropagation(),r.preventDefault()},o.onkeydown=r=>{if(!i.isContentEditable){let c=null;if(r.key==="ArrowDown"||r.key==="ArrowUp"||r.key==="ArrowLeft"||r.key==="ArrowRight")e.orientation==="vertical"&&r.key==="ArrowDown"||e.orientation==="horizontal"&&r.key==="ArrowRight"?c=o.nextElementSibling:(e.orientation==="vertical"&&r.key==="ArrowUp"||e.orientation==="horizontal"&&r.key==="ArrowLeft")&&(c=o.previousElementSibling),c&&z(e,c);else if(r.key==="w"&&(r.ctrlKey||r.metaKey)){const u=o.nextElementSibling||o.previousElementSibling;Ce(e,n),u&&z(e,u),r.preventDefault(),r.stopPropagation()}else if(r.key==="Enter"){const u=r.target;u&&u.nodeName!=="A"&&(i.contentEditable="true",i.focus({preventScroll:!0}),e.enteredLogEntry=i,r.preventDefault())}}},Wt(e,i),n={element:o,header:l,details:i,location:t,defaultSizeChangeFactor:1,entryId:t.id,layoutApplied:!1,order:e.watchData.entries.size},e.watchesContainer.appendChild(o),n}function Bn(e,{file:t,lineMap:n,deletedLines:o}){let i=!1;Object.entries(n).forEach(([l,s])=>{const g=Number(l),r=R({file:t,line:g});if(!r)return;let c;const u=R({file:t,line:s});u&&(c=e.watchData.entries.get(u),e.watchData.entries.delete(u)),c&&(e.watchData.entries.set(r,c),i=!0,c.location.line=g,jt(e,c.header,c.location))}),o.forEach(l=>{const s=R({file:t,line:l});if(!s)return;const g=e.watchData.entries.get(s);g&&Ce(e,g)}),i&&(e.watchData.entries=new Map([...e.watchData.entries].sort(([,l],[,s])=>l.order-s.order)))}function it(e,t){const n=e.watchData.layout;if(e.watchData.layout=t,n!==t){e.watchData.entries.forEach(i=>{i.layoutApplied=!1}),Te(e),e.watchesLayout.title=`Switch To ${t==="auto"?"Manual":"Automatic"} Value Layout Mode`;const o=e.watchesLayout.firstChild;o.ariaLabel=e.watchesLayout.title,t==="auto"?o.classList.add("selected-icon-state"):o.classList.remove("selected-icon-state")}}function j(e){return e.currentView}function rt(e){e.watchData.entries.forEach(t=>{Ce(e,t)})}function jn(e){const t=e.logItems.lastElementChild;!Ut(t)||(t==null||t.classList.add("checkpoint"),ce(e,t))}function Ut(e){return e?!e.classList.contains("checkpoint"):!1}function ce(e,t){Ut(t)?e.addCheckpoint.classList.remove("disabled-icon-state"):e.addCheckpoint.classList.add("disabled-icon-state")}function Kt(e,t,n){if(je(e,t.session),e.selectedTool&&e.selectedTool!==t.session.tool||!e.logEntryList.canAdd(t)||Ye(e,t,n))return;const o=document.createElement("div");o.className="log-item",o.style.height=`${e.logItemHeight}px`,o.addEventListener(xe,()=>e.logEntryList.incrementDuplicateCount(o)),o.addEventListener(vt,()=>{const i=Gt(e,t,void 0,o);if(!i)return;if(e.searchResultsById[t.id]&&j(e)==="logs"){const r=e.searchResultsById[t.id],c=i.querySelector(".log-message");r.summaryCount=fe(c,e.searchRegexHtmlEncoded,`match-${r.id}-s-`),e.searchResults[e.currentMatchIdx].id===t.id&&ge(c);const u=i.querySelector(".log-details .container");u&&(e.logEntryList.isLoaded(r.id)||u.querySelector(".error-log-message"))&&(r.detailCount=fe(u,e.searchRegexHtmlEncoded,`match-${r.id}-d-`))}const l=o===e.focusedLogEntry,s=o.classList.contains("pre-file-change"),g=o.classList.contains(wt);o.replaceWith(i),l&&!e.searchTerm&&z(e,i),s&&i.classList.add("pre-file-change"),g&&ge(i)},{once:!0}),n.appendChild(o),e.logEntryList.addElement(t,o),le(e),ce(e,e.logItems.lastElementChild)}function Ye(e,t,n){const o=n.lastElementChild;return t.hash&&e.logEntryList.getHash(o)===t.hash?(o.dispatchEvent(En),!0):!1}function Gt(e,t,n,o){if(e.selectedTool&&e.selectedTool!==t.session.tool){je(e,t.session);return}if(!e.logEntryList.canAdd(t))return;const i=n===void 0;let l;if(!i&&Ye(e,t,n))return;i&&o&&(l=e.logEntryList.getDuplicateCount(o));const s=document.createDocumentFragment(),g=document.createDocumentFragment();let r;t.args.forEach((a,m)=>{if(m>0){const f=document.createElement("span");f.textContent=", ",s.appendChild(f)}if(a.context){r&&r.length?r+=`, ${a.context}`:r=`Context: ${a.context}`;const f=document.createElement("span");f.textContent=`${a.context}: `;const y=f.textContent.length*(Lt*e.fontSize/10),L=Math.ceil(y/50)*50;f.className=`context ${L<1e3?`width-${L}`:"too-large"}`,s.appendChild(f)}s.appendChild(pt(a.preview,e.channel.api,"preview"))});const c=document.createElement("div");c.className="details-loading-indicator codicon codicon-loading",g.appendChild(c);const u=Ee(t.file),d=Rt(n,e,t.session,t.id,t.ts,t.hash,l,t,t.args,s,g,u+":"+t.line,t.file+":"+t.line,r,async()=>{e.channel.api.navigate(he(t.file),t.line)},async a=>{Sn(e,a,t)});return d&&(d.addEventListener(xe,()=>{we(d.querySelector(".log-item-content"),e.logEntryList.incrementDuplicateCount(d))}),e.lastLogEntryWithPreviewLoaded=d),le(e),ce(e,e.logItems.lastElementChild),d}function He(e){Ue(e,!0);const t=e.logItems.lastElementChild;if(!t)e.scrollPositionBottom=!0;else{const n=e.logsContainer.getBoundingClientRect(),o=t.getBoundingClientRect();e.scrollPositionBottom=o.bottom-20<=n.bottom}}function Ue(e,t=!1){const n=e.logEntryList.getIndex(e.lastLogEntryWithPreviewLoaded),o=t&&e.lastLogsContainerScrollTop!==void 0&&e.logsContainer.scrollTop<e.lastLogsContainerScrollTop||n===e.logEntryList.size()-1,i=e.logsContainer.getBoundingClientRect(),l=i.top,s=i.bottom,g=[],r=e.logItems.children,c=a=>{const m=a.getBoundingClientRect(),f=m.height*80;if(m.top<s+f&&m.bottom+f>l)return!0},u=(a,m)=>{const f=r[a];if(!f||f.childElementCount>0)return!0;const y=f.getBoundingClientRect();if(c(f))g.push(f);else if(m&&y.bottom<l||!m&&y.top>s)return!1;return!0},d=n!==void 0?n:o?r.length-1:0;for(let a=d;a>=0&&u(a,!0);a--);for(let a=d;a<r.length&&u(a,!1);a++);for(const a of g)a.dispatchEvent(vn);e.lastLogsContainerScrollTop=e.logsContainer.scrollTop}async function G(e,t){let n="logs",o=!1;e.loadingIndicator.classList.remove("hiddenImportant"),e.noLogItemsPlaceholder.classList.add("hiddenImportant");try{ue(e),e.logItems.classList.add("hiddenImportant"),e.logItems.replaceChildren(),e.focusedLogEntry=void 0,e.niceFileLocationLength=0,e.logEntryList.clear(),e.tools={},Qt(e);const{logViewerEntries:l,autoScroll:s,autoClear:g,tokens:r,defaultView:c,highlightStyles:u,selection:d,dateTimeFormat:a,fontSize:m,viewerOpts:f,highlights:y,watches:L,dateTimeDisplayMode:C,simpleDateTimeDisplayMode:M,showSearchHint:P,showLogViewerProHint:O,projectFolder:q}=await e.channel.api.initialize();if(e.projectFolder=q,t=t||d,n=c,e.showSearchHint=P,e.showSearchHint&&e.hintFind.classList.remove("hiddenImportant"),e.showLogViewerProHint=O,e.showLogViewerProHint&&e.hintLogViewerPro.classList.remove("hiddenImportant"),bt(e,r,u),f.renderHighlights)for(const S of y)e.logEntryList.toggleHighlight(S);ve(e),Nt(e,s),o=s,Dt(e,g),_t(e,C,M),Mt(e,C,a),kt(e,m),At(e,f);const _=re(l);let $;const W=document.createDocumentFragment();if(_.forEach(S=>{S.type=="log"?Kt(e,S.log,W):S.type==="error"?Ot(e,S.error,W):S.type==="fileChange"&&S.fileChange.mtime&&($=S.fileChange)}),e.logItems.appendChild(W),$&&Ht(e,$),f.renderWatchView){e.watchesView.classList.remove("hiddenImportant");for(const S of L)Yt(e,S)}else e.watchesView.classList.add("hiddenImportant")}finally{le(e),ce(e,e.logItems.lastElementChild),Ke(e),n==="logs"?(e.logView.click(),Xt(e,t,o)):e.watchesView.click(),e.currentView=n}}function Xt(e,t,n=e.autoclearValue){let o;e.logItems.classList.remove("hiddenImportant"),e.loadingIndicator.classList.add("hiddenImportant"),t!==void 0&&(o=e.logEntryList.getElementById(t.id)),o===void 0&&(n?(o=e.logItems.lastElementChild,e.logsContainer.scrollTop=e.logsContainer.scrollHeight):o=e.logItems.firstElementChild),o&&(o.tabIndex=0),o&&z(e,o),o&&t&&Jt(e,o,t),He(e)}function Jt(e,t,n){n.expand&&ge(t),n.search&&(e.filterFind.classList.remove("hiddenImportant"),e.filterFind.title=`Remove Search Filter: ${n.search.context}`,e.search.value=n.search.term,Oe(e),de(e,{searchResults:n.search.results,currentMatchIdx:Math.max(n.search.results.findIndex(o=>o.id===n.id),0)}))}function Yn(e){const t=document.createElement("div");t.classList.add("log-item"),t.style.visibility="hiddenImportant",t.textContent="&nbsp;",e.logItems.appendChild(t);const n=e.logItems.classList.contains("hiddenImportant");n&&e.logItems.classList.remove("hiddenImportant"),e.logItemHeight=t.getBoundingClientRect().height,e.logItems.removeChild(t),n&&e.logItems.classList.add("hiddenImportant")}function le(e){e.logItems.childElementCount===0?e.noLogItemsPlaceholder.classList.remove("hiddenImportant"):e.noLogItemsPlaceholder.classList.add("hiddenImportant")}function Ke(e){e.watchData.entries.size===0?e.noWatchItemsPlaceholder.classList.remove("hiddenImportant"):e.noWatchItemsPlaceholder.classList.add("hiddenImportant")}function Me(e){const t=e.orientation;j(e)==="logs"&&(e.logsContainer.style.height=e.logs.clientHeight+"px",e.logsContainer.style.width=e.logs.clientWidth+"px"),e.orientation=Un(e.mainContainer.clientWidth,e.mainContainer.clientHeight),t!==e.orientation&&(e.mainContainer.classList.remove(t),e.mainContainer.classList.add(e.orientation),Te(e))}const lt=Ve(e=>{const t=Math.floor((e.mainContainer.clientWidth-50)/(Math.ceil(Lt)*e.fontSize/10));t&&e.channel.api.updatePreferredFormattingOptions({maxLineLength:Math.max(t,30)})});function Un(e,t){return e>1.8*t?"horizontal":"vertical"}let J;function Kn(e){if(J&&clearTimeout(J),e.focusedLogEntry){const t=e.focusedLogEntry;J=setTimeout(()=>{J&&clearTimeout(J),t&&t===e.focusedLogEntry&&(e.focusedLogEntry.tabIndex=0,e.focusedLogEntry.querySelectorAll("a:not(.not-tabable)").forEach(n=>n.tabIndex=0),e.focusedLogEntry.focus({preventScroll:!0}),e.findWidget.classList.contains("visible")&&e.search.focus())},120)}}function Gn(e){J&&clearTimeout(J),e.focusedLogEntry&&document.activeElement===e.focusedLogEntry&&(e.focusedLogEntry.tabIndex=-1,e.focusedLogEntry.querySelectorAll("a").forEach(t=>t.tabIndex=-1),e.focusedLogEntry.blur()),B(e),me(e)}function ue(e){St(e),e.searchTerm="",e.filterFind.classList.add("hiddenImportant"),e.findWidget.classList.remove("visible"),e.findWidget.classList.remove(Ae),e.focusedLogEntry&&e.focusedLogEntry.focus(),setTimeout(()=>{e.findWidget.classList.contains(Ae)||e.findWidget.classList.add("hiddenImportant")},500)}const Xn=Ve(e=>{const t=Math.max(e.logItems.childElementCount+e.logEntryList.getTotalDuplicateCount()-e.maxElementCount,0);if(t===0)return;const n=e.logEntryList.removeFirstElementsAndGroups(t);n!==0&&(e.logItems.replaceChildren(...Array.from(e.logItems.children).slice(n)),Ue(e))},250);function ct(e,t,n,o){e.maxElementCount=t,Xn(e),o&&(!n&&(e.logsContainer.scrollHeight<=e.logsContainer.clientHeight||!e.autoscrollValue||e.autoclearValue&&!e.scrollPositionBottom||e.searchTerm)&&Ue(e),e.autoscrollValue&&e.searchTerm===""&&e.scrollPositionBottom&&(e.logsContainer.scrollTop=e.logsContainer.scrollHeight))}function qe(e,t){const n=t.getBoundingClientRect(),o=j(e)==="logs",i=o?e.logsContainer:t.closest(".container"),l=i.getBoundingClientRect();if(!(n.top>=l.top&&n.bottom<=l.bottom-10&&n.left>=l.left&&n.right<=l.right-10)){if(n.top<l.top||n.bottom>l.bottom-10){let s=n.top-l.top+i.scrollTop-n.height*2;s<l.height/2&&(s=0),i.scrollTo({top:s,behavior:"auto"})}if(n.left<l.left||n.right>l.right-10){let s=t.parentElement;for(;s&&!s.classList.contains("log-details");)s=s.parentElement;if(o||(s=i),s){const g=s.getBoundingClientRect();let r=n.left-g.left+s.scrollLeft-10;r+n.width+10<g.width&&(r=0),s.scrollTo({left:r,behavior:"auto"})}}}}function ke(e,t){t.enteredLogEntry&&Ie||(e.stopPropagation(),e.preventDefault())}function Jn(e){return e<=25}function st(e){e.onPreAddLogOrErrorEntry&&(e.onPreAddLogOrErrorEntry(),delete e.onPreAddLogOrErrorEntry)}function Oe(e){return e.findWidget.classList.contains("hiddenImportant")?(e.findWidget.classList.remove("hiddenImportant"),e.findWidget.classList.add(Ae),setTimeout(()=>{e.findWidget.classList.add("visible"),e.search.focus()},0),!0):!1}function Ge(e){e.classList.remove(Q),e.className=e.className.replace(ze,"")}function Zt(e){return`${Q}-${e}`}function at(e,t){if(e.classList.contains("pre-file-change"))return Ge(e),!1;const n=e.classList.toggle(Q);if(e.classList.contains(Q)){e.classList.add(Zt(t));const o=e.querySelector(".log-item-content");if(!o)return!1;let i=o.querySelector(".log-highlighter");i||(i=document.createElement("span"),i.className="log-highlighter",o.insertBefore(i,o.querySelector(".log-group-count")||o.querySelector(".log-message")))}else e.className=e.className.replace(ze,"");return n}function ve(e){e.logEntryList.hasHighlights()?e.removeHighlights.classList.remove("hiddenImportant"):e.removeHighlights.classList.add("hiddenImportant")}function Qt(e){const t=Object.keys(e.tools),n=t.length>1;if(e.multiToolUseDetected=e.multiToolUseDetected||n,Re(e),Dn(e),e.multiToolUseDetected&&!e.viewerOpts.mergeMultiToolLogs?e.logActionsDropdown.style.display="inline-block":e.selectedTool===void 0&&(e.logActionsDropdown.style.display="none"),j(e)!=="logs"||!e.viewerOpts.allowToMergeMultiToolLogs||!e.multiToolUseDetected&&!e.viewerOpts.mergeMultiToolLogs)e.multiToolDisplayMode.classList.add("hiddenImportant");else{const o=t.join(t.length>2?", ":" and ");e.multiToolDisplayMode.classList.remove("hiddenImportant");const i=e.multiToolDisplayMode.firstChild;e.viewerOpts.mergeMultiToolLogs?(i.classList.add("selected-icon-state"),e.multiToolDisplayMode.title=`Show logs from ${o} separately (dedicated list per tool)`):(i.classList.remove("selected-icon-state"),e.multiToolDisplayMode.title=`Show logs from ${o} in one list`)}}function Zn(e){return"detail"in e}function Qn(){const e=Je.exports.useRef(null),t=document.createElement("style");return t.id="styleOverride",t.innerHTML=".log-item-width { width: 0px; }",document.body.appendChild(t),Je.exports.useLayoutEffect(()=>{e.current={showSearchHint:!1,showLogViewerProHint:!1,simpleDateTimeDisplayMode:!1,currentView:"logs",root:document.querySelector("#root"),mainContainer:document.querySelector(".main-container"),breadcrumbs:document.querySelector(".breadcrumbs"),header:document.querySelector(".header-content"),views:document.querySelector(".views"),logView:document.querySelector(".log-view"),watchesView:document.querySelector(".watches-view"),logs:document.querySelector(".logs"),logsContainer:document.querySelector(".logs-container"),logItems:document.querySelector(".log-items"),loadingIndicator:document.querySelector(".loading-indicator"),noLogItemsPlaceholder:document.querySelector(".no-log-items-placeholder"),noWatchItemsPlaceholder:document.querySelector(".no-watch-items-placeholder"),watches:document.querySelector(".watches"),watchesContainer:document.querySelector(".watches-container"),search:document.querySelector(".search-input"),searchLoading:document.querySelector(".search-loading"),regularExpression:document.querySelector(".use-regular-expression"),matchWholeWorld:document.querySelector(".match-whole-word"),matchCase:document.querySelector(".match-case"),hintLogViewerPro:document.querySelector(".viewer-pro-hint"),autoscroll:document.querySelector(".auto-scroll"),autoclear:document.querySelector(".auto-clear"),showDateTime:document.querySelector(".show-date"),filter:document.querySelector(".filter"),watchesLayout:document.querySelector(".toggle-watches-layout-mode"),multiToolDisplayMode:document.querySelector(".toggle-multitool-display-mode"),multiToolUseDetected:!1,removeHighlights:document.querySelector(".remove-highlights"),addCheckpoint:document.querySelector(".add-checkpoint"),autoscrollValue:!0,autoclearValue:!0,showDateTimeValue:!0,fontSize:10,watchMinHeight:23,watchMinWidth:100,logSelector:document.querySelector(".log-selector"),logSelectorOverlay:document.querySelector(".log-selector-overlay"),logActionsDropdown:document.querySelector(".logs-action-dropdown"),logsName:document.querySelector(".logs-action-text"),tools:{},selectedTool:void 0,niceFileLocationLength:0,findWidget:document.querySelector(".find-widget"),matchesCount:document.querySelector(".matches-count"),previousMatch:document.querySelector(".find-previous"),nextMatch:document.querySelector(".find-next"),closeFind:document.querySelector(".find-close"),hintFind:document.querySelector(".find-hint"),filterFind:document.querySelector(".find-filter"),searchTerm:"",searchContext:0,searchRegexHtmlEncoded:/''/g,searchResults:[],searchResultsById:{},scrollPositionBottom:!0,currentMatchIdx:0,currentMatchType:"summary",currentMatchCount:0,totalMatches:0,onPreAddLogOrErrorEntry:void 0,channel:new nn(window,on,{addLogEntries:async r=>{st(e.current);const c=re(r),u=Jn(c.entries.length),d=j(e.current)==="logs";u&&d?c.entries.forEach(a=>Gt(e.current,a,e.current.logItems)):c.entries.forEach(a=>Kt(e.current,a,e.current.logItems)),ct(e.current,c.totalNumberOfLogsAndErrors,u,d)},addErrorEntries:async r=>{st(e.current);const c=re(r);c.entries.forEach(u=>Ot(e.current,u,e.current.logItems)),ct(e.current,c.totalNumberOfLogsAndErrors,!0,j(e.current)==="logs")},addFileChange:async r=>{Ht(e.current,r)},clear:async r=>{const c=u=>{e.current.logItems.replaceChildren(),e.current.focusedLogEntry=void 0,u?le(e.current):setTimeout(()=>le(e.current),400),ce(e.current,e.current.logItems.lastElementChild),e.current.tools={},e.current.niceFileLocationLength=0,e.current.logEntryList.clear(),ue(e.current)};r==="immediately"?(e.current.onPreAddLogOrErrorEntry&&(e.current.onPreAddLogOrErrorEntry(),delete e.current.onPreAddLogOrErrorEntry),c(!0),rt(e.current)):r==="onNewLogOrError"&&(e.current.onPreAddLogOrErrorEntry=c)},autoScrollChanged:async r=>{Nt(e.current,r)},autoClearChanged:async r=>{Dt(e.current,r)},stylesChanged:async(r,c)=>{bt(e.current,r,c)},dateTimeFormatChanged:async({dateTimeFormat:r,dateTimeDisplayMode:c,simpleDateTimeDisplayMode:u})=>{_t(e.current,c,u),Mt(e.current,c,r),G(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0)},fontSizeChanged:async r=>{kt(e.current,r)},viewerOptsChanged:async r=>{At(e.current,r),G(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0)},select:async r=>{const c=e.current.logEntryList.getElementById(r.id);c!==void 0&&(c.tabIndex=0,z(e.current,c),He(e.current),Jt(e.current,c,r))},toggleHighlight:async r=>{const c=e.current.logEntryList.toggleHighlight(r);c&&z(e.current,c),ve(e.current),be(e.current,r.location)},removeAllHighlights:async()=>{e.current.logEntryList.removeAllHighlights(),ve(e.current),be(e.current)},updateFileHighlights:async r=>{e.current.logEntryList.updateFileHighlights(r),ve(e.current)},updateWatchValue:async r=>{Yt(e.current,r)},updateFileWatches:async r=>{Bn(e.current,r)},customizeWatchesLayout:async()=>{it(e.current,e.current.watchData.layout==="auto"?"manual":"auto")},openTab:async r=>{j(e.current)!==r&&(r==="logs"?e.current.logView.click():e.current.watchesView.click())},updateFilter:async r=>{e.current.logEntryList.updateFilter(r)&&G(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0),Be(e.current)},addLogViewerCheckpoint:async()=>{jn(e.current)}}),logEntryList:new eo,lastLogsContainerScrollTop:void 0,lastLogEntryWithPreviewLoaded:void 0,logItemHeight:0,maxElementCount:1/0,entryDateInserter:()=>{},entryToolInserter:()=>{},viewerOpts:{pageSize:100,renderIndentationGuides:!1,renderNodeExpansionControls:!1,renderBreadcrumbs:!1,renderLogEntryActions:!1,renderHighlights:!1,renderWatchView:!1,allowToMergeMultiToolLogs:!1,mergeMultiToolLogs:!1},watchData:{entries:new Map,layout:"auto"},orientation:"vertical",contextWidget:document.querySelector(".context-actions-widget"),codePreviewerWidget:document.querySelector(".code-previewer-widget"),codePreviewerLocation:void 0,projectFolder:void 0},e.current.mainContainer.onkeydown=r=>{var c;if(r.metaKey||r.ctrlKey)r.key==="f"?Oe(e.current)&&(r.stopPropagation(),r.preventDefault()):r.key==="c"&&e.current.focusedLogEntry&&e.current.viewerOpts.renderLogEntryActions&&!((c=window.getSelection())!=null&&c.toString())&&($e(e.current,e.current.focusedLogEntry),r.stopPropagation(),r.preventDefault());else if(r.key==="Escape")(e.current.findWidget.classList.contains("visible")||!e.current.contextWidget.classList.contains("hiddenImportant"))&&(ue(e.current),B(e.current),r.stopPropagation(),r.preventDefault());else if(r.key==="End")e.current.enteredLogEntry||z(e.current,e.current.logItems.lastElementChild),ke(r,e.current);else if(r.key==="Home")e.current.enteredLogEntry||z(e.current,e.current.logItems.firstElementChild),ke(r,e.current);else if(r.key==="PageDown"||r.key==="PageUp"){const u=e.current.focusedLogEntry;if(u&&!e.current.enteredLogEntry){const d=e.current.logItems,a=u.getBoundingClientRect().height,m=e.current.logsContainer.getBoundingClientRect().height,f=e.current.logEntryList.getIndex(u)||0,y=d.childElementCount;let L=f;r.key==="PageDown"?L+=Math.floor(m/a):L-=Math.floor(m/a),L<0?L=0:L>=y&&(L=y-1);const C=d.children[L];z(e.current,C)}ke(r,e.current)}},e.current.closeFind.onclick=r=>{ue(e.current)},e.current.search.onkeydown=async r=>{r.key==="Escape"?(ue(e.current),r.preventDefault(),r.stopPropagation()):r.shiftKey&&r.key==="Enter"?e.current.previousMatch.click():r.key==="Enter"&&(e.current.searchTerm!==e.current.search.value?de(e.current):e.current.nextMatch.click())},e.current.previousMatch.onclick=r=>{e.current.searchTerm!==e.current.search.value&&de(e.current),e.current.previousMatch.classList.contains("disabled")||Tt(e.current),e.current.search.focus()},e.current.nextMatch.onclick=r=>{e.current.searchTerm!==e.current.search.value&&de(e.current),e.current.nextMatch.classList.contains("disabled")||Pe(e.current),e.current.search.focus()},e.current.contextWidget.onmouseover=r=>{var u;const c=r.target&&r.target;if(c){const d=c.tagName==="li"?c:c.closest("li");(u=d==null?void 0:d.parentElement)==null||u.querySelectorAll("li").forEach(a=>{a.classList.remove("selected")}),d==null||d.classList.add("selected")}},e.current.mainContainer.onclick=r=>{if(r.target&&r.target.tagName&&r.target.tagName.toLowerCase()!=="a"&&!r.target.classList.contains("layout-resizer")){const c=j(e.current);c==="logs"?e.current.logView.focus():c==="watches"&&e.current.watchesView.focus(),r.stopPropagation(),r.preventDefault()}B(e.current)},window.addEventListener("resize",()=>{Me(e.current),lt(e.current)}),window.addEventListener("focus",()=>Kn(e.current)),window.addEventListener("blur",()=>Gn(e.current)),window.addEventListener("keydown",r=>{r.shiftKey&&r.key==="Escape"&&_e(e.current)}),document.addEventListener(pe,r=>{if(Zn(r)){const{link:c,loc:u}=r.detail;c.onmouseover=d=>An(e.current,{file:u.file.startsWith("file")||u.file.startsWith("http")?u.file:he(u.file),line:u.line},d),c.onmouseout=()=>$t(e.current)}}),Me(e.current),lt(e.current);const n=r=>{!r||(r.onclick=()=>{r.classList.toggle("checked"),e.current.search.focus()},r.onkeydown=c=>{(c.key==="Enter"||c.key===" ")&&r.classList.toggle("checked")})};n(e.current.regularExpression),n(e.current.matchWholeWorld),n(e.current.matchCase);const o=()=>{e.current.views.querySelectorAll("li").forEach(r=>{var u,d;r.classList.remove("checked"),r.tabIndex=-1;const c=(d=(u=r.querySelector("a"))==null?void 0:u.getAttribute("aria-label"))==null?void 0:d.toLowerCase();if(c){const a=document.getElementById(c);a&&a.classList.add("hiddenImportant")}})},i=()=>{const r=Object.keys(e.current.tools);if(r.length>1){if(e.current.viewerOpts.mergeMultiToolLogs)return;e.current.logSelector.replaceChildren(),e.current.focusedLogEntry=void 0,r.sort((a,m)=>a.localeCompare(m)),r.forEach(a=>{let m=e.current.logSelector.appendChild(document.createElement("div"));m.outerHTML=`<div class='log-selector-item'>${a} Logs</div>`,m=e.current.logSelector.lastChild,m.dataset.tool=a,a==e.current.selectedTool&&m.classList.add("active"),m.onclick=()=>{e.current.selectedTool=a,Re(e.current),G(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0),e.current.logSelector.style.display="none",e.current.logSelectorOverlay.style.display="none"},m.onmouseover=()=>{e.current.logSelector.querySelectorAll(".log-selector-item").forEach(f=>{f!==m?f.classList.remove("active"):f.classList.add("active")})}});const u=e.current.logView.querySelector("a").getBoundingClientRect();e.current.logSelector.style.left=u.left+"px",e.current.logSelector.style.top=u.bottom-5+"px",e.current.logSelector.style.minWidth=u.width+"px",e.current.logSelector.style.display="block",e.current.logSelector.focus();const d=e.current.logView.getBoundingClientRect();e.current.logSelectorOverlay.style.left=d.left+"px",e.current.logSelectorOverlay.style.top=d.top+"px",e.current.logSelectorOverlay.style.width=d.width+"px",e.current.logSelectorOverlay.style.height=d.height+"px",e.current.logSelectorOverlay.style.display="block"}},l=r=>{var u,d;r.classList.add("checked"),r.tabIndex=0;const c=(d=(u=r.querySelector("a"))==null?void 0:u.getAttribute("aria-label"))==null?void 0:d.toLowerCase();if(c){const a=document.getElementById(c);a&&a.classList.remove("hiddenImportant")}},s=(r,c)=>{var a,m;const u=(m=(a=r.querySelector("a"))==null?void 0:a.getAttribute("aria-label"))==null?void 0:m.toLowerCase();if(e.current.currentView=u,u===c)return;const d=`${u}-only`;e.current.mainContainer.querySelectorAll(".menu-entry").forEach(f=>{f.classList.contains(d)?f.classList.remove("hiddenForCurrentView"):f.className.includes("-only")&&f.classList.add("hiddenForCurrentView")}),Me(e.current),u==="logs"?(Xt(e.current),e.current.channel.api.openedView("logs")):e.current.channel.api.openedView("watches")};e.current.views.querySelectorAll("li").forEach(r=>{r.onblur=()=>{r.classList.remove("focused")},r.onfocus=()=>{r.classList.add("focused")},r.onkeydown=c=>{var a,m;const u=(a=r.parentElement)==null?void 0:a.querySelector(".focused"),d=(m=r.parentElement)==null?void 0:m.querySelector(".checked");if(c.key==="Enter"||c.key===" "){const f=j(e.current);o(),l(u),u===d&&d===e.current.logView&&i(),s(u,f),c.preventDefault()}else c.key==="ArrowRight"?u!=null&&u.nextElementSibling&&(u.classList.remove("focused"),u.nextElementSibling.classList.add("focused"),c.preventDefault()):c.key==="ArrowLeft"&&u!=null&&u.previousElementSibling&&(u.classList.remove("focused"),u.previousElementSibling.classList.add("focused"),c.preventDefault())},r.onclick=c=>{const u=j(e.current);r===e.current.logView&&!(c.screenX===0&&c.screenY===0)&&i(),o(),l(r),s(r,u),c.preventDefault(),c.stopPropagation()}}),e.current.logSelector.onkeydown=r=>{if(r.key==="Escape")e.current.logSelector.style.display="none",e.current.logSelectorOverlay.style.display="none",r.preventDefault(),r.stopPropagation(),e.current.logView.focus();else if(r.key===" "||r.key==="Enter"){const c=e.current.logSelector.querySelector(".active");c&&c.dataset.tool&&(e.current.logSelector.style.display="none",e.current.logSelectorOverlay.style.display="none",r.preventDefault(),e.current.logView.focus(),e.current.selectedTool=c.dataset.tool,Re(e.current),G(e.current,e.current.focusedLogEntry?{id:e.current.focusedLogEntry.data.id}:void 0))}else if(r.key==="ArrowDown"){const c=e.current.logSelector.querySelector(".active");c!=null&&c.nextElementSibling&&(c.classList.remove("active"),c.nextElementSibling.classList.add("active"))}else if(r.key==="ArrowUp"){const c=e.current.logSelector.querySelector(".active");c!=null&&c.previousElementSibling&&(c.classList.remove("active"),c.previousElementSibling.classList.add("active"))}},e.current.logSelector.onblur=r=>{e.current.logSelector.style.display="none",e.current.logSelectorOverlay.style.display="none"},e.current.logsContainer.onscroll=()=>He(e.current),Yn(e.current),G(e.current),it(e.current,"auto");const g=r=>{if(!e.current.viewerOpts.renderBreadcrumbs)return;const c=r.detail,u=e.current.breadcrumbs;if(c.length>1){const d=[];c.forEach((a,m)=>{var L;const f=((L=a.textContent)==null?void 0:L.trimStart().replace(/:[^:]*$/,"").replace(/[\s\{\[\:]+$/g,""))||(m===0?"root":"..."),y=document.createElement("div");if(y.classList.add("breadcrumb"),y.textContent=f,y.onclick=()=>{const C="standout",M="standout-remove";a.classList.add(C),z(e.current,a.closest(".log-item")),qe(e.current,a.querySelector(".expander")||a.querySelector("span")),setTimeout(()=>{a.classList.add(M),a.classList.remove(C),setTimeout(()=>{a.classList.remove(M)},500)},3e3)},d.push(y),m<c.length-1){const C=document.createElement("div");C.classList.add("codicon","codicon-chevron-right"),d.push(C)}else{const C=document.createElement("div");C.classList.add("actions","codicon","codicon-close"),C.onclick=()=>{me(e.current)},d.push(C)}}),u.replaceChildren(...d)}else u.replaceChildren();if(u.hasChildNodes()){let d=function(a){if(!!_n(e.current)){if(a.offsetParent===null){me(e.current);return}setTimeout(()=>d(a),400)}};Fe(e.current,!0),d(c[0])}else Fe(e.current,!1)};document.addEventListener(ut,g)}),k(rn,{children:[v("div",{className:"log-selector-overlay",tabIndex:0}),v("div",{className:"log-selector",tabIndex:0}),k("div",{className:"find-widget hiddenImportant",children:[v("div",{className:"find-widget-sash"}),v("div",{className:"findInput",children:k("div",{className:"container",children:[v("input",{className:"search-input",type:"text",placeholder:"Find"}),v("div",{title:"Loading",className:"search-loading codicon codicon-loading hiddenImportant","aria-label":"Loading"})]})}),v("a",{title:"Previous Match (\u21E7Enter)",className:"button find-previous codicon codicon-arrow-up disabled"}),v("a",{title:"Next Match (Enter)",className:"button find-next codicon codicon-arrow-down disabled"}),v("a",{title:"Remove Search Filter",className:"button find-filter action-label selected-icon-state codicon codicon-filter hiddenImportant",onClick:()=>{e.current.filterFind.classList.add("hiddenImportant"),de(e.current)}}),v("a",{title:"Close (Escape)",className:"button find-close codicon codicon-close"}),v("a",{title:"Show Quick Search Hint",href:"command:console-ninja.openHint?"+encodeURIComponent(JSON.stringify("Search")),className:"button find-hint codicon codicon-lightbulb hiddenImportant",onClick:()=>{e.current.showSearchHint=!1,e.current.hintFind.classList.add("hiddenImportant")}})]}),v("div",{className:"code-previewer-widget hiddenImportant"}),k("div",{className:"context-actions-widget hiddenImportant",children:[k("div",{className:"header subtle hiddenImportant",children:[ie," + . to open | Esc to close"]}),k("ul",{children:[k("li",{className:"selected",onClick:n=>{e.current.focusedLogEntry&&$e(e.current,e.current.focusedLogEntry),B(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-copy"}),k("a",{href:"#",className:"copy-action not-tabable",tabIndex:-1,title:`Copy Log Entry To Clipboard (${ie} + C)`,children:[v("span",{className:"",children:"Copy to clipboard"})," ",k("span",{className:"subtle",children:[ie," + C"]})]})]}),k("li",{onClick:n=>{if(e.current.focusedLogEntry){const o=e.current.focusedLogEntry;e.current.channel.api.toggleLineHighlight({line:o.data.line,file:o.data.file,useOriginalLocation:!0})}B(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-star-full"}),v("a",{href:"#",className:"highlight-action not-tabable",tabIndex:-1,title:"Toggle Highlight Entries For This Location",children:"Highlight entries for this file/line"})]}),k("li",{onClick:n=>{e.current.focusedLogEntry&&Le(e.current,e.current.focusedLogEntry,"showLocation"),B(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-filter-filled"}),v("a",{href:"#",className:"show-location-action not-tabable",tabIndex:-1,title:"Show Entries For This Location Only",children:"Show entries for this file/line only"})]}),k("li",{onClick:n=>{e.current.focusedLogEntry&&Le(e.current,e.current.focusedLogEntry,"showFile"),B(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-filter-filled"}),v("a",{href:"#",className:"show-file-action not-tabable",tabIndex:-1,title:"Show Entries For This File Only",children:"Show entries for this file only"})]}),k("li",{onClick:n=>{e.current.focusedLogEntry&&Le(e.current,e.current.focusedLogEntry,"hideLocation"),B(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-filter-filled"}),v("a",{href:"#",className:"hide-location-action not-tabable",tabIndex:-1,title:"Hide Entries For This Location",children:"Hide entries for this file/line"})]}),k("li",{onClick:n=>{e.current.focusedLogEntry&&Le(e.current,e.current.focusedLogEntry,"hideFile"),B(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-filter-filled"}),v("a",{href:"#",className:"hide-file-action not-tabable",tabIndex:-1,title:"Hide Entries For This File",children:"Hide entries for this file"})]}),k("li",{onClick:n=>{_e(e.current),B(e.current),n.preventDefault(),n.stopPropagation()},children:[v("span",{className:"codicon codicon-filter"}),k("a",{href:"#",className:"reset-filter-action not-tabable",tabIndex:-1,title:"Reset filter",children:["Reset filter ",v("span",{className:"subtle",children:"Shift + Escape"})]})]})]})]}),k("div",{className:"main-container vertical",role:"none",children:[k("div",{className:"header",children:[v("div",{className:"breadcrumbs"}),k("div",{className:"header-content active",children:[v("div",{className:"views",children:k("ul",{className:"actions-container",role:"tablist","aria-label":"Active View Switcher",children:[k("li",{className:"log-view action-item checked",role:"tab","aria-label":"Logs",tabIndex:0,children:[v("a",{className:"action-label","aria-label":"Logs",children:k("div",{className:"logs-action",children:[v("div",{className:"logs-action-text",children:"Logs"}),v("div",{className:"codicon codicon-chevron-down logs-action-dropdown",style:{display:"none"}})]})}),v("div",{className:"active-item-indicator"})]}),k("li",{className:"watches-view action-item hiddenImportant",role:"tab","aria-label":"Watches",tabIndex:0,children:[v("a",{className:"action-label","aria-label":"Watches",children:v("div",{className:"watches-action",children:v("div",{className:"watches-action-text",children:"Values"})})}),v("div",{className:"active-item-indicator"})]})]})}),v("div",{className:"spacer"}),k("ul",{className:"actions",children:[v("li",{className:"viewer-pro-hint action-item menu-entry logs-only hiddenImportant",role:"presentation",title:"Check out Log Viewer PRO features",children:v("a",{href:"command:console-ninja.openHint?"+encodeURIComponent(JSON.stringify("LogViewer")),onClick:()=>{e.current.showLogViewerProHint=!1,e.current.hintLogViewerPro.classList.add("hiddenImportant")},className:"action-label codicon codicon-lightbulb pro-hint",role:"button","aria-label":"Check out Log Viewer PRO features",tabIndex:-1})}),v("li",{className:"toggle-multitool-display-mode action-item menu-entry logs-only hiddenImportant",role:"presentation",title:"Toggle Multi-Tool Display Mode",children:v("a",{href:"command:console-ninja.toggleMultiToolDisplayMode",className:"action-label codicon codicon-merge",role:"button","aria-label":"Toggle Multi-Tool Display Mode",tabIndex:-1})}),v("li",{className:"toggle-watches-layout-mode action-item menu-entry watches-only hiddenForCurrentView",role:"presentation",title:"Switch To Manual Value Layout Mode",children:v("a",{className:"action-label selected-icon-state codicon codicon-layout",href:"command:console-ninja.customizeWatchesLayout",role:"button","aria-label":"Switch To Manual Value Layout Mode",tabIndex:-1})}),v("li",{className:"remove-highlights action-item menu-entry hiddenImportant",role:"presentation",title:"Remove All Highlights",children:v("a",{href:"command:console-ninja.removeAllHighlights",className:"action-label codicon codicon-star-half selected-icon-state",role:"button","aria-label":"Clear All Highlights",tabIndex:-1})}),v("li",{className:"action-item menu-entry watches-only hiddenForCurrentView",role:"presentation",title:"Close All Values",children:v("a",{onClick:n=>{rt(e.current),n.preventDefault(),n.stopPropagation()},className:"action-label codicon codicon-close-all",role:"button","aria-label":"Close All Values",tabIndex:-1})}),v("li",{className:"action-item menu-entry logs-only",role:"presentation",title:"Clear Output",children:v("a",{href:"command:console-ninja.clearOutput",className:"action-label codicon codicon-clear-all",role:"button","aria-label":"Clear Output",tabIndex:-1})}),v("li",{className:"add-checkpoint action-item menu-entry logs-only disabled-icon-state",role:"presentation",title:"Add Checkpoint (horizontal separator between current and new log entries)",children:v("a",{href:"command:console-ninja.addLogViewerCheckpoint",className:"action-label codicon codicon-symbol-snippet",role:"button","aria-label":"Add Checkpoint",tabIndex:-1})}),v("li",{className:"show-date action-item menu-entry logs-only",role:"presentation",title:"Change Date and Time Display Mode",children:v("a",{href:"command:console-ninja.changeDateTimeDisplayMode",onClick:n=>{const o=e.current;o.channel.api.changeDateTimeDisplayMode(o.simpleDateTimeDisplayMode?o.showDateTimeValue?"None":"Absolute":void 0),n.preventDefault(),n.stopPropagation()},className:"action-label codicon codicon-watch",role:"button","aria-label":"Change Date and Time Display Mode",tabIndex:-1})}),v("li",{className:"auto-clear action-item menu-entry logs-only",role:"presentation",title:"Turn Auto Clearing After Any File Change Off",children:v("a",{href:"command:console-ninja.toggleLogViewerAutoClear",className:"action-label codicon codicon-refresh",role:"button","aria-label":"Turn Auto Clearing After Any File Change Off",tabIndex:-1})}),v("li",{className:"filter action-item menu-entry logs-only disabled-icon-state hiddenImportant",role:"presentation",title:"Filter (use log entry context lightbulb menu to set)",children:v("a",{className:"action-label codicon codicon-filter",role:"button","aria-label":"Filter (use log entry context lightbulb menu to set)",tabIndex:-1,onClick:n=>{_e(e.current),n.preventDefault(),n.stopPropagation()}})}),v("li",{className:"auto-scroll action-item menu-entry log-only",role:"presentation",title:"Turn Auto Scrolling Off",children:v("a",{href:"command:console-ninja.toggleLogViewerAutoScroll",className:"action-label codicon codicon-unlock",role:"button","aria-label":"Turn Auto Scrolling Off",tabIndex:-1})}),v("li",{className:"action-item menu-entry",role:"presentation",title:"Search (Ctrl/Cmd + F)",children:v("a",{onClick:n=>{Oe(e.current),n.preventDefault(),n.stopPropagation()},className:"action-label codicon codicon-search action-item-search",role:"button","aria-label":"Search",tabIndex:-1})}),v("li",{className:"action-item menu-entry",role:"presentation",title:"Open Ninja Settings",children:v("a",{href:`command:workbench.action.openSettings?${encodeURIComponent(JSON.stringify("@ext:wallabyjs.console-ninja"))}`,className:"action-label codicon codicon-settings",role:"button","aria-label":"Open Ninja Settings",tabIndex:-1})})]})]})]}),v("div",{id:"logs",className:"logs",children:k("div",{className:"logs-container",children:[v("div",{className:"log-items"}),v("div",{className:"loading-indicator codicon codicon-loading hiddenImportant"}),v("div",{className:"no-log-items-placeholder hiddenImportant",children:"no logs available"})]})}),k("div",{id:"watches",className:"watches hiddenImportant",children:[v("div",{className:"watches-container"}),v("div",{className:"no-watch-items-placeholder",children:"no watched values"})]})]})]})}class eo{constructor(){F(this,"_loadedDetails");F(this,"_elements");F(this,"_index");F(this,"_indexShift");F(this,"_totalDuplicateCount");F(this,"_elementsByLocation",new Map);F(this,"_highlights",new Map);F(this,"_filter",{isActive:!1,showFiles:new Set,hideFiles:new Set,showLocations:new Set,hideLocations:new Set});F(this,"_onElementAdded",()=>{});F(this,"_firstElementTs",0);this.clear()}size(){return this._elements.size}loadedDetails(){return this._loadedDetails}removeFirstElementsAndGroups(t){let n=0;if(t>0){for(const o of this._elements.keys()){const i=this._elements.get(o),l=i.data.duplicateCount;if(l){const s=Math.min(l,t);if(this._totalDuplicateCount-=s,t-=s,i.data.duplicateCount-=s,i.data.duplicateCount||delete i.data.duplicateCount,t===0){i.dispatchEvent(wn);break}}if(t--,this._deleteElement(i),n++,t===0)break}this._indexShift+=n,this._reIndexIfRequired()}return n}_reIndexIfRequired(){if(this._indexShift++,this._index>=Number.MAX_SAFE_INTEGER-1e3){this._indexShift=0,this._index=0;for(const t of this._elements.values())t.data.index=this._index++}}_deleteElement(t){const n=t.data.id,o=R(t.data);if(this._elements.delete(n),delete this._loadedDetails[n],!o)return;const i=this._elementsByLocation.get(o);i&&i.delete(n)}clear(){this._loadedDetails={},this._elements=new Map,this._elementsByLocation=new Map,this._index=0,this._indexShift=0,this._totalDuplicateCount=0,this._onElementAdded=t=>{this._firstElementTs=t.data.ts,this._onElementAdded=()=>{}}}isLoaded(t){return!!this._loadedDetails[t]}setLoaded(t){this._loadedDetails[t]=1}getElementById(t){return this._elements.get(t)}addElement({id:t,ts:n,hash:o,duplicateCount:i,file:l,line:s,args:g},r){const c=r,u=this._elements.get(t);this._elements.set(t,c);const d=u?u.data.index:this._index++;c.data={id:t,ts:n,index:d,hash:o,duplicateCount:i,file:l,line:s,args:g},this._onElementAdded(c);const a=R(c.data);if(!a)return;const m=this._elementsByLocation.get(a);if(m)m.set(t,c);else{const y=new Map;y.set(t,c),this._elementsByLocation.set(a,y)}const f=this._highlights.get(a);f&&at(c,f.key)}getIndex(t){if(!t)return;const n=t;if(!!n.data)return n.data.index-this._indexShift}getElementWithData(t){return t||void 0}getTimestamp(t){var o;return t?(o=t.data)==null?void 0:o.ts:void 0}getPreviousElementIndex(t){const n=this._elements.get(t);return(n?n.data.index-1:this._index)-this._indexShift}getFirstElementTimestamp(){return this._firstElementTs}getHash(t){var o;return t?(o=t.data)==null?void 0:o.hash:void 0}getId(t){var o;return t?(o=t.data)==null?void 0:o.id:void 0}getDuplicateCount(t){var o;return t?(o=t.data)==null?void 0:o.duplicateCount:void 0}getTotalDuplicateCount(){return this._totalDuplicateCount}incrementDuplicateCount(t){if(!t)return 0;const n=t;return n.data.duplicateCount?n.data.duplicateCount++:n.data.duplicateCount=1,this._totalDuplicateCount++,n.data.duplicateCount}getHighlight(t){const n=R(t);if(!!n)return this._highlights.get(n)}toggleHighlight(t){var l;const n=R(t.location);if(!n||(this._highlights.get(n)?this._highlights.delete(n):this._highlights.set(n,t),this._elementsByLocation.size===0))return;let i;for(const s of((l=this._elementsByLocation.get(n))==null?void 0:l.values())||[])at(s,t.key)&&(i=s);return i}removeAllHighlights(){for(const t of this._elementsByLocation.values())for(const n of t.values())Ge(n);this._highlights.clear()}hasHighlights(){return this._highlights.size>0}updateFileHighlights({file:t,lineMap:n,deletedLines:o}){Object.entries(n).forEach(([i,l])=>{const s=Number(i),g=R({file:t,line:s});if(!g)return;let r;const c=R({file:t,line:l});c&&(r=this._highlights.get(c),r&&(this._highlights.delete(c),this._highlights.set(g,r)))}),o.forEach(i=>{const l=R({file:t,line:i});!l||this._highlights.delete(l)})}canAdd(t){return!0}_canAdd(t){if(t===void 0)return!0;if(this._filter.hideFiles.has(t.file)||this._filter.showFiles.size>0&&!this._filter.showFiles.has(t.file))return!1;const n=R(t);return!(this._filter.hideLocations.has(n)||this._filter.showLocations.size>0&&!this._filter.showLocations.has(n))}addToFilter(t,n){switch(this.canAdd=this._canAdd.bind(this),this._filter.isActive=!0,n){case"showLocation":this._filter.showLocations.add(R(t));break;case"showFile":this._filter.showFiles.add(t.file);break;case"hideLocation":this._filter.hideLocations.add(R(t));break;case"hideFile":this._filter.hideFiles.add(t.file);break}}canAddToFilter(t,n){if(this._filter.showLocations.size)return!1;if(n==="showFile"||n==="hideFile"){if(this._filter.hideFiles.has(t.file)||this._filter.showFiles.has(t.file))return!1}else if(n==="showLocation"||n==="hideLocation"){const o=R(t);if(this._filter.showLocations.has(o)||this._filter.hideLocations.has(o))return!1}return!0}updateFilter({file:t,lineMap:n,deletedLines:o}){let i=!1;return Object.entries(n).forEach(([l,s])=>{const g=Number(l),r=R({file:t,line:g});if(!r)return;const c=R({file:t,line:s});c&&(this._filter.showLocations.has(c)&&(this._filter.showLocations.delete(c),this._filter.showLocations.add(r)),this._filter.hideLocations.has(c)&&(this._filter.hideLocations.delete(c),this._filter.hideLocations.add(r)))}),o.forEach(l=>{const s=R({file:t,line:l});!s||(i=this._filter.showLocations.delete(s)||i,this._filter.hideLocations.delete(s))}),this._filter.showFiles.size===0&&this._filter.hideFiles.size===0&&this._filter.showLocations.size===0&&this._filter.hideLocations.size===0&&this.resetFilter(),i}resetFilter(){this._filter.isActive=!1,this._filter.hideFiles.clear(),this._filter.hideLocations.clear(),this._filter.showFiles.clear(),this._filter.showLocations.clear(),this.canAdd=()=>!0}get filter(){if(!!this._filter.isActive)return{showFiles:Array.from(this._filter.showFiles),hideFiles:Array.from(this._filter.hideFiles),showLocations:Array.from(this._filter.showLocations),hideLocations:Array.from(this._filter.hideLocations)}}}sn.render(v(Qn,{}),document.getElementById("root"));
